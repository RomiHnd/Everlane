var CS_CONF={"useLambdaBuild":false,"collectionEnabled":true,"useSentry":false,"isSMB":false,"projectId":1533,"status":1,"hostnames":["everlane.com","narvar.com"],"crossDomainTracking":0,"crossDomainSingleIframeTracking":0,"consentRequired":0,"allowSubdomains":1,"visitorCookieTimeout":34164000000,"sampleRate":100,"replayRecordingRate":10,"validationRate":10,"lastTrackingDraw":1543485938,"trackerDomain":"c.contentsquare.net","recordingDomain":"r.contentsquare.net","useMalkaPipeline":1,"ed":"l.contentsquare.net/log/web","eMerchandisingEnabled":0,"mouseMoveHeatmapEnabled":1,"autoInsightsEnabled":1,"jsErrorsEnabled":1,"customErrorsEnabled":1,"jsCustomErrorsEnabled":0,"apiErrorsEnabled":1,"customHashIdEnabled":0,"recordingEncryptionEnabled":0,"recordingEncryptionPublicKey":null,"recordingEncryptionPublicKeyId":0,"secureCookiesEnabled":0,"triggerSessionReplayEnabled":0,"triggerSessionReplayRegex":null,"dynamicIdRegex":null,"whitelistedAttributes":[],"replayRecordingUnmaskedUrlRegex":null,"replayRecordingUnmaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegexRules":[],"replayRecordingMaskedUrlRegex":".*account.*","anonymisationMethod":"replayRecordingMaskedUrlRegex","tagDeploymentMode":"CONTENTSQUARE","experimental":null,"iframesTracking":0,"textVisibilityEnabled":0,"cookielessTrackingEnabled":0,"malkaUrlEnabled":0,"malkaEtrEnabled":0,"pathComputationRules":{},"asyncSerializerEnabled":1,"pendingInactivityTimeout":5000,"accessibilityEnabled":0,"uxaDomain":"app.contentsquare.com","webviewsTrackingEnabled":0,"useStaticResourceManager":1,"performanceTimingOptions":{"withResource":false,"withNavigation":false},"replayConsentRequiredForSession":0,"eventsApiEnabled":0,"clickedElementTextEnabled":0,"collectHierarchy":0,"collectSubmit":0,"collectTargetText":0,"apiErrors":{"collectStandardHeaders":0,"collectionRules":[]},"customErrors":{"consoleMessageLogLevels":[]},"displayAdOptions":null,"taskSchedulerOptions":{"enabled":1},"malkaQuotaServiceDomain":"q-aus1.contentsquare.net","malkaRecordingDomain":"k-aus1.contentsquare.net","staticResourceManagerDomain":"srm.bf.contentsquare.net","voc":{"siteId":null,"enabled":0},"implementations":[{"template":{"name":"ArtificialPageview","args":{"path":"/checkout?billing"}},"triggers":[{"name":"ElementExist","args":{"selector":"div[class^=styles_merchant-badge]"}}]},{"template":{"name":"ArtificialPageview","args":{"path":"/checkout?"}},"triggers":[{"name":"ElementClick","args":{"selector":"button[class*=subtotal-continue-button]"}}]},{"template":{"name":"ArtificialPageview","args":{"path":"/checkout?shipping"}},"triggers":[{"name":"ElementExist","args":{"selector":"form[id=address-form]"}}]},{"template":{"name":"PiiMasking","args":{"cssSelectors":["address, p[class*='payment-method__label'], div.pac-container"],"attributes":[]}},"triggers":[{"name":"PageState","args":{"state":"Any"}}]}]};
;
(()=>{var fe={};fe.d=(s,n)=>{for(var t in n)fe.o(n,t)&&!fe.o(s,t)&&Object.defineProperty(s,t,{enumerable:!0,get:n[t]})};fe.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}();fe.o=(s,n)=>Object.prototype.hasOwnProperty.call(s,n);fe.r=s=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})};var Or={};fe.r(Or);fe.d(Or,{getRequestParameters:()=>gy});function ns(s,n){let t;return window.Zone&&typeof window.Zone.__symbol__=="function"&&(t=s[window.Zone.__symbol__(n)]),t||(t=s[n]),t}var _i=typeof window=="undefined";function pu(){return typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof fe.g!="undefined"?fe.g:typeof process!="undefined"?process:Function("return this")()}var at=pu();var oc="cs-native-frame",Fe={navigatorProperties:[{propertyName:"sendBeacon",binding:navigator}],nodeProperties:["childNodes","parentNode","nextSibling","firstChild"],elementProperties:["shadowRoot"],elementPropertiesValues:["matches","mozMatchesSelector","msMatchesSelector","oMatchesSelector","webkitMatchesSelector"],eventProperties:["target"],imageProperties:["src"],constructors:{Date:"csDate",JSON:"csJSON",Array:"csArray",String:"csString",URL:"csURL",MutationObserver:"csMutationObserver",screen:"csScreen",RegExp:"csRegExp"}};window.csSetTimeout=ns(window,"setTimeout");window.csQueueMicrotask=ns(window,"queueMicrotask");window.csClearTimeout=ns(window,"clearTimeout");window.csSetInterval=ns(window,"setInterval");window.csClearInterval=ns(window,"clearInterval");window.csFileReader=ns(window,"FileReader");(()=>{var s;let n=0;function t(i){return"cs$Symbol_"+i}function e(i){return t(i)+ ++n}e.for=t,window.csSymbol=(s=window.Symbol)!==null&&s!==void 0?s:e})();function fu(){let s=document.createElement("iframe");s.id=oc,s.setAttribute("hidden",""),s.setAttribute("title","Intentionally blank"),s.setAttribute("sandbox","allow-same-origin");let n=document.createElement("cs-native-frame-holder");if(n.setAttribute("hidden",""),document.body.appendChild(n),!!Element.prototype.attachShadow){let e=n.attachShadow({mode:"closed"});return e.innerHTML=s.outerHTML,e.firstElementChild.contentWindow}return n.innerHTML=s.outerHTML,n.firstElementChild.contentWindow}function gu(s,n){let t,e=s;for(;e&&!(t=Object.getOwnPropertyDescriptor(e,n));)e=Object.getPrototypeOf(e);return t}function mu(s,n,t){let e=gu(s,n);if(!e)return function(){return this[n]};switch(t){case"get":return e.get;case"set":return e.set;case"value":return e.value}}function ac(s){var n,t;Object.keys(Fe.constructors).forEach(e=>{window[Fe.constructors[e]]=s[e]instanceof Function&&s[e].prototype==null?s[e].bind(window):s[e]}),Su(s),("Prototype"in window||Eu())&&(window.csMutationObserver=(t=(n=ns(window,"MutationObserver"))!==null&&n!==void 0?n:window.WebKitMutationObserver)!==null&&t!==void 0?t:window.MutationObserver),Is("csNode",Fe.nodeProperties,s.Node.prototype,"get"),Is("csElement",Fe.elementProperties,s.Element.prototype,"get"),Is("csElement",Fe.elementPropertiesValues,s.Element.prototype,"value",!1),Is("csHTMLImageElement",Fe.imageProperties,s.HTMLImageElement.prototype,"set"),Is("csEvent",Fe.eventProperties,s.Event.prototype,"get"),Is("csNavigator",Fe.navigatorProperties,s.navigator,"value")}function Is(s,n,t,e,i=!0){n.forEach(r=>{let o=typeof r!="string"&&"binding"in r,c=o?r.propertyName:r;(i||c in t)&&(window[`${s+c}`]=mu(t,c,e),o&&(window[`${s+c}`]=window[`${s+c}`].bind(r.binding)))})}function cc(s,n){window.CSProtectnativeFunctionsLogs=window.CSProtectnativeFunctionsLogs||{},window.CSProtectnativeFunctionsLogs[s]=n}function yu(){try{let s=fu();return s?(window.CSPureWindow=s,ac(window.CSPureWindow),!0):!1}catch(s){return cc("Warning",`failed to copy references from pure iframe: ${s.message}`),!1}}if(!yu())try{ac(at)}catch(s){cc("Critical",`failed to copy references from window: ${s.message}`)}function Eu(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}function Su(s){window.csquerySelector={1:s.Element.prototype.querySelector,9:s.Document.prototype.querySelector,11:s.DocumentFragment.prototype.querySelector},window.csquerySelectorAll={1:s.Element.prototype.querySelectorAll,9:s.Document.prototype.querySelectorAll,11:s.DocumentFragment.prototype.querySelectorAll}}var ct=(()=>{let s;return function(n){n.ELLIPSIS="\u2026";function t(o){return csString.prototype.replace.call(o,/[.*+?^${}()|[\]\\]/g,"\\$&")}function e(o){return csString.prototype.replace.call(o,/([#;&,.+*~':"!^$[\]()<=>|/%?@`{}\\ ])/g,"\\$1")}n.escapeInvalidCharacters=e;function i(o,c,l){if("replaceAll"in csString.prototype)return csString.prototype.replaceAll.call(o,c,l);let h=new csRegExp(t(c),"g");return csString.prototype.replace.call(o,h,l)}n.stringReplaceAll=i;function r(o,c,l=""){return o.length<=c?o:csString.prototype.slice.call(o,0,c-l.length)+l}n.truncate=r}(s||(s={})),s})();function cr(s){return ct.escapeInvalidCharacters(csString.prototype.toLowerCase.call(s.localName))}function vu(s){let n=s.getAttribute("id");return n&&ct.escapeInvalidCharacters(n)}function Ct(s){return W(s)&&(typeof s=="number"||s instanceof Number)&&!isNaN(s)}function xs(s){return s===parseInt(s,10)}function T(s){return W(s)&&(typeof s=="string"||s instanceof csString)}function jo(s){return typeof s=="boolean"}function ss(s){return typeof s=="object"}function W(s){return typeof s!="undefined"}function mt(s){return W(s)&&s!==null}function K(s){return typeof s=="object"&&s!==null}function _u(s,n,t){return xs(s)&&s>=n&&s<=t}function wu(s){for(let n in s)return!1;return!0}function me(s){return typeof s=="function"}function Ie(s){return s instanceof Element}function is(s){return s instanceof Error}function bu(s){let n=s.length;for(let t=0;t<n;t++)switch(csString.prototype.charCodeAt.call(s,t)){case 9:case 10:case 11:case 12:case 13:case 32:case 160:continue;default:return!1}return!0}function dt(s){return s.nodeType===1}function tn(s){return s.nodeType===3}function Au(s){return s.nodeType===8}function lc(s){return dt(s)&&s.localName==="link"}function Tu(s){return dt(s)&&s.localName==="source"}function hc(s){return dt(s)&&s.localName==="a"}function Nr(s){return lc(s)&&csString.prototype.indexOf.call(s.rel,"stylesheet")!==-1}function Ru(s){return dt(s)&&s.localName==="img"}function pn(s){return dt(s)&&s.localName==="style"}function fn(s){return dt(s)&&s.localName==="input"}function Mr(s){return dt(s)&&s.localName==="textarea"}function gn(s){return dt(s)&&s.localName==="script"}function Cu(s){return dt(s)&&s.localName==="button"}function Fs(s){return dt(s)&&"ownerSVGElement"in s}function Dr(s){return dt(s)&&s.localName==="select"}function Iu(s){return dt(s)&&s.localName==="details"}function Pu(s){return dt(s)&&s.localName==="summary"}function Ou(s){return Fs(s)&&s.localName==="image"}function Nu(s){return Fs(s)&&s.localName==="use"}function Mu(s){return Fs(s)&&s.localName==="feImage"}function Du(s){switch(s.nodeType){case 9:case 11:return!0;default:return!1}}function ku(s){switch(s.nodeType){case 9:case 11:case 1:return!0;default:return!1}}function en(s){return s.nodeType===9}function mi(s){return Du(s)&&"host"in s&&"mode"in s}function uc(s){return dt(s)&&!!csElementshadowRoot.apply(s)&&mi(csElementshadowRoot.apply(s))}var Lu=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"];function xu(s){return dt(s)&&mt(s.tagName)&&csString.prototype.indexOf.call(s.tagName,"-")>0&&csString.prototype.indexOf.call(s.tagName,":")===-1&&csString.prototype.indexOf.call(s.tagName,'"')===-1&&csString.prototype.indexOf.call(s.tagName,",")===-1&&csArray.prototype.indexOf.call(Lu,csString.prototype.toLocaleLowerCase.call(s.tagName))<0}var wi="detached";function dc(s){let n=s,t=[n];for(;csNodeparentNode.apply(n)!==null;)n=csNodeparentNode.apply(n),csArray.prototype.push.call(t,n);return sn(n)&&csArray.prototype.push.call(t,wi),{ancestors:t,selectionRoot:n}}function Uu(s){let n=s,t=[n],e=null;for(;csNodeparentNode.apply(n)!==null;)e===null&&hc(n)&&(e=n),csArray.prototype.push.call(t,csNodeparentNode.apply(n)),n=csNodeparentNode.apply(n);return sn(n)&&csArray.prototype.push.call(t,wi),{firstAnchorParent:e,ancestors:t,selectionRoot:n}}function sn(s){return Re.isValidElement(s)}var gs=(()=>{var s,n;return(n=(s=at.Element)===null||s===void 0?void 0:s.prototype)!==null&&n!==void 0?n:{}})(),Wt=gs.matches||gs.matchesSelector||gs.mozMatchesSelector||gs.msMatchesSelector||gs.oMatchesSelector||gs.webkitMatchesSelector,Ho=gs.closest,pc=9;function Vu(s,n){return n?csArray.prototype.some.call(n,t=>Wt.call(s,t)):!1}function ju(s,n,t){if(s===wi||s.nodeType===pc)return 0;let e=t.dynamicElementNameRegex,i=!!(e!=null&&e.test(n.localName)),r=cr(n),o=0,c=n.previousElementSibling;for(;c;)(cr(c)===r||i&&(e!=null&&e.test(c.localName)))&&!Vu(c,t.reliableSelectors)&&(o+=1),c=c.previousElementSibling;return o}function Hu(s,n,t){if(s===wi||s.nodeType===pc)return 0;let e=0,i=n.previousElementSibling;for(;i;)Wt.call(i,t)&&(e+=1),i=i.previousElementSibling;return e}var Bu=[/\d{4}/,/^ember\d+$/],Fu="@",kr="data-cs-override-id",zu="data-cs-dynamic-id";function fc(s,n,t,e){let i=e.dynamicIdRegex||null,r=e.dynamicElementNameRegex,o=cr(s);if(r&&r.test(s.localName)&&(o=csString.prototype.replace.call(o,r,`$1${Fu}`)),qu(s,t)){let E=Lr(s);return{hasUniqueIdentifier:!0,elementSelector:`${o}[${kr}="${E}"]`}}let c=Zu(s,t,e);if(c.success)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UA[${c.attributeName}="${c.attributeValue}"]`};let l=$u(s,t,e);if(l)return{hasUniqueIdentifier:!0,elementSelector:`${o}#UCS[${l}]`};let h=vu(s);if(Yu(s,h,t,i))return{hasUniqueIdentifier:!0,elementSelector:`${o}#${h}`};let g=Gu(s,e);if(g){let E=Hu(n,s,g);return{hasUniqueIdentifier:!1,elementSelector:`${o}[${g}](${E})`}}let d=ju(n,s,e);return{hasUniqueIdentifier:!1,elementSelector:`${o}:eq(${d})`}}function $u(s,n,t){if(t.uniqueCssSelectors){for(let e of t.uniqueCssSelectors)if(Wt.call(s,e)&&Qu(e,n))return e}}function Gu(s,n){if(n.reliableSelectors){for(let t of n.reliableSelectors)if(Wt.call(s,t))return t}}function qu(s,n){let t=Lr(s);return t&&csString.prototype.match.call(t,/^[\w-]+$/)&&xr(kr,t,n)}function Wu(s){return Lr(s)!==null}function Lr(s){return s.getAttribute(kr)}function Yu(s,n,t,e){return n&&!Wu(s)&&!Xu(s,n,e)&&Ju(n,t)}function Xu(s,n,t){return s.hasAttribute(zu)||Ku(n,t)}function Ku(s,n){let t=!1;return s&&n&&(t=n.test(s)),s&&(csArray.prototype.some.call(Bu,e=>e.test(s))||t)}function Ju(s,n){return s&&xr("id",s,n)}function xr(s,n,t){try{return window.csquerySelectorAll[t.nodeType].call(t,`[${s}="${n}"]`).length===1}catch(e){if(e.name!=="SyntaxError")throw e}return!1}function Qu(s,n){try{return window.csquerySelectorAll[n.nodeType].call(n,s).length===1}catch(t){if(t.name!=="SyntaxError")throw t}return!1}function Zu(s,n,t){if(!t.uniqueAttributes)return{success:!1};for(let e of t.uniqueAttributes){let i=s.getAttribute(e);if(i!==null&&xr(e,i,n))return{attributeName:e,attributeValue:i,success:!0}}return{success:!1}}var lr=11;function nn(s,n,t){let e=csArray.prototype.shift.call(s);if(s.length===0)return Bo(e,t);let i=e,r=s[0],{elementSelector:o,hasUniqueIdentifier:c}=fc(i,r,n,t);if(!t.fullPath&&c){let h=s[s.length-1];return`${Bo(h,t)}${o}`}let l=nn(s,n,t);return`${l?`${l}>`:""}${o}`}function Bo(s,n){if(s===wi)return"|detached|";if(s.host){let{ancestors:t,selectionRoot:e}=dc(s.host);return`${nn(t,e,n)}|shadow-root|`}return s.nodeType===lr?"|fragment|":""}var gc=(()=>{class s{constructor(t){this.options=t,this.done=!1,this.path=null}getPath(){if(this.path===null)throw new Error("getPath was called before serializeElement");return this.path}isDone(){return this.done}}return s})(),td=(()=>{class s extends gc{constructor(){super(...arguments),this.ro=!1,this.oo=!1,this.Xa=!1}jm(t,e){return this.ro&&!(e===null&&sn(t))&&t.nodeType!==lr&&!t.host}Hm(t){return!t.localName}serializeElement(t,e,i){var r;if((r=this.path)!==null&&r!==void 0||(this.path=""),this.jm(t,e))return;let o=!1;e===null&&sn(t)&&(o=!0,this.done=!0);let c=this.oo&&!this.options.fullPath?"":">",l=!!t.host;if(l&&this.path&&(this.path="|shadow-root|"+c+this.path,this.Xa=!0,this.ro=!1,this.oo=!1),!l&&e===null&&t.nodeType===lr){this.path="|fragment|"+c+this.path,this.done=!0;return}if(this.Hm(t))return;let h=e!=null?e:"detached",{elementSelector:g,hasUniqueIdentifier:d}=fc(t,h,i,this.options);d&&(this.oo=!0,this.ro=!this.options.fullPath);let E=`${o?`|detached|${c}`:""}${this.ro&&!d?"":g}`,S=!d&&this.oo&&!this.options.fullPath?"":this.path&&!this.Xa?">":"";this.Xa=!1,this.path=`${E}${S}${this.path}`}}return s})();function Zt(s,n=Ut.SHOW_ALL){let t=n|Ut.SHOW_ELEMENT,e=[document.createTreeWalker(s,t,null,!1)],i=Fo(s);i&&csArray.prototype.push.call(e,document.createTreeWalker(i,t,null,!1));let r=null;return{root:s,nextNode(){if(i){let o=i;return i=null,o}for(;e.length>0;){if(r){let h=r;return r=null,h}let c=e[e.length-1].nextNode();if(!c){csArray.prototype.pop.call(e);continue}let l=Fo(c);if(n&Ut.SHOW_DOCUMENT_FRAGMENT&&l&&(r=l),l&&csArray.prototype.push.call(e,document.createTreeWalker(l,t,null,!1)),(Un[c.nodeType]&n)!==0)return c}return null},visitAll(o){Un[s.nodeType]&n&&o(s);let c=this.nextNode();for(;c;){if((Un[c.nodeType]&n)===0){c=this.nextNode();continue}o(c),c=this.nextNode()}},collectAll(o){let c=[];return this.visitAll(l=>csArray.prototype.push.call(c,o?o(l):l)),c}}}function Fo(s){return s&&uc(s)?s.shadowRoot:null}var xn=(()=>{var s;return(s=at.Node)!==null&&s!==void 0?s:{}})(),Ut=(()=>{var s;return(s=at.NodeFilter)!==null&&s!==void 0?s:{}})(),Un={2:Ut.SHOW_ATTRIBUTE,4:Ut.SHOW_CDATA_SECTION,8:Ut.SHOW_COMMENT,11:Ut.SHOW_DOCUMENT_FRAGMENT,9:Ut.SHOW_DOCUMENT,10:Ut.SHOW_DOCUMENT_TYPE,1:Ut.SHOW_ELEMENT,[xn.ENTITY_NODE]:Ut.SHOW_ENTITY,[xn.ENTITY_REFERENCE_NODE]:Ut.SHOW_ENTITY_REFERENCE,[xn.NOTATION_NODE]:Ut.SHOW_NOTATION,7:Ut.SHOW_PROCESSING_INSTRUCTION,3:Ut.SHOW_TEXT},pt={debug(...s){},warn(...s){},implementation(...s){},error(...s){},critical(...s){},isPerfLoggingActive(){return!1}};function ed(s){pt=s}var P=s=>(n,t,e)=>{let i=(t==null?void 0:t.toString())||"",r=s||`${n.constructor&&n.constructor.name}.${i}`;if(e){let o=e.value;e.value=function(...c){return Pe(r,o.bind(this))(...c)}}};function Pe(s,n){return function(...t){try{let e=n.apply(this,t);return W(window.Promise)&&e instanceof window.Promise?e.then(i=>i,i=>pt.error(is(i)?i:new Error(i),s)):e}catch(e){try{pt.error(is(e)?e:new Error(e),s)}catch{}}}}var zs=(()=>{class s{constructor(){this.ao=0}get length(){return this.ao}get isEmpty(){return!this.Rs}pushAll(t){for(let e=0;e<t.length;e++)this.push(t[e])}push(t){this.ao++,this.Un?this.Un=this.Un[1]=[t,void 0]:this.Un=this.Rs=[t,void 0]}pop(){if(!this.Rs)return null;this.ao--;let t=this.Rs[0];return this.Rs=this.Rs[1],this.Rs||(this.Un=void 0),t}forEach(t){let e=this.Rs;for(;e!=null&&e.length;)t(e[0]),e=e[1]}clear(){this.ao=0,this.Rs=this.Un=void 0}}return s})(),mc=50,yc=.1;function sd(){var s;if(!(!((s=window.performance)===null||s===void 0)&&s.mark))return!1;let n="isPerformanceMeasureSupported",t=`${n}_a`;return performance.mark(t),performance.measure(n,t)!==void 0}var rn=!1,Yi=new zs;function id(s=50,n=.1){rn=pt.isPerfLoggingActive()&&sd(),rn&&(mc=s,yc=n)}var hr=[],Vn=[];function Ec(s){csArray.prototype.push.call(hr,s),performance.mark(`${s}-start`)}function Sc(s){let n=performance.measure(s,`${s}-start`);if(!n)return;let t=n.duration;t>=yc&&csArray.prototype.push.call(Vn,{mName:s,mDuration:+t.toFixed(2)}),csArray.prototype.pop.call(hr),hr.length===0&&(t>mc&&Yi.push(Vn),Vn=[])}function vs(s,n){return function(...t){if(!rn)return s.apply(this,t);Ec(n);let e=s.apply(this,t);return Sc(n),e}}var It=function(s){return function(n,t,e){let i=e.value;e.value=function(){if(!rn)return e.value=i,i.apply(this,arguments);Ec(s);let r=i.apply(this,arguments);return Sc(s),r}}};var ys=(()=>{let s;return function(n){function t(){return!!Element.prototype.attachShadow}n.isSupported=t;function e(r){return r&&uc(r)?r.shadowRoot:null}n.getShadowRoot=e;function i(r){return Zt(r,NodeFilter.SHOW_DOCUMENT_FRAGMENT).collectAll(o=>o.host)}n.getAllShadowHosts=vs(i,"getAllShadowHosts")}(s||(s={})),s})(),Tt=(()=>{let s;return function(n){function t(){let d=[i()];return document.documentElement&&csArray.prototype.push.call(d,document.documentElement.scrollHeight,document.documentElement.offsetHeight,document.documentElement.clientHeight),document.body&&csArray.prototype.push.call(d,document.body.scrollHeight,document.body.offsetHeight),Math.max(...d)}n.documentHeight=t;function e(){return document.documentElement.scrollWidth}n.documentWidth=e;function i(){return window.innerHeight}n.windowHeight=i;function r(){return window.innerWidth}n.windowWidth=r;function o(){let d=window.csScreen.width;return xs(d)&&d>0?d:window.screen.width}n.screenWidth=o;function c(){let d=window.csScreen.height;return xs(d)&&d>0?d:window.screen.height}n.screenHeight=c;function l(){return window.pageXOffset}n.windowOffsetX=l;function h(){return window.pageYOffset}n.windowOffsetY=h;function g(){return{dw:`${e()}`,dh:`${t()}`,ww:`${r()}`,wh:`${i()}`,sw:`${o()}`,sh:`${c()}`}}n.getRequestParameters=g}(s||(s={})),s})();function Us(s){var n;let t=(n=s.length)!==null&&n!==void 0?n:0,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=s[i];return e}function Te(s,n){let t=s.length,e=new csArray(t);for(let i=0;i<t;i+=1)e[i]=n(s[i]);return e}function nd(s,n,t){let e=[],i=0;for(let r=0;r<s.length;r+=1){let o=n(s[r]);for(let c=0;c<o.length;c++)t(o[c],i++)}return e}function Ur(s,n){let t=[];return nd(s,n,e=>csArray.prototype.push.call(t,e)),t}function X(s,n){if(rd(s)){let t=s.length;for(let e=0;e<t;e++)n(s[e],e)}else{let t=0,e=s.next();for(;!e.done;)n(e.value,t++),e=s.next()}}function rd(s){return s.length>=0}function pe(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return s[e]}function on(s,n){let t=s.length;for(let e=0;e<t;e++)if(n(s[e],e))return!0;return!1}function Vr(s,n){let t=s.length;for(let e=0;e<t;e++)if(!n(s[e],e))return!1;return!0}function yi(s,n){let t=s.length,e=[];for(let i=0;i<t;i+=1){let r=s[i];n(r)&&csArray.prototype.push.call(e,r)}return e}function od(s,n,t){let e=s.length+n.length+((t==null?void 0:t.length)||0),i=new csArray(e),r=0;for(let o=0;o<s.length;o++)i[r++]=s[o];for(let o=0;o<n.length;o++)i[r++]=n[o];if(!t)return i;for(let o=0;o<t.length;o++)i[r++]=t[o];return i}function zo(s,n){for(let t=0;t<s.length;t++)csArray.prototype.push.call(n,s[t])}function rs(s){let n=s instanceof Map,t=[];return s.forEach((e,i)=>csArray.prototype.push.call(t,n?[i,e]:e)),t}var jn=(()=>{var s;return(s=at.Node)!==null&&s!==void 0?s:Object})(),rt=(()=>{let s;return function(n){let t="isConnected"in jn.prototype?v=>v.isConnected:v=>!v.ownerDocument||!(v.ownerDocument.compareDocumentPosition(v)&v.DOCUMENT_POSITION_DISCONNECTED);function e(v,D){for(let V=v;V;V=csNodenextSibling.apply(V))D(v)}n.forEachChild=e;function i(v){return t(v)}n.isConnected=i;function r(v,D){let V=[];for(let F of l(v,D))csArray.prototype.push.call(V,F);return V}n.getAncestors=r;let o=(v,D)=>{var V;return(V=csNodeparentNode.apply(v))!==null&&V!==void 0?V:D&&mi(v)?v.host:null};function c(v,D,V=!1){let F=v;for(;F;){if(D(F))return F;let st=o(F,V);if(st&&st!==F)F=st;else break}return null}n.findAncestor=c;function*l(v,D=!1){let V=v;for(;V;){yield V;let F=o(V,D);if(F&&F!==V)V=F;else break}}n.walkUp=l;function h(v,D){if(v===D||D.contains(v))return!0;let V=n.getParentElement(v);return V&&V!==v?h(V,D):!1}n.isDescendantOf=h;function g(v){var D;return v.parentElement?v.parentElement:n.getRootNode(v)?(D=n.getRootNode(v))===null||D===void 0?void 0:D.host:null}n.getParentElement=g;function d(v,D=document){let V=Us(window.csquerySelectorAll[D.nodeType].call(D,v)),F=ys.getAllShadowHosts(D);for(let st of F){let yt=ys.getShadowRoot(st);if(!yt)continue;let kt=Us(window.csquerySelectorAll[yt.nodeType].call(yt,v));csArray.prototype.push.call(V,...kt)}return V}n.findAllElements=d,n.getRootNode=(()=>{if("getRootNode"in jn.prototype)return(V,F)=>V.getRootNode(F);function v(V){let F=D(V);return mi(F)?v(F.host):F}function D(V){return csNodeparentNode.apply(V)!=null?D(csNodeparentNode.apply(V)):V}return(V,F)=>typeof F=="object"&&!!F.composed?v(V):D(V)})();function E(v){return v==="transparent"||/^(rgba|hsla)\(\d+, \d+%?, \d+%?, 0\)$/.test(v)}function y(v){let D=v.getBoundingClientRect();return D.right+Tt.windowOffsetX()<0||D.bottom+Tt.windowOffsetY()<0}function S(v){var D,V;if(((D=v.checkVisibility)===null||D===void 0?void 0:D.call(v,{checkOpacity:!0,checkVisibilityCSS:!0}))===!1)return!0;if(!v.offsetParent){if(!v.getBoundingClientRect)return pt.warn(`SUP-11432: Element doesn't have getBoundingClientRect. Node: ${v instanceof jn} Ctor: ${(V=v==null?void 0:v.constructor)===null||V===void 0?void 0:V.name}`),!1;let yt=v.getBoundingClientRect();if(yt.width==0&&yt.height==0)return!0}let F=window.getComputedStyle(v);return F?F.display==="none"||F.visibility==="hidden"||F.visibility==="collapse"||F.opacity==="0"||F.filter==="opacity(0)"||F.width==="0px"&&F.height==="0px"||E(F.color):!0}n.isHiddenByCSS=S;function R(v){if(S(v))return!0;let V=g(v);return V!=null&&R(V)}n.areAncestorsHiddenByCSS=R;function O(v){let D=null,V=v;do if(S(V))D=V;else break;while(V=g(V));return D}n.getTopAncestorHiddenByCSS=O;function b(v){let D=w(v);return D!==null&&!v.contains(D)&&!D.contains(v)}function w(v){let D=v.getBoundingClientRect(),V=D.left+.5*D.width,F=D.top+.5*D.height;return N(document,V,F)}n.getTopElement=w;function x(v){if(!v.getBoundingClientRect)return null;let D=v.getBoundingClientRect(),V=D.x+D.width/2,F=D.y+D.height/2;return n.getTopElementFromPoint(document,V,F)}n.getElementOnTop=x;function N(v,D,V){let F=v.elementFromPoint(D,V);if(!F)return null;let st=ys.getShadowRoot(F);return st&&st!=n.getRootNode(document.body)&&st!==v?N(st,D,V):F}n.getTopElementFromPoint=N;function C(v){return!y(v)&&!S(v)&&!b(v)}n.isVisibleInDocument=C;function H(v){return S(v)?!1:$(v)}n.isVisibleInViewportInForeground=H;function $(v){let D=w(v);return D===null?!1:v===D?!0:St(v)?v.textContent!==""&&D.contains(v):v.contains(D)}n.isInViewPort=$;function it(v,D,V){let F=v.getAttributeNS(D,V);return F===""?v.hasAttributeNS(D,V)?F:null:F}n.getAttributeNS=it;function Et(v){return!!(v.hasAttribute("tabIndex")||v.getAttribute("contentEditable")==="true"||hc(v)&&v.hasAttribute("href")||(Dr(v)||Mr(v)||fn(v)||Cu(v))&&!v.hasAttribute("disabled")||Iu(v)||Pu(v))}n.isElementFocusable=Et;function St(v){return v.localName==="span"||v.localName==="a"||v.localName==="b"||v.localName==="i"||v.localName==="button"||v.localName==="input"||v.localName==="label"||v.localName==="cite"||v.localName==="small"||v.localName==="strong"||v.localName==="code"||v.localName==="abbr"||v.localName==="em"||v.localName==="dfn"||v.localName==="time"||v.localName==="output"||v.localName==="object"||v.localName==="sub"}n.isInlineElement=St}(s||(s={})),s})(),ad=(()=>{class s{constructor(t){this.Bm=t}run(t){let e=[...this.Bm],i=rt.getAncestors(t,!1),r=i[i.length-1];for(;e.length>0&&i.length>0;){let o=csArray.prototype.shift.call(i),c=i[0]||null;if(this.Fm(e,o,c,r),this.zm(e),e.length===0)break;i.length===0&&o.host&&(i=rt.getAncestors(o.host,!1),r=i[i.length-1])}}Fm(t,e,i,r){for(let o of t)o.serializeElement(e,i,r)}zm(t){for(let e=0;e<t.length;e++)t[e].isDone()&&(csArray.prototype.splice.call(t,e,1),e--)}}return s})(),cd=(()=>{class s extends gc{serializeElement(t){var e;if((e=this.path)!==null&&e!==void 0||(this.path=""),(t==="detached"||t.localName==="body")&&(this.done=!0,this.path.length>0))return;let i=this.$m(t);if(i+=i.length>0?"|":"",this.path.length+i.length>this.options.hierarchyMaxLength){this.done=!0;return}this.path=i+this.path}$m(t){if(!t.localName)return"";let e=`@${t.localName};`;return e+=this.Gm(t.id),t.classList&&(e+=this.qm(csArray.from(t.classList))),t.attributes&&(e+=this.Wm(t)),e}Gm(t){return t?`#${t};`:""}qm(t){return t.length>0?`.${csArray.prototype.join.call(csArray.prototype.sort.call(t),";.")};`:""}Ym(t,e){var i,r;return((r=(i=this.options).isAttributeSensitive)===null||r===void 0?void 0:r.call(i,t,e))||csArray.prototype.indexOf.call(this.options.attributeIgnoreTokens,e)!==-1||Fs(t)&&csString.prototype.indexOf.call(e,"data-")===-1&&e!=="aria-label"||fn(t)&&e==="value"}Xm(t,e){return this.options.useAnonymization&&!this.options.allWhitelistedAttributes.has(t)||e.length>this.options.attrMaxLength}Km(t){let e={};for(let i of csArray.from(t.attributes))this.Ym(t,i.name)||(e[i.name]=i.value);return e}Wm(t){var e,i;if(!((i=(e=this.options).isNodeSensitive)===null||i===void 0)&&i.call(e,t))return"";let r=Object.entries(this.Km(t));return csArray.prototype.join.call(csArray.prototype.sort.call(csArray.prototype.map.call(csArray.prototype.filter.call(r,([o])=>o.length<this.options.attrMaxLength),([o,c])=>this.Xm(o,c)?`[${o}]`:`[${o}=${c}]`)),";")+(r.length>0?";":"")}}return s})(),Re=(()=>{let s;return function(n){n.INVALID_ELEMENT="INVALID_ELEMENT";function t(c){return!!c&&"localName"in c&&"getAttribute"in c&&"hasAttribute"in c&&"parentNode"in c}n.isValidElement=t;function e(c,l,h={fullPath:!1,dynamicIdRegex:null}){let g=o(c);if(g===document)return{path:"",hierarchy:""};if(!t(g))return{path:n.INVALID_ELEMENT,hierarchy:n.INVALID_ELEMENT};let d=new td(h),E=new cd(l);return new ad([d,E]).run(g),{path:d.getPath(),hierarchy:E.getPath()}}n.getElementPathAndHierarchy=e;function i(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return"";if(!t(h))return n.INVALID_ELEMENT;let{ancestors:g,selectionRoot:d}=dc(h);return nn(g,d,l)}n.getElementPath=i;function r(c,l={fullPath:!1,dynamicIdRegex:null}){let h=o(c);if(h===document)return{path:"",firstAnchorParent:null};if(!t(h))return{path:n.INVALID_ELEMENT,firstAnchorParent:null};let{firstAnchorParent:g,ancestors:d,selectionRoot:E}=Uu(h);return{path:nn(d,E,l),firstAnchorParent:g}}n.getElementPathAndFirstAnchorParent=r;function o(c){return c&&"jquery"in c&&c.length===1?c[0]:c}}(s||(s={})),s})();window.CSPathComputation=window.CSPathComputation||Re;var ld=Number.MAX_SAFE_INTEGER||9007199254740991;function $o(){}function Oe(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function hd(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var jr=34164e6,Es={percentage(){return Math.floor(Math.random()*1e4)/100},boolean(s){return this.percentage()<s},integer(s=ld){return Math.floor(Math.random()*s)}},Hn=csSymbol("cachedJson");function ud(s){if(s[Hn])return s[Hn];if(csArray.isArray(s)){if(s.length===0)return"[]";let n="["+Vs(s[0]);for(let t=1;t<s.length;t++)n+=","+Vs(s[t]);return n+="]"}return s[Hn]=csJSON.stringify(s)}var Vs=typeof window.Symbol!="undefined"?ud:csJSON.stringify;var ht=(()=>{let s;return function(n){n.debug="debug",n.warn="warn",n.implementation="implementation",n.error="error",n.critical="critical"}(s||(s={})),s})(),vc=["t.contentsquare.net","clicktale"],dd=s=>{var n;if(typeof s.filename=="string"&&csArray.prototype.some.call(vc,t=>csString.prototype.indexOf.call(s.filename,t)>-1)&&!(csString.prototype.indexOf.call(s.filename,"blob")>-1&&(s.message==null?void 0:csString.prototype.indexOf.call(s.message,"importScripts"))>-1)){let t=new Error(s.message);t.stack=(n=s.error)===null||n===void 0?void 0:n.stack,B.critical(t)}};window.addEventListener("error",dd);var B=(()=>{class s{constructor(){}static whiteListFilename(t){csArray.prototype.push.call(vc,t)}static setStrategy(t){s.xi=t}static computeIsActive(t){s.Le=Es.boolean(t),s.Le?s.Ka=Es.boolean(10):s.Ka=!1}static isLoggingActive(){return s.Le}static getStrategy(){return s.xi}static debug(t,e=""){s.Le&&this.xi.send(t,e,ht.debug)}static warn(t,e=!0,i=""){var r;s.Le&&e&&this.xi.send(t,i,ht.warn),(r=window.UXAnalytics.Console)===null||r===void 0||r.warn(t)}static implementation(t,e=""){s.Le&&this.xi.send(t,e,ht.implementation)}static error(t,e=""){var i;s.Le&&this.xi.send(t,e,ht.error),(i=window.UXAnalytics.Console)===null||i===void 0||i.error(t)}static critical(t,e=""){this.xi.send(t,e,ht.critical)}static tryToExecute(t,e){return function(...i){try{let r=e.apply(this,i);return W(window.Promise)&&r instanceof window.Promise?r.then(o=>o,o=>s.error(is(o)?o:new Error(o),t)):r}catch(r){try{s.error(is(r)?r:new Error(r),t)}catch{}}}}static isPerfLoggingActive(){return s.Ka}}return s.Le=!1,s.Ka=!1,s})();var pd=/^\d+\.\d+(?:\.\d+)?$/,fd=s=>{if(!pd.test(s))return;let[n,t,e]=csArray.prototype.map.call(csString.prototype.split.call(s,"."),Number);return{major:n,minor:t,patch:!e||Number.isNaN(e)?0:e}},gd=(s,n)=>s.major!==n.major?s.major-n.major:s.minor!==n.minor?s.minor-n.minor:s.patch-n.patch,md=(s,n)=>gd(s,n)>=0,yd=1,Ed="f553e78fb58e051e51fe8074c4c6e73e",ur=(()=>{let s;return function(n){n[n.Disabled=0]="Disabled",n[n.ButtonAndLinkOnly=1]="ButtonAndLinkOnly",n[n.Enabled=2]="Enabled"}(s||(s={})),s})(),Sd=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,g,d,E,y,S,R;this.isSMB=(e=t.isSMB)!==null&&e!==void 0?e:!1,this.trackerDomain=t.trackerDomain,this.dynamicConfDomain=t.dynamicConfDomain,this.settingsFileUri=t.settingsFileUri,this.tagDomain=t.tagDomain,this.loggerDomain=t.ed,this.minLogLevel=t.logLevel,this.projectId=t.projectId,this.smbConfig=t.smbConfig,this.status=t.status,this.hostnames=t.hostnames,this.iframesTracking=!!t.iframesTracking,this.crossDomainTracking=!!t.crossDomainTracking,this.crossDomainSingleIframeTracking=!!t.crossDomainSingleIframeTracking,this.consentRequired=!!t.consentRequired,this.allowSubdomains=!!t.allowSubdomains,this.visitorCookieTimeout=t.visitorCookieTimeout||jr,this.sampleRate=t.sampleRate,this.replayRecordingRate=t.replayRecordingRate,this.validationRate=t.validationRate,this.lastTrackingDraw=t.lastTrackingDraw||1,this.useHttps=!0,this.eMerchandisingEnabled=t.eMerchandisingEnabled,this.mouseMoveHeatmapEnabled=t.mouseMoveHeatmapEnabled,this.jsErrorsEnabled=t.jsErrorsEnabled,this.collectionEnabled=!!(!((o=(i=t.collectionEnabled)!==null&&i!==void 0?i:(r=t.smbConfig)===null||r===void 0?void 0:r.record)!==null&&o!==void 0)||o),this.useSentry=!!((c=t.useSentry)!==null&&c!==void 0?c:!((l=t.smbConfig)===null||l===void 0)&&l.useSentry),this.apiErrors={enabled:(h=t.apiErrorsEnabled)!==null&&h!==void 0?h:0,...t.apiErrors},this.customErrors={enabled:(g=t.customErrorsEnabled)!==null&&g!==void 0?g:0,...t.customErrors},this.jsCustomErrorsEnabled=t.jsCustomErrorsEnabled,this.triggerSessionReplayEnabled=t.triggerSessionReplayEnabled,this.triggerSessionReplayRegex=this.Ja(t.triggerSessionReplayRegex),this.dynamicIdRegex=t.dynamicIdRegex?new csRegExp(t.dynamicIdRegex):null,this.whitelistedAttributes=t.whitelistedAttributes||[],this.replayRecordingUnmaskedUrlRegex=this.Ja(t.replayRecordingUnmaskedUrlRegex),this.replayRecordingMaskedUrlRegex=this.Ja(t.replayRecordingMaskedUrlRegex),this.replayRecordingMaskedUrlRegexRules=t.replayRecordingMaskedUrlRegexRules||null,this.replayRecordingUnmaskedUrlRegexRules=t.replayRecordingUnmaskedUrlRegexRules||null,this.anonymisationMethod=t.anonymisationMethod||null,this.tagDeploymentMode=t.tagDeploymentMode,this.dualCollectionTagDomain=t.dualCollectionTagDomain||null,this.ptcDomain=t.ptcDomain||null,this.ptcGuid=t.ptcGuid||null,this.secureCookiesEnabled=!!t.secureCookiesEnabled,this.ptcSha512=t.ptcSha512||null,this.ptcSnapshotPath=t.ptcSnapshotPath||null,this.emitDebugEvents=!1,this.staticResourceManagerDomain=t.staticResourceManagerDomain||null,this.malkaRecordingDomain=t.malkaRecordingDomain||null,this.textVisibilityEnabled=t.textVisibilityEnabled,this.experimental=t.experimental||{},this.malkaEtrEnabled=!!t.malkaEtrEnabled,this.malkaUrlEnabled=!!t.malkaUrlEnabled,this.recordingUrlRules=(d=t.recordingUrlRules)!==null&&d!==void 0?d:[],this.cookielessTrackingEnabled=t.cookielessTrackingEnabled,this.customHashIdEnabled=!!t.customHashIdEnabled,this.encryptionEnabled=!!t.recordingEncryptionEnabled,this.encryptionPublicKey=t.recordingEncryptionPublicKey||null,this.pathComputationRules=t.pathComputationRules||{},t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex===""&&(this.pathComputationRules.dynamicElementNameRegex=null),t.pathComputationRules&&t.pathComputationRules.dynamicElementNameRegex&&(this.pathComputationRules.dynamicElementNameRegex=new csRegExp(t.pathComputationRules.dynamicElementNameRegex)),this.asyncSerializerEnabled=!!t.asyncSerializerEnabled,this.encryptionPublicKeyId=t.recordingEncryptionPublicKeyId,this.pendingInactivityTimeout=t.pendingInactivityTimeout||5e3,this.accessibilityEnabled=!!t.accessibilityEnabled,this.useStaticResourceManager=!!t.useStaticResourceManager,t.taskSchedulerOptions&&(this.taskSchedulerOptions={...t.taskSchedulerOptions,enabled:!!t.taskSchedulerOptions.enabled}),this.uxaDomain=t.uxaDomain,this.environment=((E=t.uxaDomain)===null||E===void 0?void 0:E.indexOf("staging"))>-1?"staging":"production",this.performanceTimingOptions=t.performanceTimingOptions,this.replayConsentRequiredForSession=!!t.replayConsentRequiredForSession,this.isWebView=!1,t.displayAdOptions&&t.displayAdOptions.length&&(this.displayAdOptions=t.displayAdOptions),t.voc&&(this.voc={...t.voc,enabled:!!t.voc.enabled}),this.vocData=t.vocData,t.heapEnvironment&&(this.heapEnvironment=t.heapEnvironment),t.implementations&&t.implementations.length&&(this.implementations=t.implementations),this.eventsApiEnabled=!!t.eventsApiEnabled,this.anonymizeDigits=(y=t.anonymizeDigits)!==null&&y!==void 0?y:null,this.isHeapPresent=window.heap!==void 0,this.recordTargetingRules=(S=t.recordTargetingRules)!==null&&S!==void 0?S:[],this.paProxyDomainUri=t.paProxyDomainUri||null,this.emitRecordInfoEvents=t.emitRecordInfoEvents!=!1,this.collectHierarchy=!!t.collectHierarchy,this.collectSubmit=!!t.collectSubmit,this.collectTargetText=(R=t.collectTargetText)!==null&&R!==void 0?R:ur.Disabled}getTrackerUri(){return`${this.Cs()}://${this.trackerDomain}`}getSentryFileUri(){return`${this.Cs()}://${this.tagDomain}/uxa/smb/errors.js`}getSentryDSNUri(){return`https://${Ed}@${this.loggerDomain}/4508608369131520`}getRecordingUri(){return`${this.Cs()}://${this.malkaRecordingDomain}`}getLoggerUri(){return`${this.Cs()}://${this.loggerDomain}`}getMetricsUri(){return`${this.Cs()}://${this.loggerDomain}/metrics`}getStaticResourceManagerUri(){return`${this.Cs()}://${this.staticResourceManagerDomain}`}getSettingsFileUri(){return this.settingsFileUri?this.settingsFileUri:`${this.Cs()}://${this.dynamicConfDomain}/${this.projectId}.json`}isQuotaEnabled(){return this.isSMB&&!!this.dynamicConfDomain}getPaProxyDomainUri(){return`${this.Cs()}://${this.paProxyDomainUri}`}Cs(){return this.useHttps?"https":"http"}isProjectActive(){return this.status===yd}processOptionOverrides(t){t&&t.forEach&&t.forEach(([e,...i])=>{if(e==="setOption"){let[r,o]=i;this.Jm(r,o)}})}Jm(t,e){t==="trackerDomain"&&(this.trackerDomain=e),t==="loggerDomain"&&(this.loggerDomain=e),t==="malkaRecordingDomain"&&(this.malkaRecordingDomain=e),t==="staticResourceManagerDomain"&&(this.staticResourceManagerDomain=e),t==="minLogLevel"&&(this.minLogLevel=e),t==="useHttps"&&(this.useHttps=!!e),t==="isWebView"&&(this.isWebView=e),t==="dynamicConfDomain"&&(this.dynamicConfDomain=e),t==="paProxyDomainUri"&&(this.paProxyDomainUri=e)}Ja(t){return t?this.Qm(t):null}getRequestParameters(){return{pid:`${this.projectId}`}}updateDynamicFields(t,e){t==="emitDebugEvents"&&(this.emitDebugEvents=e),t==="minLogLevel"&&(this.minLogLevel=e)}Qm(t){try{let e=/^\/(.*)\/([gim]*)$/.exec(t);if(e){let[,i,r]=e;return new csRegExp(`^${i}$`,r)}return new csRegExp(`^${t}$`)}catch{return null}}isHeaderCollectionActive(){var t,e;return this.apiErrors.collectStandardHeaders||!!(!((t=this.apiErrors.validCustomHeaders)===null||t===void 0)&&t.length)||!!(!((e=this.apiErrors.plainCustomHeaders)===null||e===void 0)&&e.length)}isCsSideloadingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_sideloads_heap"&&!this.isHeapPresent}isHeapSideloadsCs(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"}isHeapSideloadsCsV5(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="heap_sideloads_cs"&&this.Hu()}isHeapSideloadsStartDataCollection(){if(this.isHeapSideloadsCs()){if(this.Hu())return!0;let t=fd(this.getHeapVersion()||"");if(t&&t.major===4&&md(t,{major:4,minor:23,patch:5}))return!0}return!1}Hu(){var t;return typeof((t=window.heap)===null||t===void 0?void 0:t.getUserId)=="function"}getHeapVersion(){var t,e,i,r,o,c;return typeof((t=window.heap)===null||t===void 0?void 0:t.getConfig)=="function"&&((r=(i=(e=window.heap)===null||e===void 0?void 0:e.getConfig())===null||i===void 0?void 0:i.sdk)===null||r===void 0?void 0:r.version)||((c=(o=window.heap)===null||o===void 0?void 0:o.version)===null||c===void 0?void 0:c.heapJsVersion)||void 0}isCsCrosswritingHeap(){var t;return((t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_tag_status)==="cs_crosswrites_heap"}getHeapStorageLocation(){var t,e;return(e=(t=this.heapEnvironment)===null||t===void 0?void 0:t.heap_storage_location)!==null&&e!==void 0?e:null}getHeapWebAppUri(){return this.getHeapStorageLocation()==="eu-west-1"?"https://eu.heapanalytics.com":"https://heapanalytics.com"}isCollectTargetTextEnabled(){return this.isSMB||this.collectTargetText!==ur.Disabled}isNetworkDetailsEnabled(){return this.performanceTimingOptions?this.performanceTimingOptions.withResource||this.performanceTimingOptions.withNavigation:!1}hasRecordingUrlRules(){var t;return!!(!((t=this.recordingUrlRules)===null||t===void 0)&&t.length)}hasTargetingRules(){var t;return!!(!((t=this.recordTargetingRules)===null||t===void 0)&&t.length)}}return s})(),vd=(()=>{class s{constructor(t,e){this.co=t,this.Bu=e}init(){this.Fu=this.co!==this.co.top,this.zu=this.Bu.isWebView&&this.co===this.co.top,this.Bu.iframesTracking&&this.Fu||this.zu?this.$u=!1:this.$u=!0}isInIframeContext(){return this.Fu}isTopWindowTracker(){return this.$u}isInWebViewContext(){return this.zu}}return s})(),Ei=(()=>{let s;return function(n){function t(e){return csArray.prototype.join.call(csArray.prototype.map.call(Object.keys(e),i=>`${encodeURIComponent(i)}=${encodeURIComponent(e[i])}`),"&")}n.toQuery=t}(s||(s={})),s})(),_c=(()=>{class s{constructor(t,e){this.domainUri=t,this.path=e,this.beforeRequestCallbacks=[],this.afterRequestCallbacks=[]}setRequestParametersProviders(...t){this.requestParametersProviders=t}before(t){csArray.prototype.push.call(this.beforeRequestCallbacks,t)}after(t){csArray.prototype.push.call(this.afterRequestCallbacks,t)}retrieveParameters(){return this.requestParametersProviders?csArray.prototype.reduce.call(csArray.prototype.map.call(this.requestParametersProviders,t=>t.getRequestParameters()),(t,e)=>({...t,...e})):{}}}return s})(),js=(()=>{class s extends _c{constructor(t,e){super(t,e)}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,i=>i());let t=this.retrieveParameters();this.Qa(t);let e=Ei.toQuery(t);this.Zm(e),csArray.prototype.forEach.call(this.afterRequestCallbacks,i=>i())}Zm(t){let e=new window.Image(1,1);e.onload=$o,e.onerror=$o,csHTMLImageElementsrc.call(e,`${this.domainUri}${this.path?`/${this.path}`:""}?${t}`)}Qa(t){t.r=csString.prototype.slice.call(`${Math.random()}`,2,8)}}return s})(),_d=(()=>{class s{constructor(t,e){this.Is=t,this.ty=e}init(){this.cs=new js(this.Is.getLoggerUri()),this.cs.setRequestParametersProviders(this,this.ty)}send(t){this.lo=t,this.cs.send()}getRequestParameters(){return{a:this.lo.app,l:this.lo.level,m:this.lo.message,s:this.lo.stacktrace}}}return s})();function tt(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}var dr=(()=>{class s{static setGlobalService(t){s.globalService=t}constructor(t){this.name=t}_get(){return this._values}_reset(){this._values={}}aggregate(){if(!s.globalService)return;let t=this._get(),e=Object.keys(t);e.length&&(s.globalService.push(csArray.prototype.map.call(e,i=>({name:this.name,parameter:i,value:t[i]}))),this._reset())}}return s.globalService=null,tt([P("Metric.aggregate")],s.prototype,"aggregate",null),s})(),Ht=(()=>{class s extends dr{constructor(t,e=100){super(t),this.ey=e,this.Ie=null,this._values={}}count(t,e=1){this._values[t]=(this._values[t]||0)+e,this._debounce()}_debounce(){dr.globalService&&(this.Ie&&window.csClearTimeout(this.Ie),this.Ie=window.csSetTimeout(()=>{this.aggregate(),this.Ie=null},this.ey))}}return s})();var lt={counters:{commandsFromIntegrations:new Ht("commands-from-integrations"),commandsFromCSTC:new Ht("commands-from-cstc"),commandsFromIframe:new Ht("commands-from-iframe"),commandApplied:new Ht("command-applied"),commandError:new Ht("command-error"),commandMisuse:new Ht("command-misuse"),CSTCSnippetUsed:new Ht("cstc-snippet-used"),redactedPII:new Ht("redacted-pii"),pageAnonymisation:new Ht("page-anonymisation"),patchedNativeFunctions:new Ht("patched-native-functions"),pureWindowState:new Ht("pure-window-state"),sensitiveElements:new Ht("sensitive-elements"),cspErrors:new Ht("csp-errors"),networkRequests:new Ht("network-requests")},setService(s){dr.setGlobalService(s)}},wd=/[a-zA-Z0-9._%+-]+(?:@|%40|%2540)[a-zA-Z0-9.%-_]+((?:\.|%2[eE])[a-zA-Z0-9-]+)+/g,bd=/[a-zA-Z0-9+_-](?:@|%40|%2540)/,Ad="CS_ANONYMIZED_EMAIL",Bn="([-A-Za-z0-9+/=_]|=[^=]|={3,})+",Td=new csRegExp(`(ey${Bn}\\.ey${Bn}\\.${Bn})`,"g"),Rd="CS_ANONYMIZED_JWT",Cd=/[0-9]{4}/,Id=/(^|[^a-zA-Z0-9*.,-])([45*][0-9*]{3}([ -]?)[0-9*]{4}\3[0-9*]{4}\3[0-9*]{4})($|[^a-zA-Z0-9*.,-])/g,Pd="CS_ANONYMIZED_PII",Od="\u2022",Nd=/\d/g,Md=/([+(]{0,2}\d[-_ ()/]{0,4}){9,}/,Dd=/(?:\d{1,3}\.){3}\d{1,3}/,kd=/(?:[A-F0-9]{1,4}:){7}[A-F0-9]{1,4}/,ze=(()=>{let s;return function(n){function t(g){return csString.prototype.replace.call(g,wd,Ad)}n.replaceEmail=t;function e(g){return csString.prototype.replace.call(g,Td,Rd)}n.replaceJWT=e;function i(g,d){return csString.prototype.replace.call(g,Id,d)}n.replaceCreditCardNumber=i;function r(g){return csString.prototype.replace.call(g,Nd,Od)}n.replaceDigits=r;function o(g){return Dd.test(g)||kd.test(g)}n.mayHaveIPAddress=o;function c(g){return Md.test(g)}n.mayHaveNumberSequence=c;function l(g){return Cd.test(g)}n.mayHaveCreditCardNumber=l;function h(g){return bd.test(g)}n.mayHaveEmail=h}(s||(s={})),s})(),bi=(()=>{class s{hasPII(t,e){let i=this.checkAndAnonymizePII(t,e);return t!==i}checkAndAnonymizePII(t,e=null){let i=this.sy(this.Za(t));return e===!0?i=this.iy(i):e===!1&&(i=this.ny(i)),i}anonymizePII(t){return this.Za(t)}anonymizeJwt(t){return ze.replaceJWT(t)}anonymizeFields(t,e){return csArray.prototype.forEach.call(e,i=>{t[i]=this.Za(t[i])}),t}Za(t){if(ze.mayHaveEmail(t)){let e=ze.replaceEmail(t);return e!==t&&lt.counters.redactedPII.count("email"),e}return t}iy(t){return ze.replaceDigits(t)}ny(t){return ze.mayHaveNumberSequence(t)?ze.replaceDigits(t):t}sy(t){return ze.mayHaveCreditCardNumber(t)?ze.replaceCreditCardNumber(t,(e,i,r,o,c)=>{if(csString.prototype.indexOf.call(r,"*")===-1){let h=o.length?csArray.prototype.join.call(csString.prototype.split.call(r,o),""):r;if(!this.ry(h))return e;lt.counters.redactedPII.count("cc")}else lt.counters.redactedPII.count("cc-partial");return`${i}${Pd}${c}`}):t}ry(t){let e=parseInt(t[t.length-1]),i=0;for(let r=t.length-2;r>=0;r--){let o=parseInt(t[r]);r%2===0&&(o*=2),i+=Math.floor(o/10)+o%10}return 10-i%10===e}}return s})(),wc="15.114.0";function Hr(){return{v:wc}}function Br(s){let n=new ArrayBuffer(s.length),t=new Uint8Array(n);for(let e=0,i=s.length;e<i;e+=1)t[e]=csString.prototype.charCodeAt.call(s,e);return n}function Go(s){let n=new Uint8Array(s),t="";for(let e=0;e<n.byteLength;e+=1)t+=csString.fromCodePoint(n[e]);return t}function bc(s){let n=self.atob(s);return Br(n)}function pr(s){let n=csArray.from(new Uint8Array(s));return csArray.prototype.join.call(csArray.prototype.map.call(n,t=>csString.prototype.padStart.call(t.toString(16),2,"0")),"")}function qo(s){let n=csString.prototype.indexOf.call(s,";base64,")!==-1,t=csString.prototype.indexOf.call(s,","),e=n?[csString.prototype.substring.call(s,0,t-7),csString.prototype.substring.call(s,t+1)]:[csString.prototype.substring.call(s,0,t),csString.prototype.substring.call(s,t+1)];if(!n&&/^%3Csvg/i.test(e[1]))try{e[1]=decodeURIComponent(e[1])}catch(o){pt.warn(`${o}, calling decodeURIComponent on: ${e[1]}`)}let r=n?bc(e[1]):Br(e[1]);return new Blob([r],{type:csString.prototype.replace.call(e[0],"data:","")})}var Ac=typeof performance!="undefined"&&!!performance.now,Wo=Ac?()=>performance.now():csDate.now,Ld=(()=>{var s,n;return Ac?(n=(s=performance.timing)===null||s===void 0?void 0:s.navigationStart)!==null&&n!==void 0?n:Math.floor(performance.timeOrigin):0})(),M={now(){return Math.round(Wo()+Ld)},elapsed(){return Wo()}};function Yo(){return Math.floor(M.now()/1e3)}function Tc(){return typeof window.Promise=="function"}function xd(){var s;return typeof crypto!="undefined"&&me((s=crypto.subtle)===null||s===void 0?void 0:s.digest)}function Xo(){var s,n;return typeof((s=window.navigation)===null||s===void 0?void 0:s.addEventListener)=="function"&&typeof((n=window.navigation)===null||n===void 0?void 0:n.removeEventListener)=="function"}function Vt(s,n){return csString.prototype.lastIndexOf.call(s,n,0)===0}function $s(s,n){return csString.prototype.indexOf.call(s,n,s.length-n.length)!==-1}var Rc=(()=>{class s{constructor(t,e){this.h=t,this.I=e}getRequestParameters(){return{d:`${M.now()}`,p:this.I.anonymizePII(window.location.href),...this.h.getRequestParameters(),...Hr()}}}return s})(),Ud="uxa",Ko=5,Vd="No stacktrace",Cc="snippet-",Ic="implementation-snippet-",Jo=(()=>{let s;return function(n){n.IMPLEMENTATION="implementation",n.DYNAMIC="dynamic"}(s||(s={})),s})(),Fn={[ht.debug]:0,[ht.warn]:1,[ht.implementation]:1,[ht.error]:2,[ht.critical]:3},jd=(()=>{class s{constructor(t,e,i){this.ls=e,this.I=new bi,this.Gu=Fn[ht.warn],this.Gu=Fn[t.minLogLevel||ht.warn],this.cs=i||new _d(t,new Rc(t,this.I)),this.qu={[ht.debug]:[],[ht.warn]:[],[ht.implementation]:[],[ht.error]:[],[ht.critical]:[]},this.ho={implementation:{},dynamic:{}},this.cs.init()}send(t,e="",i=ht.warn){if(!this.oy(i,e))return;csArray.prototype.push.call(this.qu[i],e||"");let r={message:this.ay(t,e),stacktrace:this.cy(t),app:Ud,level:i};this.cs.send(r)}ay(t,e){let i=is(t)?this.I.anonymizePII(t.message||t.toString()):t;return e&&(i+=` ErrorCode: ${e}`),i}cy(t){return is(t)?`${t.stack||Vd} ${this.Vn()}`:this.Vn()}Vn(){let t=this.ls.getVisitorService(),e=t==null?void 0:t.getVisitor();if(!e)return"No context";let i=this.ls.getSessionService(),r=i&&i.getSession(),o={userId:e.id,sessionNumber:e.visitsCount,pageNumber:r&&r.pageNumber};return csJSON.stringify(o)}oy(t,e){if(Fn[t]<this.Gu)return!1;if((e==null?void 0:csString.prototype.indexOf.call(e,Ic,0))===0)return this.Wu(e,Jo.IMPLEMENTATION);if((e==null?void 0:csString.prototype.indexOf.call(e,Cc,0))===0)return this.Wu(e,Jo.DYNAMIC);let i=this.qu[t];return!(i.length>=Ko||e&&csArray.prototype.some.call(i,r=>r===e))}Wu(t,e){return t in this.ho[e]?this.ho[e][t]>=Ko?!1:(this.ho[e][t]+=1,!0):(this.ho[e][t]=1,!0)}}return s})(),Nt=!_i&&document.createElement("a"),Hd=/(:443|:80)$/;function ge(s){return Nt?(Nt.href=s,Nt.href):""}function Bd(s,n){return new csURL(s,n).href}function Pc(s){let n=zr(s);return n===null?"":decodeURIComponent(n.hostname)}function Fr(s,n){return csArray.prototype.some.call(n,t=>$s(s,`.${t}`)||s===t||t==="")}function Fd(s){return s[0]==="/"?s:`/${s}`}function Qo(s){return csString.prototype.replace.call(s,Hd,"")}function zr(s){return!Nt||!Vt(s,"http://")&&!Vt(s,"https://")?null:(Nt.href=s,{hash:Nt.hash,host:Qo(Nt.host),hostname:Nt.hostname,href:Nt.href,origin:Nt.origin?Nt.origin:Qo(`${Nt.protocol}//${Nt.host}`),pathname:Fd(Nt.pathname),port:Nt.port,protocol:Nt.protocol,search:Nt.search})}var Zo="CS_IFRAME_MESSAGE",zd=(()=>{let s;return function(n){n.AfterPageView="afterPageView",n.GetSessionKey="getSessionKey"}(s||(s={})),s})(),he=(()=>{let s;return function(n){n.Parent="parent",n.Child="child"}(s||(s={})),s})(),Z=(()=>{let s;return function(n){n.Discovery="discovery",n.Stop="stop",n.RecordingContext="recordingContext",n.SensitiveStatus="sensitiveStatus",n.RecordingEvent="recordingEvent",n.EndOfBufferedMessages="endOfBufferedMessages",n.ChildLogMessage="childLogMessage",n.AnalysisEvent="analysisEvent",n.JavascriptError="javascriptError",n.ApiError="apiError",n.Assets="assets",n.DetailedApiError="detailedApiError",n.EmerchandisingMessage="emerchandisingMessage",n.Commands="commands",n.IntegrationCallback="integrationCallback",n.StaticResource="staticResource",n.TrackingContextResultMessage="trackingContextResultMessage",n.TrackingContextRequestMessage="trackingContextRequestMessage",n.CustomError="customError"}(s||(s={})),s})(),bt=(()=>{let s;return function(n){function t(l,h,g,d){let E={type:l,from:h,pid:g,signature:Zo};return d!==void 0&&d>=0&&(E.id=d),E}n.buildBaseMessage=t;function e(l,h,g,d){let E=Pc(l.origin);return!!l.data&&!!l.data.type&&l.data.signature===Zo&&l.data.from===h&&l.data.pid===g&&Fr(E,d)}n.isMessageValid=e;function i(l,h,g,d){d?l.postMessage(g,h,d):l.postMessage(g,h)}n.sendPostMessage=i;function r(){return new MessageChannel}n.getNewChannelMessage=r;function o(l,h){l.postMessage(h)}n.sendChannelMessage=o;function c(l){l.close()}n.closeChannelPort=c}(s||(s={})),s})(),$d=(()=>{class s{constructor(t){this.h=t}send(t,e="",i=ht.warn){let r={message:t,errorCode:e,level:i},o=bt.buildBaseMessage(Z.ChildLogMessage,he.Child,this.h.projectId);o.content=r,bt.sendPostMessage(window.parent,"*",o)}}return s})(),Gd=(()=>{class s{setContext(t,e){this.C=t,this.w=e}getVisitorService(){return this.C}getSessionService(){return this.w}}return s})();function qd(s){if(document!=null&&document.prerendering){document.addEventListener("prerenderingchange",s,{once:!0});return}s()}function j(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Wd(){let s=new MutationObserver(n=>{n.forEach(t=>{X(t.removedNodes,e=>{e instanceof HTMLElement&&e.tagName==="CS-NATIVE-FRAME-HOLDER"&&(lt.counters.pureWindowState.count("iframe-deletion"),pt.warn("<cs-native-frame-holder> deleted"),s.disconnect())})})});s.observe(document.body,{childList:!0})}function ta(s){return typeof s!="function"?!1:s.toString().indexOf("[native code]")!==-1}function Yd(){(!ta(MutationObserver)||!ta(MutationObserver.prototype.observe))&&lt.counters.patchedNativeFunctions.count("MutationObserver")}function Xd(){try{window.CSPureWindow&&Wd(),Yd()}catch{}}var vt=(()=>{let s;return function(n){n.CURRENT_DOMAIN="CURRENT_DOMAIN";function t(l){let g=new csRegExp(`(^|;)[ ]*${l}=([^;]*)`).exec(document.cookie);return g?decodeURIComponent(g[2]):null}n.get=t;function e(l,h,g,d,E,y){let S=encodeURIComponent(`${h}`),R=g===n.CURRENT_DOMAIN?void 0:g,O=i(d),b=O?`;expires=${O.toUTCString()}`:"",w=";path=/",x=mt(R)?`;domain=${R}`:"",N=`${l}=${S}${b}${w}${x}`;return W(E)&&E!==Je.NotSet&&(N=`${N};SameSite=${E}`),W(y)&&y===we.Yes&&(N=`${N};Secure`),document.cookie=N,!0}n.set=e;function i(l){return Ct(l)?new csDate(M.now()+l):l}n.toExpireDate=i;function r(l,h){t(l)&&e(l,"",h,new csDate(0)),t(l)&&e(l,"",h,new csDate(0),Je.None,we.Yes)}n.remove=r;function o(){return document.cookie.length>0}n.isCookiePresent=o;function c(l,h){let g="_cs_root-domain",d=t(g);if(d!==null&&d!=="1")return d;let E=csString.prototype.split.call(window.location.hostname,"."),y=csArray.prototype.pop.call(E);for(;E.length&&(d===null||d==="1");)y=csArray.prototype.join.call([csArray.prototype.pop.call(E),y],"."),e(g,y,y,void 0,l,h),d=t(g);return r(g,y),y}n.getRootDomain=c}(s||(s={})),s})(),Kd=(()=>{let s;return function(n){function t(){return window.navigator.vendor&&csString.prototype.indexOf.call(window.navigator.vendor,"Apple")>-1&&window.navigator.appVersion&&csString.prototype.indexOf.call(window.navigator.appVersion,"Version/12.")>-1}n.browserIsSafariV12=t}(s||(s={})),s})(),Je=(()=>{let s;return function(n){n.None="None",n.Lax="Lax",n.NotSet="X"}(s||(s={})),s})(),we=(()=>{let s;return function(n){n[n.Yes=1]="Yes",n[n.No=0]="No"}(s||(s={})),s})(),mn=(()=>{class s{constructor(t,e,i){this.h=t,this.A=e,this.ni=i,this.tc=!1,this.Yu=Je.NotSet,this.sc=we.No}getSameSiteFlag(){return this.Yu}getSecureFlag(){return this.sc}getDomain(){return this.ic}getRootDomain(){return this.Xu}init(){if(this.h.cookielessTrackingEnabled)return;let t=this.ly(),e=this.hy();this.tc=this.uy(t,e),this.tc?(this.Yu=t,this.sc=e):this.h.secureCookiesEnabled&&this.A.getUrlProtocol()==="https:"&&(this.sc=we.Yes),this.Xu=this.dy(),this.ic=this.py(this.Xu)}uy(t,e){return Kd.browserIsSafariV12()?!1:(vt.set(s.COOKIE_TEST_FOR_SAME_SITE,"Test same site",s.CURRENT_DOMAIN,void 0,t,e),vt.get(s.COOKIE_TEST_FOR_SAME_SITE)?(vt.remove(s.COOKIE_TEST_FOR_SAME_SITE,s.CURRENT_DOMAIN),!0):!1)}ly(){return this.A.getUrlProtocol()==="http:"?Je.Lax:this.ni.isSameSiteNoneSecureNeeded()||this.h.crossDomainTracking?Je.None:Je.Lax}hy(){return this.A.getUrlProtocol()==="http:"?we.No:this.h.secureCookiesEnabled||this.h.crossDomainTracking||this.ni.isSameSiteNoneSecureNeeded()?we.Yes:we.No}isSameSiteSupported(){return this.tc}set(t,e,i){let r=vt.toExpireDate(i);vt.set(t,e,this.ic,r,this.getSameSiteFlag(),this.getSecureFlag())}get(t){let i=new csRegExp(`(^|;)[ ]*${t}=([^;]*)`).exec(document.cookie);return i?decodeURIComponent(i[2]):null}delete(t,e){let i=e||this.ic;vt.remove(t,i)}dy(){let t=this.ni.isSameSiteNoneSecureNeeded()&&this.isSameSiteSupported(),e=t?Je.None:void 0,i=t?we.Yes:void 0;return vt.getRootDomain(e,i)}py(t){return this.h.allowSubdomains?t:vt.CURRENT_DOMAIN}}return s.CURRENT_DOMAIN="CURRENT_DOMAIN",s.COOKIE_TEST_FOR_SAME_SITE="_cs_same_site",s})(),Ps="_cs_t",ea="1",Jd=(()=>{class s{constructor(t,e){this.mt=t,this.h=e,this.uo=!1,this.po=!1}init(){if(!this.h.cookielessTrackingEnabled&&this.mt.isTopWindowTracker()&&"cookie"in document){if(!this.mt.isInIframeContext()&&vt.isCookiePresent()){this.uo=!0,this.po=!1;return}if(vt.set(Ps,ea,vt.CURRENT_DOMAIN),vt.get(Ps)!==null){this.uo=!0,this.po=!1,vt.remove(Ps,vt.CURRENT_DOMAIN);return}vt.set(Ps,ea,vt.CURRENT_DOMAIN,void 0,Je.None,we.Yes),vt.get(Ps)!==null&&(this.uo=!0,this.po=!0,vt.remove(Ps,vt.CURRENT_DOMAIN))}}areCookiesEnabled(){return this.uo}isSameSiteNoneSecureNeeded(){return this.po}}return s})();function Qd(){let s="CSSessionStorageTest";try{return sessionStorage.setItem(s,s),sessionStorage.getItem(s)!==s?!1:(sessionStorage.removeItem(s),!0)}catch{return!1}}var Zd=(()=>{class s{constructor(t,e){this.h=t,this.ni=e}canTrack(){return this.h.isProjectActive()&&this.fy()&&this.Ku()&&this.gy()}canTrackInChild(){return this.h.isProjectActive()&&this.my()&&(this.Ku()||this.yy())}gy(){return this.h.cookielessTrackingEnabled?Qd():this.ni.areCookiesEnabled()}Ku(){return Fr(window.location.hostname,this.h.hostnames)}fy(){return!this.Ju()&&this.Ey()}my(){return!this.Ju()&&this.Sy()}yy(){return window.location.protocol==="about:"&&window.location.hostname===""}Ju(){return"visibilityState"in document&&document.visibilityState==="prerender"}Ey(){return this.Qu()&&this.vy()}Sy(){return this.Qu()}vy(){try{return!!window.localStorage}catch{return!1}}Qu(){return"pageXOffset"in window&&"pageYOffset"in window&&"onpagehide"in window&&"JSON"in window&&"parse"in window.csJSON&&"stringify"in window.csJSON&&"addEventListener"in window&&"removeEventListener"in window&&"Node"in window&&"filter"in csArray.prototype&&"forEach"in csArray.prototype&&"querySelectorAll"in document&&"now"in csDate&&"keys"in Object&&"performance"in window&&"Map"in window&&"Set"in window}}return s})(),tp=(()=>{class s{constructor(t,e){this.nc=!1,this.Zu=new Map,this.td=new Map,this.sd=new Map,this.nd="CS_WORKER_SIGNATURE";let i=`
    const algorithm = ${t.algorithm};
    const compressor = (${t.getCompressorSourceCode()})();
    (()=>{"use strict";var e;!function(e){e.UNCOMPRESSED="0",e.GZIP="2"}(e||(e={}));let t={debug(...e){},warn(...e){},implementation(...e){},error(...e){},critical(...e){},isPerfLoggingActive:()=>!1};class s{constructor(e){var t;this.queryParams={},this.headers={},this.handleRecoveredRequests=e=>{for(const t of e){const{metadata:e,events:s}=t;this.send(s,e)}},this.endpoint=e.endpoint,this.compressionOpts=e.compressionOpts,this.recoveryStorage=e.recoveryStorage,this.mandatoryParameters=null!==(t=e.mandatoryParameters)&&void 0!==t?t:[],this.worker=!!e.worker,this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests)}setQueryParams(e){Object.keys(e).forEach(t=>{this.queryParams[t]=e[t]})}removeQueryParams(e){e?e.forEach(e=>{delete this.queryParams[e]}):this.queryParams={}}send(s,r){const a=r||{...this.queryParams},o=!("ct"in a),i="string"!=typeof s&&!this.isArrayBuffer(s);"ct"in a||(this.compressionOpts&&o?a.ct=this.compressionOpts.compressionType:a.ct=e.UNCOMPRESSED);const n=i?JSON.stringify(s):s,h=Object.keys(a).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(a[e])}\`).join("&"),c=\`\${this.endpoint}?\${h}\`;!function(e,t){const s=e.length;for(let r=0;r<s;r++)if(t(e[r],r))return!0;return!1}(this.mandatoryParameters,e=>null==a[e])?this.compressionOpts&&o&&"string"==typeof n?this.compressionOpts.compressor(n,this.compressionOpts.compressionOutputType,e=>this.doSend(c,a,e)):this.doSend(c,a,n):t.warn(\`[\${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on \${c}\`)}onLoad(e){this.onLoadCallback=e}onError(e){this.onErrorCallback=e}onTimeout(e,t){this.onTimeoutCallback=e,this.timeout=t}abort(){this.abortCurrentXhrCall&&this.abortCurrentXhrCall()}setRequestHeader(e,t){this.headers[e]=t}getQueryParams(){return this.queryParams}isArrayBuffer(e){return e&&void 0!==e.byteLength}doSend(e,t,s){const r=new XMLHttpRequest,a=Object.keys(t).map(e=>\`\${encodeURIComponent(e)}=\${encodeURIComponent(t[e])}\`).join("&");r.open("POST",e),r.onload=()=>{if(this.recoveryStorage&&this.recoveryStorage.recover(this.handleRecoveredRequests),this.onLoadCallback){const e={params:t,responseText:r.responseText,status:r.status};this.onLoadCallback(e)}},r.onerror=()=>{this.recoveryStorage&&this.recoveryStorage.save({key:a,metadata:t,events:s}),this.onErrorCallback&&this.onErrorCallback({params:t})},this.timeout&&this.onTimeoutCallback&&(r.timeout=this.timeout,r.ontimeout=()=>{this.onTimeoutCallback()}),this.abortCurrentXhrCall=()=>r.abort(),Object.keys(this.headers).forEach(e=>{r.setRequestHeader(e,this.headers[e])}),r.send(s)}}class r{constructor(e){this.maxStoredBytes=e,this.storageBytesUsed=0}addString(e){this.storageBytesUsed+=2*e.length}addArrayBuffer(e){this.storageBytesUsed+=e.byteLength}isThresholdReached(){return this.storageBytesUsed>this.maxStoredBytes}reset(){this.storageBytesUsed=0}}class a{constructor(e){this.ramStorage={},this.byteSizeCounter=new r(e)}save({key:e,metadata:t,events:s}){this.byteSizeCounter.isThresholdReached()||(this.byteSizeCounter.addString(e),"string"==typeof s?this.byteSizeCounter.addString(s):this.byteSizeCounter.addArrayBuffer(s),this.byteSizeCounter.isThresholdReached()||(this.ramStorage[e]={metadata:t,events:s}))}recover(e){const t=[];this.getStorageKeys().forEach(e=>{const s=this.ramStorage[e];void 0!==s&&(delete s.metadata.datatype,t.push(s),this.removeItem(e))}),0!==t.length&&(e(t),this.byteSizeCounter.reset())}getStorageKeys(){return Object.keys(this.ramStorage)}removeItem(e){delete this.ramStorage[e]}}var o;!function(e){e[e.NOT_STARTED=0]="NOT_STARTED",e[e.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",e[e.OPEN_FAILED=2]="OPEN_FAILED",e[e.READY=3]="READY"}(o||(o={}));class i{constructor(e,t,s){this.storageName=e,this.onOpenError=s,this.cacheState=o.NOT_STARTED,this.toBeSavedBuffer=[],this.recoveryInProgress=0,this.origin=self.origin,this.context="object"==typeof window?"":"worker-",this.byteSizeCounter=new r(t),this.init()}async init(){await this.openCache(),this.cacheState===o.READY?this.flushToBeSavedBuffer():this.onOpenError(this.toBeSavedBuffer)}flushToBeSavedBuffer(){this.toBeSavedBuffer.forEach(e=>{this.save(e)}),this.toBeSavedBuffer=[]}async save(e){try{if(this.cacheState===o.OPEN_IN_PROGRESS)return void this.toBeSavedBuffer.push(e);if(this.cacheState!==o.READY)return;if(this.byteSizeCounter.isThresholdReached())return;const{key:t,metadata:s,events:r}=e;if(this.byteSizeCounter.addString(t),"string"==typeof r?this.byteSizeCounter.addString(r):this.byteSizeCounter.addArrayBuffer(r),this.byteSizeCounter.isThresholdReached())return;await this.cache.put(\`\${this.origin}/\${t}\`,new Response(r,{headers:s}))}catch{}}async recover(e){(this.cache||(await this.openCache(),this.cacheState===o.READY))&&this.doRecover(e)}async openCache(){try{this.cacheState=o.OPEN_IN_PROGRESS,this.cache=await self.caches.open(\`\${this.context}\${this.storageName}\`),this.cacheState=o.READY}catch{this.cacheState=o.OPEN_FAILED}}async doRecover(e){try{if(this.recoveryInProgress++,this.recoveryInProgress>1)return;const t=await this.cache.keys();if(0===t.length)return;const s=(await this.cache.matchAll()).map(e=>{const t={};e.headers.forEach((e,s)=>{t[s]=e}),delete t["content-type"];const s=t.datatype;return delete t.datatype,"json"===s||"base64"===s?e.text().then(e=>({metadata:t,events:e})):e.arrayBuffer().then(e=>({metadata:t,events:e}))}),r=await Promise.all(s);await Promise.all(t.map(e=>this.cache.delete(e))),e(r),this.byteSizeCounter.reset()}catch{}finally{this.recoveryInProgress--}}}class n{constructor(e){try{this.initializeStorageStrategy(e)}catch(e){this.setRamStorageStrategy()}}initializeStorageStrategy(e){self.caches?this.setCachesStrategy(e):this.setRamStorageStrategy()}save(e){this.storageStrategy.save(e)}recover(e){this.storageStrategy.recover(e)}setCachesStrategy(e){this.storageStrategy=new i(e,n.MAX_SIZE,e=>{this.setRamStorageStrategy(e)})}setRamStorageStrategy(e){this.storageStrategy=new a(n.MAX_SIZE),e&&e.forEach(e=>{this.storageStrategy.save(e)})}}n.MAX_SIZE=16777216,function(){const e="CS_WORKER_SIGNATURE",t=new Map,r=new n("csPersisted");function a(a){var o;if((o=a)&&o.WORKER_SIGNATURE===e)switch(a.type){case"CreatePostRequest":{const{endpoint:o,compressionOutputType:i,useRetry:n,mandatoryParameters:h}=a,c={endpoint:o,mandatoryParameters:h,worker:!0};i&&(c.compressionOpts={compressor,compressionOutputType:i,compressionType:algorithm}),n&&(c.recoveryStorage=r);const d=new s(c);t.set(o,d),d.onLoad(t=>{const s={type:"onLoad",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)}),d.onError(t=>{const s={type:"onError",endpoint:o,response:t,WORKER_SIGNATURE:e};self.postMessage(s)})}break;case"SetQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.setQueryParams(s)}break;case"RemoveQueryParams":{const{endpoint:e,queryParams:s}=a,r=t.get(e);r&&r.removeQueryParams(s)}break;case"Send":{const{endpoint:e,payload:s,queryParams:r}=a,o=t.get(e);o&&o.send(s,r)}break;case"Abort":{const{endpoint:e}=a,s=t.get(e);s&&s.abort()}break;case"SetHeader":{const{endpoint:e,headerName:s,headerValue:r}=a,o=t.get(e);o&&o.setRequestHeader(s,r)}break;case"SetTimeout":{const{endpoint:s,timeout:r}=a,o=t.get(s);o&&o.onTimeout(()=>{const t={type:"onTimeout",endpoint:s,WORKER_SIGNATURE:e};self.postMessage(t)},r)}break;default:throw new Error(JSON.stringify(a))}}self.addEventListener("message",function(e){e.data.getReader?async function(e,t){const s=e.getReader();for(;;){const{done:e,value:r}=await s.read();if(e)break;t(r)}}(e.data,a):a(e.data)})}()})();`;try{this.hs=this._y(e||i),this.nc=!0,s.isTransferableStreamSupported()&&(this.rd=new ReadableStream({start:r=>{this.rc=r},cancel:()=>{this.rc=null}}),this.hs.postMessage(this.rd,[this.rd]))}catch(r){r.name==="SecurityError"&&lt.counters.cspErrors.count("network-worker"),this.nc=!1}}postMessage(t){t.WORKER_SIGNATURE=this.nd,this.rc?this.rc.enqueue(t):this.hs.postMessage(t)}_y(t){let e=window.csURL||window.webkitURL,i=window.Blob,r=window.Worker,o=new i([t],{type:"application/javascript"}),c=e.createObjectURL(o);B.whiteListFilename(c);let l=new r(c);return l.onmessage=h=>{let{type:g,endpoint:d,WORKER_SIGNATURE:E}=h.data;if(E===this.nd){if(g==="onLoad"){let{response:y}=h.data,S=this.Zu.get(d);S&&S(y)}else if(g==="onError"){let{response:y}=h.data,S=this.td.get(d);S&&S(y)}else if(g==="onTimeout"){let y=this.sd.get(d);y&&y()}}},l}registerOnLoadCallback(t,e){this.Zu.set(t,e)}registerOnErrorCallback(t,e){this.td.set(t,e)}registerOnTimeoutCallback(t,e){this.sd.set(t,e)}isSupported(){return this.nc}static isTransferableStreamSupported(){try{let t=new ReadableStream;return structuredClone(t,{transfer:[t]}),!0}catch{return!1}}}return s})(),ep=(()=>{class s{constructor(t){var e;this.qt={},this.Wt=t.endpoint,this.Ee=t.networkWorker,this.wy=t.compressionOutputType,this.by=t.useRetry,this.Ee.postMessage({type:"CreatePostRequest",endpoint:this.Wt,compressionOutputType:this.wy,useRetry:this.by,mandatoryParameters:(e=t.mandatoryParameters)!==null&&e!==void 0?e:[]})}setQueryParams(t){this.Ee.postMessage({type:"SetQueryParams",endpoint:this.Wt,queryParams:t}),csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}getQueryParams(){return this.qt}removeQueryParams(t){this.Ee.postMessage({type:"RemoveQueryParams",endpoint:this.Wt,queryParams:t}),t&&csArray.prototype.forEach.call(t,e=>{delete this.qt[e]})}send(t,e){this.Ee.postMessage({type:"Send",endpoint:this.Wt,payload:t,queryParams:e})}abort(){this.Ee.postMessage({type:"Abort",endpoint:this.Wt})}onLoad(t){this.Ee.registerOnLoadCallback(this.Wt,t)}onError(t){this.Ee.registerOnErrorCallback(this.Wt,t)}setRequestHeader(t,e){this.Ee.postMessage({type:"SetHeader",endpoint:this.Wt,headerName:t,headerValue:e})}onTimeout(t,e){this.Ee.registerOnTimeoutCallback(this.Wt,t),this.Ee.postMessage({type:"SetTimeout",endpoint:this.Wt,timeout:e})}}return s})(),yn=(()=>{let s;return function(n){n.UNCOMPRESSED="0",n.GZIP="2"}(s||(s={})),s})(),Oc=(()=>{class s{constructor(t){this.onError=t}}return s})(),sp=(()=>{class s{constructor(t){var e;this.qt={},this.oc={},this.od=i=>{for(let r of i){let{metadata:o,events:c}=r;this.send(c,o)}},this.Wt=t.endpoint,this.jn=t.compressionOpts,this.Yt=t.recoveryStorage,this.mandatoryParameters=(e=t.mandatoryParameters)!==null&&e!==void 0?e:[],this.worker=!!t.worker,this.Yt&&this.Yt.recover(this.od)}setQueryParams(t){Object.keys(t).forEach(e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?t.forEach(e=>{delete this.qt[e]}):this.qt={}}send(t,e){let i=e||{...this.qt},r=!("ct"in i),o=typeof t!="string"&&!this.Ay(t);"ct"in i||(!this.jn||!r?i.ct=yn.UNCOMPRESSED:i.ct=this.jn.compressionType);let c=o?JSON.stringify(t):t,l=Object.keys(i).map(g=>`${encodeURIComponent(g)}=${encodeURIComponent(i[g])}`).join("&"),h=`${this.Wt}?${l}`;if(on(this.mandatoryParameters,g=>i[g]==null)){pt.warn(`[${this.worker?"WORKER":"MAIN"}] All mandatory parameters are not present on ${h}`);return}this.jn&&r&&typeof c=="string"?this.jn.compressor(c,this.jn.compressionOutputType,g=>this.ad(h,i,g)):this.ad(h,i,c)}onLoad(t){this.Ui=t}onError(t){this.Hn=t}onTimeout(t,e){this.oi=t,this.Bn=e}abort(){this.cd&&this.cd()}setRequestHeader(t,e){this.oc[t]=e}getQueryParams(){return this.qt}Ay(t){return t&&t.byteLength!==void 0}ad(t,e,i){let r=new XMLHttpRequest,o=Object.keys(e).map(c=>`${encodeURIComponent(c)}=${encodeURIComponent(e[c])}`).join("&");r.open("POST",t),r.onload=()=>{if(this.Yt&&this.Yt.recover(this.od),this.Ui){let c={params:e,responseText:r.responseText,status:r.status};this.Ui(c)}},r.onerror=()=>{this.Yt&&this.Yt.save({key:o,metadata:e,events:i}),this.Hn&&this.Hn({params:e})},this.Bn&&this.oi&&(r.timeout=this.Bn,r.ontimeout=()=>{this.oi()}),this.cd=()=>r.abort(),Object.keys(this.oc).forEach(c=>{r.setRequestHeader(c,this.oc[c])}),r.send(i)}}return s})(),Nc=(()=>{class s{constructor(t){this.ac=t,this.Ee=new tp(this.ac)}create(t,e,i,r,o=[]){if(this.Ee.isSupported()&&e)return new ep({networkWorker:this.Ee,endpoint:t,compressionOutputType:i,useRetry:!!r,mandatoryParameters:o});{let c=i?{compressor:this.ac.compress,compressionOutputType:i,compressionType:this.ac.algorithm}:void 0;return new sp({endpoint:t,compressionOpts:c,recoveryStorage:r})}}}return s})(),ip=(()=>{class s{constructor(t,e,i,r,o){this.C=t,this.w=e,this.Ge=i,this._t=r,this.h=o}get(){return{exclusion:this.Ge.getAppliedTrackingDraw(),visitor:this.C.getVisitor(),session:this.w.getSession(),cvars:this._t.getCustomVariablesSession()}}apply(t){t&&(t.exclusion?this.exclude():this.include(t))}exclude(){this.Ge.exclude(this.h),this.C.removeVisitor(),this.w.removeSession(),this._t.removeCustomVariablesSession()}include(t){this.Ge.removeExclusion(),this.C.setVisitor(t.visitor),t.session?this.w.setSession(t.session):this.w.removeSession(),t.cvars?this._t.setCustomVariableSession(t.cvars):this._t.removeCustomVariablesSession()}}return s})(),an=".",$r="__DOT__",np=/^(([a-z0-9\-])+(\.[0-9]+){6})(\.[0-1])?(\.\b(x|[0-9a-fA-F]{12})\b)?$/,Mc="x";function rp(s){let[n,t,e,i,r,o,c,l,h]=hp(s);return{id:n,creationTimestamp:Number(t),visitsCount:Number(e),hitTimestamp:Number(i),lastVisitTimestamp:Number(r),appliedTrackingDraw:Number(o),expires:Number(c),allowSubdomains:l===void 0?void 0:!!Number(l),identityPrint:h===void 0||h===Mc?null:h}}function op(s){var n;return csArray.prototype.join.call(csArray.prototype.map.call(csArray.prototype.map.call([s.id,s.creationTimestamp,s.visitsCount,s.hitTimestamp,s.lastVisitTimestamp,s.appliedTrackingDraw,s.expires,s.allowSubdomains?1:0,(n=s.identityPrint)!==null&&n!==void 0?n:Mc],csString),cp),an)}function ap(s){return np.test(s)}function cp(s){return csString.prototype.replace.call(s,/\./g,$r)}function lp(s){return csString.prototype.replace.call(s,new csRegExp($r,"g"),an)}function hp(s){return csString.prototype.indexOf.call(s,$r)!==-1?csArray.prototype.map.call(csString.prototype.split.call(s,an),lp):csString.prototype.split.call(s,an)}var U=(()=>{let s;return function(n){n.QUOTA_REACHED="X",n.RECORDING_RULES_TARGETING="8",n.ANALYTICS_ONLY_RULES_TARGETING="9",n.ANALYTICS_ONLY="0",n.RECORDING_GLOBAL_SAMPLING="5",n.RECORDING_TEMPORARILY="T",n.RECORDING_URL_SAMPLING="6",n.RECORDING_ETR_SAMPLING="7",n.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED="B",n.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN="W"}(s||(s={})),s})(),qt=(()=>{let s;return function(n){n.ETR_OFF="0",n.ETR_ON="1"}(s||(s={})),s})(),es=(()=>{let s;return function(n){n.ETR_LEGACY="0",n.ETR_SESSION="1",n.ETR_PAGE="2"}(s||(s={})),s})(),Kt=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),fr=(()=>{let s;return function(n){n.UNNECESSARY="U",n.NOT_EXPRESSED="N",n.WITHDRAWN="W",n.GRANTED="G"}(s||(s={})),s})();var up=(()=>{let s;return function(n){n.ETR_DISABLED="0",n.ETR_PENDING="1",n.ETR_SAVED_PAGE="2",n.ETR_SAVED_SESSION="3",n.ETR_NOT_SAVED_SESSION="9"}(s||(s={})),s})(),Dc=/^(\d+\.[01356789TBWX](\.[01UNWG])?(\.[39])?)(\.\d+)?$/,kc=".";function dp(s){return csArray.prototype.join.call([s.pageNumber,s.collectState,s.replayConsent,s.etrStatus],kc)}function pp(s){if(!Gr(s))return null;let n=gr(s);return n!==null?Lc(n):null}function Lc(s){var n,t;let[e,i,r,o]=csString.prototype.split.call(s,kc);return{collectState:i,replayConsent:(n=r)!==null&&n!==void 0?n:fr.UNNECESSARY,etrStatus:(t=o)!==null&&t!==void 0?t:up.ETR_NOT_SAVED_SESSION,pageNumber:parseInt(e,10)}}function Gr(s){return Dc.test(s)}function gr(s){if(!s)return null;let n=(()=>{var t;return(t=csString.prototype.match.call(s,Dc))===null||t===void 0?void 0:t[1]})();return n!=null?n:null}var ve="_cs_ex",sa=2592e6,fp=/^[0-9]+$/,gp=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.ai=t}onCookieToRemove(t){this.ci=t}get(){return this.h.cookielessTrackingEnabled?Number(this.Xt.getItem(ve)):Number(this.M.get(ve))}set(t){var e;this.h.cookielessTrackingEnabled?this.Xt.setItem(ve,t):(this.M.set(ve,t,sa),(e=this.ai)===null||e===void 0||e.call(this,ve,t,sa))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(ve):(this.M.delete(ve),(t=this.ci)===null||t===void 0||t.call(this,ve))}static isValidExclusionString(t){return fp.test(t)}}return s})(),$e="_cs_cvars",mp=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.ai=t}onCookieToRemove(t){this.ci=t}get(){return this.h.cookielessTrackingEnabled?this.Xt.getItem($e):this.M.get($e)}set(t){var e;this.h.cookielessTrackingEnabled?this.Xt.setItem($e,t):(this.M.set($e,t),(e=this.ai)===null||e===void 0||e.call(this,$e,t))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem($e):(this.M.delete($e),(t=this.ci)===null||t===void 0||t.call(this,$e))}static isValidCustomVarString(t){return typeof t=="string"}}return s})();var yp="spki",ia="RSA-OAEP",Ep="SHA-256",na="AES-CTR",Sp="SHA-1",ra=190,ci=(()=>{let s;return function(n){var t;let e=!1,i=null,r,o=typeof TextEncoder!="undefined"?new TextEncoder:null,c;n.crypto=(t=at.crypto)===null||t===void 0?void 0:t.subtle,n.MAX_DIGEST_INPUT_SIZE=100;function l(){return!e}n.isKeyImported=l;function h(){return i}n.getCryptoKey=h;function g(){var N,C;return((C=(N=at.self.crypto)===null||N===void 0?void 0:N.subtle)===null||C===void 0?void 0:C.encrypt)!=null&&at.self.CryptoKey!=null}n.isSupported=g;async function d(N){r=n.crypto.importKey(yp,bc(N),{name:ia,hash:Ep},!1,["encrypt"]).catch(()=>(e=!0,null)),i=await r,r=void 0,i||pt.warn(`Fail to import public key '${N}'`)}n.importKey=d;async function E(N){if(!g()||e)return null;await r;let C=Br(N);C.byteLength>ra&&(C=C.slice(0,ra));try{let H=await n.crypto.encrypt({name:ia},i,C);return Go(H)}catch{return null}}n.asymmetricEncrypt=E;async function y(N,C){if(!g()||e)return null;let H={counter:C.initializationVector,name:na,length:64},$=o.encode(N);try{let it=await n.crypto.encrypt(H,C.cryptoKey,$);return Go(it)}catch{return null}}n.symmetricEncrypt=y;async function S(N){let C=await R(N);if(!C)throw new Error("Export secret failed");let H=await E(C);if(!H)throw new Error("Encrypt secret failed");return H}n.encryptSecret=S;async function R(N){var C;if(!g())return null;try{return(C=(await n.crypto.exportKey("jwk",N)).k)!==null&&C!==void 0?C:null}catch{return null}}async function O(){if(!g()||e)return null;try{return{cryptoKey:await n.crypto.generateKey({name:na,length:128},!0,["encrypt","decrypt"]),initializationVector:at.crypto.getRandomValues(new Uint8Array(16))}}catch{return null}}n.generateSymmetricKey=O;function b(N){c=N}n.setDigestSalt=b;async function w(N){N=csString.prototype.toLocaleLowerCase.call(csString.prototype.trim.call(N)),c&&(N=`${N}:${c}`);let C=o.encode(N);try{let H=await n.crypto.digest(Sp,C);return pr(H)}catch{return null}}n.digest=w;function x(){return at.crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt"])}n.generateKeyPair=x}(s||(s={})),s})();function vp(){let s=new Error,n=s.stack?csArray.prototype.filter.call(csString.prototype.split.call(s.stack,`
`),e=>e!=="Error"&&csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(e),"promise ")===-1&&csString.prototype.indexOf.call(e,"[native code]")===-1&&csString.prototype.indexOf.call(e,"(<anonymous>)")===-1):[];if(n.length===0)return"";let t=wp(n);return t===""||(n=bp(n,t),n.length===0)?"":xc(n[0])}function _p(s){return csString.prototype.indexOf.call(s,"@")!==-1}function wp(s){return s.length>0?xc(s[0]):""}function bp(s,n){return csArray.prototype.filter.call(s,t=>csString.prototype.indexOf.call(t,n)===-1)}function xc(s){let n="",t;_p(s)?t=new csRegExp("@(.+):(\\d+):(\\d+)$"):t=new csRegExp("\\((.+):(\\d+):(\\d+)\\)");let e=t.exec(s);return e&&(n=e[1]),n}var Ap=s=>s;function Tp(s,n,t,e){let i=csSymbol.for("propertyProxy");Object.defineProperty(s,n,{get(){var r;if(this[i])return this[i];let o=(r=t.get)===null||r===void 0?void 0:r.apply(this);return typeof o!="object"?o:(typeof Proxy=="function"?this[i]=new Proxy(o,{get(c,l){let h=Reflect.get(c,l);return typeof h=="function"?h.bind(c):h},set:(c,l,h)=>{let g=c[l],d=Reflect.set(c,l,h);return e.forEach(E=>E(this,h,g,"subproperty")),d}}):this[i]=o,this[i])},set(){var r;let o=arguments,c=this[n],l=(r=t.set)===null||r===void 0?void 0:r.apply(this,o);delete this[i];try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){pt.error(h)}return l}})}function Rp(s,n,t){let e=Cp(s,n);if(!e)return null;let i=(r,o,c,l)=>t(r,o,c,l);return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Cp(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Tp(s,n,i,e),e):(pt.warn(`Cannot intercept non configurable property '${csString(n)}' of object '${s}'`),null):(pt.warn(`Cannot intercept property '${csString(n)}' because it does not exist directly on the target object '${s}'`),null)}function Ip(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=Object.getOwnPropertyDescriptor(s,n);if(!(e!=null&&e.writable)&&!(e!=null&&e.set))return pt.warn(`Cannot intercept read only function '${csString(n)}' of object '${s}'`),null;let i=new Set;s[t]=i;let r=s[n];if(typeof r=="function"){let o=function(){let c=arguments,l=[];try{l=csArray.prototype.map.call(rs(i),g=>g(c))}catch(g){pt.error(g)}let h=r.apply(this,c);try{for(let g=0;g<l.length;g++)l[g]({result:h,context:this,args:c})}catch(g){pt.error(g)}return h};Op(o,r),s[n]=o}return i}function Gt({target:s,methodName:n,hook:t,hookPrepareArgs:e=Ap,options:i}){let r=Ip(s,n);if(!r)return null;let o=c=>{let l=e(c),h=i!=null&&i.withCallerName?{callerName:vp()}:{};return g=>t({...g,...h,args:l})};return{activate:()=>{r.add(o)},deactivate:()=>{r.delete(o)}}}function Pp(s,n){let t=csSymbol.for(n);if(s[t])return s[t];let e=new Set,i=Object.getOwnPropertyDescriptor(s,n);return i?i.configurable?(s[t]=e,Object.defineProperty(s,n,{set(){var r;let o=arguments,c=this[n],l=(r=i.set)===null||r===void 0?void 0:r.apply(this,o);try{e.forEach(h=>h(this,o[0],c,"property"))}catch(h){pt.error(h)}return l}}),e):(pt.warn(`Cannot intercept read only property '${csString(n)}' of object '${s}'`),null):e}function cn(s,n,t){let e=Pp(s,n);if(!e)return null;let i=(r,o,c)=>t(r,o,c,"property");return{activate:()=>{e.add(i)},deactivate:()=>{e.delete(i)}}}function Op(s,n){s.prototype=n.prototype,Object.defineProperty(s,"toString",{value:()=>n.toString()})}var Gs=(()=>{var s;class n{static Iy(e){this.Ps.forEach(i=>{e(i,"initial")})}static Fn(e){if(this.P||(this.P=new csMutationObserver(i=>{for(let r of i)r.target.isConnected&&X(r.addedNodes,this.Py),X(r.removedNodes,this.Oy)})),csArray.prototype.push.call(this.ve,e),!this.B){this.B=!0,this.P.observe(document,this.zn);for(let i of ys.getAllShadowHosts(document)){let r=csElementshadowRoot.apply(i);this.Ps.add(r),this.P.observe(r,this.zn)}this.fc||(this.fc=Gt({target:Element.prototype,methodName:"attachShadow",hook:i=>i.result.isConnected&&this.dd(i.result)})),this.fc.activate()}this.Iy(e)}static $n(e){var i,r;this.ve=csArray.prototype.filter.call(this.ve,o=>o!==e),this.ve.length===0&&(this.ve=[],this.B=!1,(i=this.P)===null||i===void 0||i.disconnect(),(r=this.fc)===null||r===void 0||r.deactivate(),this.Ps.clear())}constructor(e){this.S=e,this.S=Pe("DocumentShadowRootObserver:callback",(i,r)=>e(i,r))}get shadowRoots(){return rs(s.Ps)}takeRecords(){var e,i;return(i=(e=s.P)===null||e===void 0?void 0:e.takeRecords())!==null&&i!==void 0?i:[]}observe(){ys.isSupported()&&s.Fn(this.S)}disconnect(){ys.isSupported()&&s.$n(this.S)}}return s=n,n.ve=[],n.Ps=new Set,n.B=!1,n.zn={childList:!0,subtree:!0},n.dd=t=>{s.Ps.has(t)||(s.P.observe(t,s.zn),s.Ps.add(t),X(s.ve,e=>e(t,"added")))},n.Py=t=>{Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(s.dd)},n.Oy=t=>{t.isConnected||Zt(t,NodeFilter.SHOW_DOCUMENT_FRAGMENT).visitAll(e=>{s.Ps.has(e)&&(s.Ps.delete(e),X(s.ve,i=>i(e,"removed")))})},tt([P()],n.prototype,"observe",null),tt([P()],n.prototype,"disconnect",null),n})(),Uc=!0;function ft(s,n=Uc){s.boundElement.addEventListener(s.type,s.listener,n)}function gt(s,n=Uc){s.boundElement.removeEventListener(s.type,s.listener,n)}function Bt(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var oa=!1;function ut(){return(s,n,t)=>{if(t){let e=t.value;t.value=function(i,r){(i==null?void 0:i.isTrusted)===!1&&oa||e.call(this,i,r)}}else{let e=s[n];if(typeof e!="function")return;s[n]=function(i,...r){(i==null?void 0:i.isTrusted)===!1&&oa||e.call(this,i,r)}}}}function En(s,n){typeof n=="number"&&(n={wait:n});let t=n.wait,e=n.mode||"leading",i,r=[],o=null,c=0,l,h=()=>{c=M.now(),o=null,l=s.apply(i,r),r=[],i=null},g=function(...d){if(i=this!==null&&this!==void 0?this:at,r=[...d],e==="trailing")return o||(o=at.csSetTimeout(h,t)),l;let E=M.now(),y=t-(E-c);return y<=0||y>t?(c=E,l=s.apply(i,r),o?(at.csClearTimeout(o),o=null):r=[]):o||(o=at.csSetTimeout(h,y)),l};return g.cancel=()=>{o&&(at.csClearTimeout(o),c=0,o=null,r=[])},g.flushPending=()=>{o&&(at.csClearTimeout(o),h())},g}var Sn=s=>(n,t,e)=>{e.value=En(e.value,s)};function Np(s){return s.nodeType===1}function Rt(s){let n=csEventtarget.apply(s);return n&&Np(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}function Mp(s){return s.composedPath&&Object.defineProperty(s,"__csOriginalTarget",{value:s.composedPath()[0],writable:!1,enumerable:!1}),s}function Dp(){return(s,n,t)=>{let e=t.value;return e&&(t.value=function(i){if(Rt(i)===csEventtarget.apply(i))return e.call(this,i)}),t}}function kp(s){if(!T(s))return null;let t=/iP(ad|hone|od).+Version\/(\d+)\..*Safari/i.exec(s);return t?Number(t[2]):null}var Lp=!!window.chrome,aa="data-cs-scroll-container";function xp(s){try{if(mt(csEventtarget.apply(s)))return!0}catch{}return!1}var Ds=(()=>{let s;return function(n){function t(i){return!!(mt(i)&&xp(i)&&Ie(csEventtarget.apply(i))&&csEventtarget.apply(i).getAttribute(aa)!==null)}n.isEventOnScrollContainer=t;function e(){return window.csquerySelector[document.nodeType].call(document,`[${aa}]`)}n.getScrollContainer=e}(s||(s={})),s})();function Up(){let s=csSymbol.for("propStore");return{getStore(n){return n[s]},get(n,t){let e=n[s];return e==null?void 0:e[t]},set(n,t,e){let i=n[s];i||(i={},n[s]=i),i[t]=e}}}var Xi=Up(),Y=(()=>{let s;return function(n){function t(l,h,g){var d;l instanceof Node?Xi.set(l,h,g):((d=l.props)!==null&&d!==void 0||(l.props={}),l.props[h]=g)}n.setProperty=t;function e(l,h){var g;return l instanceof Node?Xi.get(l,h):(g=l.props)===null||g===void 0?void 0:g[h]}n.getProperty=e;function i(l){return l instanceof Node?Xi.getStore(l):l.props}n.getProperties=i;function r(l,h){let g=null;return o(l,(d,E,y)=>h(d)&&(g=d)&&!!y()),g}n.findDescendant=r;function o(l,h){c(l,void 0,h)}n.traverse=o;function c(l,h,g){let d=!1;if(g(l,h,()=>d=!0),d)return;let y=l.shadowRoot;y&&c(y,l,g);let S=l.children;if(S!=null&&S.length){for(let R of S)if(R&&(c(R,l,g),d))break}}}(s||(s={})),s})(),Vc=1,li=csSymbol("nodeIdentifier");function Vp(s=!1){s&&(Vc=1),li=csSymbol("nodeIdentifier")}function jp(s){return Y.getProperty(s,li)}function nt(s){let n=Y.getProperty(s,li);return n!=null?n:(Y.setProperty(s,li,Vc++),Y.getProperty(s,li))}var zn;function Dt(s){if(zn||(zn=document.createElement("div")),!(!!s&&T(s)))return pt.warn(`isValidSelector: invalid selector provided '${s}'`),!1;try{return Wt.call(zn,s),!0}catch{return pt.warn(`isValidSelector: invalid selector provided '${s}'`),!1}}function Hs(s,n){if(Ho)return Ho.call(s,n);let t=s;do{if(Wt.call(t,n))return t;t=t==null?void 0:t.parentElement}while(t!==null&&t.nodeType===1);return null}var k=(()=>{let s;return function(n){let t;(function(b){b[b.NotMasked=0]="NotMasked",b[b.Parent=1]="Parent",b[b.Child=2]="Child"})(t=n.MaskedElementState||(n.MaskedElementState={})),n.maskedProp="masked",n.maskedAttributeProp="maskedAttribute";function e(b){return ss(b)&&"Attributes"in b&&"PIISelectors"in b?b.Attributes instanceof Array&&b.PIISelectors instanceof Array:!1}n.isSelectorUserInput=e;function i(b){if(!ss(b)||b===null)throw new Error("Command misuse: setPIISelectors");return"Attributes"in b||(b.Attributes=[]),"PIISelectors"in b||(b.PIISelectors=[]),b}n.sanitizeSelectorUserInput=i;function r(b){var w;return(w=Y.getProperty(b,n.maskedProp))!==null&&w!==void 0?w:{state:t.NotMasked}}n.getMaskedElementDetails=r;function o(b){var w;return(w=Y.getProperty(b,n.maskedAttributeProp))!==null&&w!==void 0?w:{attributes:[]}}n.getMaskedAttributeDetails=o;function c(b){let w=Y.getProperty(b,n.maskedProp);return(w==null?void 0:w.state)===t.Parent}n.isMaskedElement=c;function l(b){let w=Y.getProperty(b,n.maskedProp);return(w==null?void 0:w.state)===t.Child}n.isMaskedElementChild=l;function h(b,w){let x=Y.getProperty(b,n.maskedAttributeProp);return((x==null?void 0:x.attributes)==null?void 0:csArray.prototype.indexOf.call(x==null?void 0:x.attributes,w))>-1}n.isMaskedAttribute=h;function g(b,w){Y.setProperty(b,n.maskedProp,w)}n.setMaskedElementProperty=g;function d(b){Y.setProperty(b,n.maskedProp,void 0)}n.unsetMaskedElementProperty=d;function E(b,w){Y.setProperty(b,n.maskedAttributeProp,w)}n.setMaskedAttributeProperty=E;function y(b,w){let x=csArray.prototype.filter.call(b.PIISelectors,H=>Dt(H));w.elementSelector.length>0&&csArray.prototype.push.call(x,...csString.prototype.split.call(w.elementSelector,","));let N=O([...x]),C={elementSelector:csArray.prototype.join.call(N,","),attrSelector:w.attrSelector,attrSelectors:w.attrSelectors};return csArray.prototype.forEach.call(b.Attributes,H=>{H!=null&&H.attrName&&(H!=null&&H.selector)&&Dt(H.selector)&&!S(C.attrSelectors,H)&&csArray.prototype.push.call(C.attrSelectors,H)}),C.attrSelector=R(C.attrSelectors),C}n.getComputedSelectorSettings=y;function S(b,w){return csArray.prototype.some.call(b,x=>x.selector===w.selector&&x.attrName===w.attrName)}function R(b){let w="";return csArray.prototype.forEach.call(b,x=>{let N=csString.prototype.split.call(x.selector,",");csArray.prototype.forEach.call(N,C=>{Dt(C)&&(w&&(w+=","),w+=C)})}),w}function O(b){if(b.length<=1)return b;let w=[];for(let x of b){let N=csString.prototype.split.call(x,",");for(let C of N)csArray.prototype.indexOf.call(w,C)===-1&&csArray.prototype.push.call(w,C)}return w}}(s||(s={})),s})(),L=(()=>{let s;return function(n){n[n.MUTATION_INSERT=1]="MUTATION_INSERT",n[n.MUTATION_REMOVE=2]="MUTATION_REMOVE",n[n.MUTATION_ATTRIBUTE=3]="MUTATION_ATTRIBUTE",n[n.MUTATION_CHARACTER_DATA=4]="MUTATION_CHARACTER_DATA",n[n.INITIAL_DOM=5]="INITIAL_DOM",n[n.SCROLL=6]="SCROLL",n[n.CLICK=8]="CLICK",n[n.RESIZE=9]="RESIZE",n[n.INPUT_CHECKABLE=10]="INPUT_CHECKABLE",n[n.INPUT_SELECT=11]="INPUT_SELECT",n[n.INPUT_TEXT=12]="INPUT_TEXT",n[n.HASH_CHANGE=13]="HASH_CHANGE",n[n.UNANONYMIZED_CONSENT_GRANTED=14]="UNANONYMIZED_CONSENT_GRANTED",n[n.UNANONYMIZED_CONSENT_WITHDRAWN=15]="UNANONYMIZED_CONSENT_WITHDRAWN",n[n.MOUSE_OVER=16]="MOUSE_OVER",n[n.VISIBILITY_CHANGE=17]="VISIBILITY_CHANGE",n[n.STYLESHEET_RULE_INSERT=18]="STYLESHEET_RULE_INSERT",n[n.STATIC_RESOURCE_URL=19]="STATIC_RESOURCE_URL",n[n.PERFORMANCE_TIMINGS=20]="PERFORMANCE_TIMINGS",n[n.ATTACH_SHADOW=22]="ATTACH_SHADOW",n[n.STYLESHEET_CSS_TEXT_UPDATE=23]="STYLESHEET_CSS_TEXT_UPDATE",n[n.JAVASCRIPT_ERROR=26]="JAVASCRIPT_ERROR",n[n.PAGE_EVENT=27]="PAGE_EVENT",n[n.API_ERROR=28]="API_ERROR",n[n.TEXT_VISIBILITY=29]="TEXT_VISIBILITY",n[n.MUTATION_ENCRYPTED_CHARACTER_DATA=30]="MUTATION_ENCRYPTED_CHARACTER_DATA",n[n.INPUT_ENCRYPTED_TEXT=31]="INPUT_ENCRYPTED_TEXT",n[n.KEY_DOWN=32]="KEY_DOWN",n[n.KEY_UP=33]="KEY_UP",n[n.CLIPBOARD_COMMAND=34]="CLIPBOARD_COMMAND",n[n.STYLESHEET_RULE_DELETE=37]="STYLESHEET_RULE_DELETE",n[n.USER_IDENTIFIER=38]="USER_IDENTIFIER",n[n.TOUCH_START=41]="TOUCH_START",n[n.TOUCH_MOVE=42]="TOUCH_MOVE",n[n.TOUCH_END=43]="TOUCH_END",n[n.GESTURE_RECOGNITION=44]="GESTURE_RECOGNITION",n[n.POINTER_DOWN=47]="POINTER_DOWN",n[n.POINTER_MOVE=48]="POINTER_MOVE",n[n.POINTER_UP=49]="POINTER_UP",n[n.CUSTOM_ERROR=50]="CUSTOM_ERROR",n[n.CUSTOM_ELEMENT_REGISTRATION=54]="CUSTOM_ELEMENT_REGISTRATION",n[n.REGISTER_ADOPTED_STYLE_SHEET=60]="REGISTER_ADOPTED_STYLE_SHEET",n[n.SET_ADOPTED_STYLE_SHEETS=61]="SET_ADOPTED_STYLE_SHEETS",n[n.ADOPTED_STYLESHEET_RULE_INSERT=62]="ADOPTED_STYLESHEET_RULE_INSERT",n[n.ADOPTED_STYLESHEET_RULE_DELETE=63]="ADOPTED_STYLESHEET_RULE_DELETE",n[n.SCREEN_RESIZE=65]="SCREEN_RESIZE",n[n.RESOURCE_HASHES=66]="RESOURCE_HASHES",n[n.PERFORMANCE_NAVIGATION_TIMING=67]="PERFORMANCE_NAVIGATION_TIMING",n[n.PERFORMANCE_RESOURCE_TIMING=68]="PERFORMANCE_RESOURCE_TIMING",n[n.RECORDING_INFO_EVENT=72]="RECORDING_INFO_EVENT",n[n.TEXT_REF=73]="TEXT_REF",n[n.TOUCH_CANCEL=74]="TOUCH_CANCEL",n[n.MUTATION_MOVE=75]="MUTATION_MOVE",n[n.STYLESHEET_RULE_UPDATE=76]="STYLESHEET_RULE_UPDATE",n[n.ADOPTED_STYLESHEET_RULE_UPDATE=77]="ADOPTED_STYLESHEET_RULE_UPDATE",n[n.VIDEO_PLAY=78]="VIDEO_PLAY",n[n.VIDEO_PAUSE=79]="VIDEO_PAUSE",n[n.VIDEO_SEEK=80]="VIDEO_SEEK",n[n.ADOPTED_STYLESHEET_DISABLED=98]="ADOPTED_STYLESHEET_DISABLED",n[n.STYLESHEET_DISABLED=99]="STYLESHEET_DISABLED",n[n.DEBUG=999]="DEBUG"}(s||(s={})),s})();var ii=(()=>{let s;return function(n){n[n.SWIPE=0]="SWIPE",n[n.PINCH_IN=1]="PINCH_IN",n[n.PINCH_OUT=2]="PINCH_OUT",n[n.LONG_PRESS=3]="LONG_PRESS",n[n.TAP=4]="TAP",n[n.DOUBLE_TAP=5]="DOUBLE_TAP"}(s||(s={})),s})(),ks=(()=>{let s;return function(n){n[n.COPY=0]="COPY",n[n.CUT=1]="CUT",n[n.PASTE=2]="PASTE"}(s||(s={})),s})(),q=(()=>{let s;return function(n){n[n.SPACE=0]="SPACE",n[n.ENTER=1]="ENTER",n[n.BACKSPACE=2]="BACKSPACE",n[n.DELETE=3]="DELETE",n[n.ARROWUP=4]="ARROWUP",n[n.ARROWDOWN=5]="ARROWDOWN",n[n.ARROWLEFT=6]="ARROWLEFT",n[n.ARROWRIGHT=7]="ARROWRIGHT",n[n.CAPSLOCK=8]="CAPSLOCK",n[n.SHIFT=9]="SHIFT",n[n.TAB=10]="TAB",n[n.ALPHANUMERICAL=11]="ALPHANUMERICAL",n[n.ESCAPE=12]="ESCAPE",n[n.END=13]="END",n[n.ALT=14]="ALT",n[n.CTRL=15]="CTRL",n[n.META=16]="META"}(s||(s={})),s})(),Hp=33,Bp=(()=>{class s{constructor(){this.eventType="user",this.gc=[],this.Ny=[{type:"pointerup",listener:e=>this.pointerUpListener(e),boundElement:document},{type:"pointermove",listener:e=>this.pointerMoveListener(e),boundElement:document},{type:"pointerdown",listener:e=>this.pointerDownListener(e),boundElement:document}],this.My=[{type:"touchstart",listener:e=>this.touchStartListener(e),boundElement:document},{type:"touchmove",listener:e=>this.touchMoveListener(e),boundElement:document},{type:"touchend",listener:e=>this.touchEndCancelListener(e),boundElement:document},{type:"touchcancel",listener:e=>this.touchEndCancelListener(e),boundElement:document}],this.fo=[{type:"click",listener:e=>this.clickListener(e),boundElement:document},{type:"keyup",listener:e=>this.keyUpListener(e),boundElement:document},{type:"keydown",listener:e=>this.keyDownListener(e),boundElement:document},{type:"copy",listener:e=>this.copyListener(e),boundElement:document},{type:"cut",listener:e=>this.cutListener(e),boundElement:document},{type:"paste",listener:e=>this.pasteListener(e),boundElement:document},{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e)),boundElement:document},{type:"mouseover",listener:e=>this.mouseOverListener(e),boundElement:document}],this.mc=[{type:"scroll",listener:e=>this.scrollListener(csEventtarget.apply(e))}];let t=kp(window.navigator.userAgent);(t===null||t&&t>=16)&&csArray.prototype.push.call(this.mc,{type:"mouseover",listener:e=>this.mouseOverListener(e)}),this.ne=new Gs((e,i)=>{switch(i){case"initial":case"added":this.li(e);break;case"removed":this.hi(e);break}})}init(){this.Dy(),this.ky(),this.yc()}onEvent(t){csArray.prototype.push.call(this.gc,t)}Kt(t,e=!1){csArray.prototype.forEach.call(this.gc,i=>i(t,e))}start(){this.Ec(),this.li(document),this.ne.observe()}stop(){this.hi(document),this.ne.disconnect(),this.gc=[]}ky(){this.Ly()&&csArray.prototype.push.call(this.fo,...this.Ny)}Dy(){this.xy()&&csArray.prototype.push.call(this.fo,...this.My)}li(t){en(t)?csArray.prototype.forEach.call(this.fo,e=>ft(e)):csArray.prototype.forEach.call(this.mc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};ft(i)})}hi(t){en(t)?csArray.prototype.forEach.call(this.fo,e=>gt(e)):csArray.prototype.forEach.call(this.mc,e=>{let i={type:e.type,listener:e.listener,boundElement:t};gt(i)})}Ly(){return"PointerEvent"in window&&typeof window.PointerEvent=="function"}xy(){return"TouchEvent"in window&&typeof window.TouchEvent=="function"}Ec(){this.Uy()}Uy(){let t=Ds.getScrollContainer()||document,e=nt(t),i=this.pd(t);if(i.top!==0||i.left!==0){let r={type:L.SCROLL,args:[e,i.left,i.top],date:M.now()};this.Kt(r,!0)}}pd(t){return t===document?{top:window.pageYOffset,left:window.pageXOffset}:{top:t.scrollTop,left:t.scrollLeft}}scrollListener(t){if(k.isMaskedElement(t)||k.isMaskedElementChild(t))return;let e=nt(t),i=this.pd(t),r={type:L.SCROLL,args:[e,i.left,i.top],date:M.now()};this.Kt(r)}mouseOverListener(t){if(k.isMaskedElementChild(t.target))return;let e=nt(t.target),i={type:L.MOUSE_OVER,args:[e],date:M.now()};this.Kt(i)}clickListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r={type:L.CLICK,args:[i],date:M.now()};this.Kt(r)}keyUpListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r=this.D[t.key];if(r===void 0)return;let o={type:L.KEY_UP,args:[i,r],date:M.now()};this.Kt(o)}keyDownListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r=this.D[t.key];if(r===void 0)return;let o={type:L.KEY_DOWN,args:[i,r],date:M.now()};this.Kt(o)}copyListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r={type:L.CLIPBOARD_COMMAND,args:[i,ks.COPY],date:M.now()};this.Kt(r)}cutListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r={type:L.CLIPBOARD_COMMAND,args:[i,ks.CUT],date:M.now()};this.Kt(r)}pasteListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r={type:L.CLIPBOARD_COMMAND,args:[i,ks.PASTE],date:M.now()};this.Kt(r)}pointerUpListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r={type:L.POINTER_UP,args:[t.pointerId,t.pointerType,Bt(t.clientX,1),Bt(t.clientY,1),i,t.button],date:M.now()};this.Kt(r)}pointerMoveListener(t){let e={type:L.POINTER_MOVE,args:[t.pointerId,t.pointerType,Bt(t.clientX,1),Bt(t.clientY,1)],date:M.now()};this.Kt(e)}pointerDownListener(t){let e=Rt(t);if(k.isMaskedElementChild(e))return;let i=nt(e),r={type:L.POINTER_DOWN,args:[t.pointerId,t.pointerType,Bt(t.clientX,1),Bt(t.clientY,1),i,t.button,{pageX:Bt(t.pageX,1),pageY:Bt(t.pageY,1)}],date:M.now()};this.Kt(r)}touchStartListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:L.TOUCH_START,args:[r.identifier,Bt(r.clientX,1),Bt(r.clientY,1)],date:M.now()};this.Kt(o)}}touchMoveListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:L.TOUCH_MOVE,args:[r.identifier,Bt(r.clientX,1),Bt(r.clientY,1)],date:M.now()};this.Kt(o)}}touchEndCancelListener(t){if(!t.changedTouches)return;let{changedTouches:e}=t;for(let i=0;i<e.length;i+=1){let r=e[i],o={type:t.type==="touchend"?L.TOUCH_END:L.TOUCH_CANCEL,args:[r.identifier,Bt(r.clientX,1),Bt(r.clientY,1)],date:M.now()};this.Kt(o)}}yc(){this.D={},this.D[" "]=q.SPACE,this.D.Spacebar=q.SPACE,this.D.Backspace=q.BACKSPACE,this.D.Enter=q.ENTER,this.D.Delete=q.DELETE,this.D.ArrowUp=q.ARROWUP,this.D.ArrowDown=q.ARROWDOWN,this.D.ArrowLeft=q.ARROWLEFT,this.D.ArrowRight=q.ARROWRIGHT,this.D.Up=q.ARROWUP,this.D.Down=q.ARROWDOWN,this.D.Left=q.ARROWLEFT,this.D.Right=q.ARROWRIGHT,this.D.CapsLock=q.CAPSLOCK,this.D.Shift=q.SHIFT,this.D.Tab=q.TAB,this.D.Escape=q.ESCAPE,this.D.Esc=q.ESCAPE,this.D.End=q.END,this.D.Alt=q.ALT,this.D.Control=q.CTRL,this.D.Meta=q.META}}return j([It("RecordingPageEvents.start")],s.prototype,"start",null),j([P("scroll")],s.prototype,"scrollListener",null),j([P("mouseOver"),ut(),Dp()],s.prototype,"mouseOverListener",null),j([P("click"),ut()],s.prototype,"clickListener",null),j([P("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([P("Event handler type: keydown")],s.prototype,"keyDownListener",null),j([P("Event handler type: copy")],s.prototype,"copyListener",null),j([P("Event handler type: cut")],s.prototype,"cutListener",null),j([P("Event handler type: paste")],s.prototype,"pasteListener",null),j([P("Event handler type: pointerup"),ut()],s.prototype,"pointerUpListener",null),j([P("Event handler type: pointermove"),ut(),Sn({wait:Hp})],s.prototype,"pointerMoveListener",null),j([P("Event handler type: pointerdown"),ut()],s.prototype,"pointerDownListener",null),j([P("Event handler type: touchstart"),ut()],s.prototype,"touchStartListener",null),j([P("Event handler type: touchmove"),ut()],s.prototype,"touchMoveListener",null),j([P("Event handler type: touchend-cancel"),ut()],s.prototype,"touchEndCancelListener",null),s})(),Fp=2,qr=(()=>{class s{constructor(t){this.Vy=t,this.go=0}addString(t){this.go+=t.length*Fp}addArrayBuffer(t){this.go+=t.byteLength}isThresholdReached(){return this.go>this.Vy}reset(){this.go=0}}return s})(),zp=2*1e3*1024,$p=200,Gp=(()=>{class s{constructor(t=[],e=zp){this.Nt=t,this.Sc=new qr(e)}addEvent(t){this.Sc.addString(Vs(t)),csArray.prototype.push.call(this.Nt,t)}addEventByTimestamp(t){let e=0;for(;e<this.Nt.length&&!(this.Nt[e].date>=t.date);e+=1);csArray.prototype.splice.call(this.Nt,e,0,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Sc.reset(),this.Nt=[]}isFull(){return this.eventsCount()>=$p}isThresholdReached(){return this.Sc.isThresholdReached()}getEvents(){return this.Nt}extractEvents(...t){let e=[],i=[];return csArray.prototype.forEach.call(this.Nt,r=>{csArray.prototype.indexOf.call(t,r.type)!==-1?csArray.prototype.push.call(e,r):csArray.prototype.push.call(i,r)}),this.Nt=i,e}stringifyEvents(){return Vs(this.Nt)}dC(t){t.type===L.INITIAL_DOM&&(window.CSDomSerialized=window.CSDomSerialized?window.CSDomSerialized+1:1)}}return j([It("RecordingBatch.addEvent")],s.prototype,"addEvent",null),s})(),qp=(()=>{class s{constructor(){this.mo=1}getCurrentIndex(){return this.mo}increment(){this.mo+=1}reset(){this.mo=1}getRequestParameters(){return{ri:`${this.mo}`}}}return s})(),jc=(()=>{class s{emit(t,e,i,r=document){let c=`${i!==void 0?`${i}`:`${s.jy}`}${t}`,l=s.createEvent(c,{detail:e});l!==null&&r.dispatchEvent(l)}static createEvent(t,e={}){if(typeof CustomEvent=="function")return new CustomEvent(t,e);let i=this.Hy();if(i===null)return null;let{bubbles:r=!1,cancelable:o=!1,detail:c}=e;return i.initCustomEvent(t,r,o,c),i}static Hy(){try{return document.createEvent("CustomEvent")}catch{return null}}}return s.jy="cs.tracking.",s})(),xt=(()=>{class s{constructor(){this._isStarted=!1}get isStarted(){return this._isStarted}start(...t){this._isStarted||(this._isStarted=!0,this.onStart(...t))}stop(){this._isStarted&&(this._isStarted=!1,this.onStop())}restart(){this.stop(),this.start()}}return s})(),Ki="null",Qe=null,Hc=[],Wp=()=>{var s;return _i||!!(!((s=document.body)===null||s===void 0)&&s.getAttribute("data-cs-tag-extension"))};!_i&&Wp()&&(window._uxa?_uxa.push(["debugEvents",!0]):window._uxa=[["debugEvents",!0]],Qe=new BroadcastChannel("cs-tag"),document.addEventListener("cs.tracking.recordingEvent",s=>{mr({type:"UXA_EVENT",event:s.detail})}),Qe.addEventListener("message",s=>{if(s.data.type==="CONNECT"){if(s.data.sessionId===Ki)return;Ki=s.data.sessionId,csArray.prototype.forEach.call(Hc,n=>n()),Qe==null||Qe.postMessage({type:"CONNECTED",sessionId:Ki})}}));function Yp(s){_i||(Ki!==null&&csSetTimeout(s),csSetTimeout(()=>csArray.prototype.push.call(Hc,s)))}function mr(s){Qe==null||Qe.postMessage(s)}var vn=(()=>{class s{constructor(t,e=""){this.name=t,this.format=e}}return s})(),ps=(()=>{class s extends vn{constructor(t){super(t,"Value: {count}"),this.count=0}increase(t=1){this.count+=t}decrease(){this.count>0&&this.count--}clear(){this.count=0}getData(){return{count:this.count}}}return s})();var ca=(()=>{class s extends vn{constructor(t){super(t,"Living intances: {instances}<br/>Added: {added}<br/>Removed: {removed}"),this.added=0,this.removed=0}get value(){return this.added-this.removed}increase(){this.added++}decrease(){this.removed++}getData(){return{added:this.added,removed:this.removed,instances:this.added-this.removed}}}return s})(),$n=(()=>{class s extends vn{constructor(t){super(t,"Count: {count}<br/>Average: {average}ms<br/>Total: {total}ms"),this.total=0,this.count=0}get average(){return this.count?this.total/this.count:0}measure(t){let e=M.elapsed();t(),this.count++,this.total+=M.elapsed()-e}asyncMeasure(){let t=M.elapsed();return()=>{this.count++,this.total+=M.elapsed()-t}}getData(){return{total:this.total,count:this.count,average:this.average}}}return s})(),Mt={general:{category:"General",nbEvents:new ps("Nb of Events"),pendingTasks:new ps("Pending Tasks"),pendingEvents:new ps("Pending Tasks"),nbOfMutationObservers:new ca("Nb of Mutation Observers")},mutations:{category:"Mutations",initialDOM:new $n("Initial DOM"),pendingMutations:new ps("Nb of Mutations scheduled"),serializedMutations:new $n("Serialized Mutations"),count:new ps("Mutation Count"),elementMutationObserved:new ca("Nb of Elements Observed by MutationObserver"),unobserveGarbageCollection:new $n("Unobserve GC")},visibilityObserver:{category:"Visibility Observer",hiddenElements:new ps("Nb of Hidden Elements "),nbElements:new ps("Nb of  Elements")}},la=null;Yp(()=>{let s=i=>Object.keys(i),n=csArray.prototype.map.call(s(Mt),i=>Mt[i]),t=csArray.prototype.map.call(n,i=>csArray.prototype.filter.call(csArray.prototype.map.call(s(i),r=>i[r]),r=>r instanceof vn));mr({type:"UXA_PERFORMANCE_COUNTER_SCHEMA",event:csArray.prototype.map.call(n,(i,r)=>({category:i.category,performanceCounters:csArray.prototype.map.call(t[r],o=>({name:o.name,format:o.format}))}))}),!la&&(la=csSetInterval(()=>{let i=Ur(Te(t,r=>Te(r,o=>o.getData())),r=>r);mr({type:"UXA_PERFORMANCE_COUNTER",event:i})},1e3))});function Ne(s,n,t,e){var i=arguments.length,r=i<3?n:e===null?e=Object.getOwnPropertyDescriptor(n,t):e,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(s,n,t,e);else for(var c=s.length-1;c>=0;c--)(o=s[c])&&(r=(i<3?o(r):i>3?o(n,t,r):o(n,t))||r);return i>3&&r&&Object.defineProperty(n,t,r),r}function Jt(s){return Vt(s,"data:")}function Xp(s){return Vt(s,"#")}function Kp(s){return!!s&&($s(s,".css")||Vt(s,"https://fonts.googleapis.com/css"))}var ha=/\bhttps?:\/\/[^\s<>"')\]]*[^\s<>"'),.;:\])]/gi;function Jp(s){ha.lastIndex=0;let n,t=0,e=[];for(;(n=ha.exec(s))!==null;){let i=n.index,r=n.index+n[0].length;if(i>t){let c=csString.prototype.slice.call(s,t,i);csArray.prototype.push.call(e,{content:c,isUrl:!1})}let o=csString.prototype.slice.call(s,i,r);csArray.prototype.push.call(e,{content:o,isUrl:!0}),t=r}if(t<s.length){let i=csString.prototype.slice.call(s,t);csArray.prototype.push.call(e,{content:i,isUrl:!1})}return e}function Wr(s){let n=csString.prototype.trim.call(s);if(s==="")return[];let[t,e]=Qp(n);return e?($s(t,",")||(e=Zp(e)),[ua(t),...Wr(e)]):[ua(t)]}function Qp(s){return csString.prototype.split.call(s,/\s(.+)/)}function ua(s){return csString.prototype.split.call(s,/,$/)[0]}function Zp(s){return csString.prototype.split.call(s,/,(.+)/)[1]||""}var tf=/(@import\s*("([^"]+)"|'([^']+)'))|(url\s*\(\s*((("([^"\]]+)"|'([^'\]]+)')\s*)|([^)\]]+))\))/g;function ef(s,n){return csString.prototype.replace.call(s,tf,(...e)=>{let i=e[3]||e[4],r=e[9]||e[10]||e[11],o=nf((i||r).trim()),c=i?"@import ":"",l=n(o)||o;return`${c}url(${sf(l)})`})}function sf(s){return csString.prototype.indexOf.call(s,'"')===-1?`"${s}"`:csString.prototype.indexOf.call(s,"'")===-1?`'${s}'`:s}function hi(s){let n=new Set;return ef(s,t=>{var e,i;return n.add((i=(e=csString.prototype.match.call(t,/^["|'](.*)?["|']$/))===null||e===void 0?void 0:e[1])!==null&&i!==void 0?i:t),t}),rs(n)}function nf(s){let n=/(\\)*\\(?:([a-fA-F0-9]{1,6})|(.))[\n\t\x20]?/g;return csString.prototype.replace.call(s,n,(t,e,i,r)=>{if(e==="\\")return csString.prototype.slice.call(t,1);if(r)return r;let o=parseInt(i,16);return 55296<=o&&o<=57343||o===0||o>1114111?"\uFFFD":csString.fromCodePoint(o)})}var da=new Map,Gn=!_i&&document.implementation.createHTMLDocument("");function Bc(s){var n,t;return(t=(n=s.sheet)===null||n===void 0?void 0:n.href)!==null&&t!==void 0?t:s.getAttribute("href")}function rf(s){if(!pn(s))return null;let n=Fc(s);if(n===null||n.length===0)return null;let t="";if(bu(s.textContent))X(n,e=>t+=e.cssText);else{let e=of(s);if(e===n.length||e>n.length)return null;let i=new csArray(n.length-e);for(let r=e,o=0;r<n.length;r+=1,o+=1)i[o]=n[r];X(i,r=>t+=r.cssText)}return t}function of(s){if(!Gn)return 0;let n=da.get(s.textContent);if(n)return n;let t=s.cloneNode(!0);t.textContent=s.textContent,Gn.head.appendChild(t);let e=Fc(t);return n=e?e.length:0,da.set(s.textContent,n),Gn.head.removeChild(t),n}function Fc(s){try{if(s.disabled)return null;let n=s.sheet;return n?n.cssRules||n.rules:null}catch(n){if(n.name!=="SecurityError"&&n.name!=="InvalidAccessError")throw n;return null}}var ri=s=>s instanceof HTMLFormElement?"form":s.localName;var _s=(()=>{class s{constructor(t){this.csId=nt(t),this.props=Xi.getStore(t)}}return s})(),zc=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=3,this.data=t.data}}return s})(),Ls=(()=>{class s extends _s{constructor(t){var e,i,r;super(t),this.attributes=[],this.nodeType=1,this.localName=ri(t),this.namespaceURI=(e=t.namespaceURI)!==null&&e!==void 0?e:void 0,this.children=[];let o=rf(t);if(o){this.children=new csArray(csNodechildNodes.apply(t).length);let c=document.createTextNode(o),l=new zc(c);csArray.prototype.push.call(this.children,l)}Fs(t)&&Y.setProperty(this,"SVG",!0),(pn(t)||Nr(t))&&(this.disabledSheet=(r=(i=t.sheet)===null||i===void 0?void 0:i.disabled)!==null&&r!==void 0?r:!1)}static isElement(t){return t.nodeType===1}static getAttribute(t,e){return pe(t.attributes,i=>i.name===e)}static getAttributeValue(t,e){var i;return(i=this.getAttribute(t,e))===null||i===void 0?void 0:i.value}}return s})(),Yr=(()=>{class s{constructor(t){this.type="asyncEvent",this.vc=!1,t&&t(e=>this.resolve(e))}resolve(t){if(this.vc)throw new Error("AsyncEvent already resolve.");t.timestamp==null&&(t={...t,timestamp:this.timestamp}),this.Os=t,this.vc=!0,this.S&&this.S(this.Os)}complete(t){this.vc&&t(this.Os),this.S=t}wait(){return new Promise(t=>this.complete(t))}}return s})();function af(s,n){let t=!1,e=function(){if(!t)return s.apply(n,arguments)};return e.cancel=()=>t=!0,e}var yr=csQueueMicrotask||csSetTimeout,Vi=new zs,ni=new zs,pa=1;function zt(s,n="high"){let t=pa;Vi.isEmpty&&ni.isEmpty&&$c(()=>{if(pa!==t)return;let r=vs(()=>{for(;!ni.isEmpty;)ni.pop()();for(;!Vi.isEmpty;)Vi.pop()();ni.isEmpty||r()},"groupMicrotask.run");r()});let e=s.name||s.toString(),i=Pe(`groupMicrotask:${n}:${e}`,s);n==="high"?ni.push(i):Vi.push(i)}function $c(s,n=10){yr(n===0?s:()=>$c(s,n-1))}async function Gc(s=1){for(let n=0;n<s;n++)await new Promise(t=>zt(t))}var _n=(()=>{class s{constructor(){this.set=new Set}add(t){this.set.add(t),this.set.size===1&&csSetTimeout(()=>{this.set.clear()})}has(t){return this.set.has(t)}del(t){this.set.delete(t)}clear(){this.set.clear()}values(){return rs(this.set)}get count(){return this.set.size}}return s})(),cf=(()=>{class s extends _n{constructor(t="high"){super(),this.By=t}add(t){this.set.add(t),this.set.size===1&&zt(()=>{this.set.clear()},this.By)}}return s})();function wn(s,n=!1){let t=new _n;return{push(e){t.count===0&&(n?zt:csSetTimeout)(()=>{s(t.values()),t.clear()}),t.add(e)}}}var be=csSymbol(),Xr=(()=>{class s{constructor(t){var e,i,r,o,c,l,h,g,d,E,y,S,R;this.S=t,this._c=null,this.wc=null,this.bc=null,this.Ac=null,this.Tc=null,this.Fy=wn(O=>this.processUpdateRulesInATick(O)),this.Rc=null,this.Cc=null,this.Ic=null,this.S=O=>zt(()=>t(O)),typeof((i=(e=window.CSSStyleSheet)===null||e===void 0?void 0:e.prototype)===null||i===void 0?void 0:i.insertRule)=="function"&&(this._c=Gt({target:window.CSSStyleSheet.prototype,methodName:"insertRule",hook:({context:O,args:b})=>{this.processInsertRule(O,b)}})),typeof((o=(r=window.CSSStyleSheet)===null||r===void 0?void 0:r.prototype)===null||o===void 0?void 0:o.deleteRule)=="function"&&(this.wc=Gt({target:window.CSSStyleSheet.prototype,methodName:"deleteRule",hook:({context:O,args:b})=>{this.processDeleteRule(O,b)}})),typeof((l=(c=window.CSSGroupingRule)===null||c===void 0?void 0:c.prototype)===null||l===void 0?void 0:l.insertRule)=="function"&&(this.bc=Gt({target:window.CSSGroupingRule.prototype,methodName:"insertRule",hook:({context:O})=>this.processUpdateRule(O)})),typeof((g=(h=window.CSSGroupingRule)===null||h===void 0?void 0:h.prototype)===null||g===void 0?void 0:g.deleteRule)=="function"&&(this.Ac=Gt({target:window.CSSGroupingRule.prototype,methodName:"deleteRule",hook:({context:O})=>this.processUpdateRule(O)})),!((d=window.StyleSheet)===null||d===void 0)&&d.prototype&&"disabled"in window.StyleSheet.prototype&&(this.Tc=cn(window.StyleSheet.prototype,"disabled",(O,b,w)=>{b!==w&&this.zy(O,b)})),typeof((y=(E=window.CSSStyleDeclaration)===null||E===void 0?void 0:E.prototype)===null||y===void 0?void 0:y.setProperty)=="function"&&(this.Rc=Gt({target:window.CSSStyleDeclaration.prototype,methodName:"setProperty",hook:({context:O})=>{let b=O.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),typeof((R=(S=window.CSSStyleDeclaration)===null||S===void 0?void 0:S.prototype)===null||R===void 0?void 0:R.removeProperty)=="function"&&(this.Cc=Gt({target:window.CSSStyleDeclaration.prototype,methodName:"removeProperty",hook:({context:O})=>{let b=O.parentRule;b instanceof CSSStyleRule&&this.processUpdateRule(b)}})),Object.getOwnPropertyDescriptor(window.CSSStyleRule.prototype,"style")&&(this.Ic=Rp(window.CSSStyleRule.prototype,"style",O=>{this.processUpdateRule(O)}))}observe(){var t,e,i,r,o,c,l,h;(t=this._c)===null||t===void 0||t.activate(),(e=this.wc)===null||e===void 0||e.activate(),(i=this.bc)===null||i===void 0||i.activate(),(r=this.Ac)===null||r===void 0||r.activate(),(o=this.Tc)===null||o===void 0||o.activate(),(c=this.Rc)===null||c===void 0||c.activate(),(l=this.Cc)===null||l===void 0||l.activate(),(h=this.Ic)===null||h===void 0||h.activate()}disconnect(){var t,e,i,r,o,c,l,h;(t=this._c)===null||t===void 0||t.deactivate(),(e=this.wc)===null||e===void 0||e.deactivate(),(i=this.bc)===null||i===void 0||i.deactivate(),(r=this.Ac)===null||r===void 0||r.deactivate(),(o=this.Tc)===null||o===void 0||o.deactivate(),(c=this.Rc)===null||c===void 0||c.deactivate(),(l=this.Cc)===null||l===void 0||l.deactivate(),(h=this.Ic)===null||h===void 0||h.deactivate()}processInsertRule(t,[e,i]){if(t[be]==null&&!t.ownerNode)return;let r={type:"cssRuleInserted",sheet:t,rule:e,index:i};this.S(r)}processUpdateRule(t){let e=t;for(;e.parentRule!==null;)e=e.parentRule;e.parentStyleSheet!==null&&this.Fy.push(e)}processUpdateRulesInATick(t){for(let e of t){if(e.parentStyleSheet===null)return;let i=e.parentStyleSheet,r=csArray.prototype.indexOf.call(Us(i.cssRules),e);if(r===-1)return;let o={type:"cssRuleUpdated",sheet:i,rule:e.cssText,index:r};this.S(o)}}processDeleteRule(t,[e]){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssRuleDeleted",sheet:t,index:e};this.S(i)}zy(t,e){if(t[be]==null&&!t.ownerNode)return;let i={type:"cssStyleSheetDisabled",sheet:t,disabled:e};this.S(i)}}return tt([P()],s.prototype,"observe",null),tt([P()],s.prototype,"disconnect",null),tt([P()],s.prototype,"processInsertRule",null),tt([P()],s.prototype,"processUpdateRule",null),tt([P()],s.prototype,"processUpdateRulesInATick",null),tt([P()],s.prototype,"processDeleteRule",null),s})(),lf=(()=>{class s{constructor(t){this.$y=1,this.yo=new Set,this.Pc=null,this.Oc=null,this.Nc=(e,i)=>{(i==="initial"||i==="added")&&this.setStyleSheets(e,e.adoptedStyleSheets)},this.Gy=e=>{let i=e.sheet;if(this.yo.has(i)){if(e.type==="cssRuleInserted"){let r={type:"adoptedStyleSheetRuleInserted",sheetId:i[be],rule:e.rule,index:e.index};this.S(r)}else if(e.type==="cssRuleDeleted"){let r={type:"adoptedStyleSheetRuleDeleted",sheetId:i[be],index:e.index};this.S(r)}else if(e.type==="cssRuleUpdated"){let r={type:"adoptedStyleSheetRuleUpdated",sheetId:i[be],rule:e.rule,index:e.index};this.S(r)}else if(e.type==="cssStyleSheetDisabled"){let r={type:"adoptedStyleSheetDisabled",sheetId:i[be],disabled:e.disabled};this.S(r)}}},this.S=e=>zt(async()=>{await Gc(2),t(e)}),this.ne=new Gs(this.Nc),"adoptedStyleSheets"in Document.prototype&&(this.Pc=cn(window.Document.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),"ShadowRoot"in window&&"adoptedStyleSheets"in window.ShadowRoot.prototype&&(this.Oc=cn(window.ShadowRoot.prototype,"adoptedStyleSheets",(e,i)=>{this.setStyleSheets(e,i)})),this.gd=new Xr(this.Gy)}observe(){var t,e;this.setStyleSheets(document,document.adoptedStyleSheets),this.ne.observe(),(t=this.Pc)===null||t===void 0||t.activate(),(e=this.Oc)===null||e===void 0||e.activate(),this.gd.observe()}disconnect(){var t,e;this.yo.clear(),this.ne.disconnect(),(t=this.Pc)===null||t===void 0||t.deactivate(),(e=this.Oc)===null||e===void 0||e.deactivate(),this.gd.disconnect()}setStyleSheets(t,e){if(!e.length)return;this.qy(e);let i=Te(e,o=>o[be]),r={type:"adoptedStyleSheetsSet",target:t,sheetsIds:i};this.S(r)}qy(t){X(t,e=>{if(this.yo.has(e))return;let i=this.$y++;e[be]=i,this.yo.add(e);let r=this.Wy(e),o={type:"adoptedStyleSheetRegistered",sheetId:i,cssRules:r,disabled:e==null?void 0:e.disabled};this.S(o)})}Wy(t){let e=[];try{e=Te(t.cssRules,i=>i.cssText)}catch{}return e}}return tt([P()],s.prototype,"observe",null),tt([P()],s.prototype,"disconnect",null),tt([P()],s.prototype,"setStyleSheets",null),s})(),hf=vs(ff,"optimizeMutations"),uf=csSymbol.for("ignoreNextSerialization");function df(){let s=new Set,n=new Set,t=new Set,e=new Set,i=new Map,r=new Map,o=new Map,c=new Set,l=new Set,h=new Map,g=new Set;return{isMovedNode(d){return s.has(d)},markAsMovedNode(d){g.delete(d),s.add(d)},isDetachedMove(d){return!!rt.findAncestor(d,E=>g.has(E),!0)},isAddedNode(d){let E=rt.findAncestor(d,y=>n.has(y)||l.has(y)||s.has(y),!0);return!!E&&!s.has(E)},isMovedNodeIntoAddedNode(d){return s.has(d)&&!!rt.findAncestor(d,E=>n.has(E)||l.has(E),!0)},markAsAddedNode(d){g.delete(d),l.delete(d),n.add(d)},markAsPendingInsert(d){l.add(d)},isPendingInsert(d){return l.has(d)},isRemovedNode(d){return!!rt.findAncestor(d,E=>t.has(E),!0)},markAsRemovedNode(d){t.add(d)},isUselessNode(d){return e.has(d)},markAsUselessNode(d){e.add(d)},getPlaceholder(d,E){let y=E==="previous"?r:i;return d&&y.has(d)?y.get(d)||null:d},getSiblings(d){let E=d.addedNodes.length,y=this.getPlaceholder(d.previousSibling,"previous"),S=this.getPlaceholder(d.nextSibling,"next");if(E){let R=y,O=S,b=d.previousSibling!==y,w=d.nextSibling!==S;for(let x=0;x<E;x++){let N=d.addedNodes[x],C=d.addedNodes[E-x-1];this.isLatestNodeMutation(N,d)?(r.delete(N),d.previousSibling&&b&&(i.set(d.previousSibling,N),b=!1),R=N):r.set(N,R),this.isLatestNodeMutation(C,d)?(i.delete(C),d.nextSibling&&w&&(r.set(d.nextSibling,C),w=!1),O=C):i.set(C,O)}}else d.previousSibling&&d.previousSibling!==y&&i.set(d.previousSibling,S),d.nextSibling&&d.nextSibling!==S&&r.set(d.nextSibling,y);return{previousSibling:y,nextSibling:S}},setAttributeMutation(d,E){let y=o.get(d)||new Set;y.add(E),o.set(d,y)},isAttributeMutated(d,E){var y;return!!(!((y=o.get(d))===null||y===void 0)&&y.has(E))},setLatestNodeMutation(d,E){h.set(d,E)},isLatestNodeMutation(d,E){return h.get(d)===E},markAsFutureAddedNode(d){h.has(d)||g.add(d)},isTextMutated(d){return c.has(d)},setTextMutated(d){return c.add(d)}}}function pf(s,n){for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];n.markAsFutureAddedNode(e),n.setLatestNodeMutation(e,s)}for(let t=0;t<s.removedNodes.length;t++){let e=s.removedNodes[t];n.setLatestNodeMutation(e,s)}}function ff(s){let n=df(),t=[];for(let e of s)e.type==="childList"&&pf(e,n);for(let e of s)switch(e.type){case"attributes":mf(e,n,t);break;case"characterData":gf(e,n,t);break;case"childList":Sf(e,n,t);break}return t}function gf(s,n,t=[]){let e=s.target;return rt.isConnected(e)&&!n.isTextMutated(e)&&!n.isAddedNode(e)&&!Ef(e,"characterData")&&(n.setTextMutated(e),csArray.prototype.push.call(t,s)),t}function mf(s,n,t=[]){let e=s.target,i=`${s.attributeNamespace}/${s.attributeName}`;return rt.isConnected(e)&&!n.isAttributeMutated(e,i)&&!n.isAddedNode(e)&&(n.setAttributeMutation(e,i),csArray.prototype.push.call(t,s)),t}var yf=30;function Ef(s,n,t){let e=csSymbol.for(t?`${n}:${t}`:n),i=M.now(),r=s[e];return r&&i<r?!0:(s[e]=i+yf,!1)}function Sf(s,n,t=[]){let e=rt.isConnected(s.target),i=!e&&n.isRemovedNode(s.target),r=e&&n.isAddedNode(s.target),o=n.getSiblings(s),c=o.nextSibling,l=o.previousSibling,h=null,g=()=>{if(h){let{childListType:y,movedNodes:S,...R}=h;csArray.prototype.push.call(t,y==="added"?R:{...R,movedNodes:S}),h=null}},d=y=>y===(h==null?void 0:h.childListType)?h:(g(),{childListType:y,type:"childList",target:s.target,addedNodes:[],removedNodes:[],movedNodes:[],previousSibling:l,nextSibling:c});if(e){for(let y=0;y<s.addedNodes.length;y++){let S=s.addedNodes[y];n.isLatestNodeMutation(S,s)?(n.isMovedNode(S)?(h=d("moved"),csArray.prototype.push.call(h.movedNodes,S)):(n.markAsAddedNode(S),r||(h=d("added"),csArray.prototype.push.call(h.addedNodes,S))),l=S):rt.isConnected(S)?n.isMovedNode(S)||n.markAsPendingInsert(S):n.markAsUselessNode(S)}g()}let E=yi(s.removedNodes,y=>{if(rt.isConnected(y)){if(!i&&!n.isPendingInsert(y)){if(n.isDetachedMove(y))return!0;n.markAsMovedNode(y),n.isMovedNodeIntoAddedNode(y)&&(y[uf]=!0)}return!1}return n.isUselessNode(y)?!1:(n.markAsRemovedNode(y),!0)});return E.length&&csArray.prototype.push.call(t,{type:"childList",removedNodes:E,addedNodes:[],movedNodes:[],target:s.target,nextSibling:c,previousSibling:l}),t}var fa={childList:!0,subtree:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,attributeOldValue:!0},ye=(()=>{var s;class n{static setShadowRootFilter(e){csArray.prototype.push.call(s.shadowRootFilters,e)}static Mc(e){if(s.shadowRootFilters.length>0&&mi(e))for(let i=0;i<s.shadowRootFilters.length;i++){let r=s.shadowRootFilters[i];if(r(e))return}this.observedTargets.add(e),this.mutationObserver.observe(e,fa)}static disconnectShadowRoot(e){this.observedTargets.has(e)&&(this.observedTargets.delete(e),this.isRefreshing||(this.isRefreshing=!0,zt(()=>{this.isRefreshing=!1;let i=this.mutationObserver.takeRecords();i.length&&s.mutationCallback(i),this.mutationObserver.disconnect(),this.observedTargets.forEach(r=>{this.mutationObserver.observe(r,fa)})})))}static observe(e,i){csArray.prototype.push.call(this.callbacks,e),i&&csArray.prototype.push.call(this.shadowRootCallbacks,i),this.started?i&&csArray.prototype.forEach.call(ys.getAllShadowHosts(document),r=>i(csElementshadowRoot.apply(r),"initial")):(this.mutationObserver=new csMutationObserver(this.mutationCallback),this.Mc(document),this.shadowRootObserver=new Gs(this.onShadowRoot),this.shadowRootObserver.observe(),this.started=!0,X(this.shadowRootObserver.shadowRoots,r=>{this.Mc(r)}))}static disconnect(e,i){var r,o;this.callbacks=csArray.prototype.filter.call(this.callbacks,c=>c!==e),i&&(this.shadowRootCallbacks=csArray.prototype.filter.call(this.shadowRootCallbacks,c=>c!==i)),this.callbacks.length===0&&(this.callbacks=[],this.shadowRootCallbacks=[],s.shadowRootFilters=[],(r=this.shadowRootObserver)===null||r===void 0||r.disconnect(),(o=this.mutationObserver)===null||o===void 0||o.disconnect(),this.observedTargets.clear(),this.started=!1)}constructor(e,i){this.S=e,this.md=i;let r=wn(o=>e(o,this),!0);this.S=Pe("DocumentMutationObserver:callback",o=>{X(o,c=>r.push(c))})}get shadowRoots(){var e,i;return(i=(e=s.shadowRootObserver)===null||e===void 0?void 0:e.shadowRoots)!==null&&i!==void 0?i:[]}takeRecords(){var e;let i=(e=s.mutationObserver)===null||e===void 0?void 0:e.takeRecords(),r=s.shadowRootObserver.takeRecords();return i!=null&&i.length&&r.length?od(i,r):i!=null?i:r}observe(){s.observe(this.S,this.md)}disconnect(){s.disconnect(this.S,this.md)}}return s=n,n.callbacks=[],n.shadowRootCallbacks=[],n.started=!1,n.observedTargets=new Set,n.shadowRootFilters=[],n.mutationCallback=t=>{Mt.mutations.count.increase(t.length),csArray.prototype.forEach.call(s.callbacks,e=>e(t,s.mutationObserver))},n.onShadowRoot=(t,e)=>{X(s.shadowRootCallbacks,i=>i(t,e)),e!=="removed"?s.Mc(t):s.disconnectShadowRoot(t)},n.isRefreshing=!1,tt([P()],n.prototype,"observe",null),tt([P()],n.prototype,"disconnect",null),n})(),vf=(()=>{class s{constructor(t){this.S=t,this.Yy=e=>{e.sheet.ownerNode&&(e.type==="cssRuleInserted"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssRuleDeleted"?this.S({type:e.type,target:e.sheet.ownerNode,index:e.index}):e.type==="cssRuleUpdated"?this.S({type:e.type,target:e.sheet.ownerNode,rule:e.rule,index:e.index}):e.type==="cssStyleSheetDisabled"&&this.S({type:e.type,target:e.sheet.ownerNode,disabled:e.disabled}))},this.S=e=>zt(()=>t(e)),this.yd=new Xr(e=>zt(async()=>{await Gc(),this.Yy(e)})),"adoptedStyleSheets"in Document.prototype&&(this.Ed=new lf(t))}observe(){var t;this.P=new ye(e=>this.Xy(e),(e,i)=>{i==="added"&&this.Ky(e)}),this.P.observe(),this.yd.observe(),(t=this.Ed)===null||t===void 0||t.observe()}disconnect(){var t,e;(t=this.P)===null||t===void 0||t.disconnect(),this.yd.disconnect(),(e=this.Ed)===null||e===void 0||e.disconnect()}Xy(t){let e=hf(t);for(let i=0;i<e.length;i++){let r=e[i];if(!r){pt.error("processRawMutations: empty record");continue}switch(r.type){case"attributes":this.processAttributeChanged(r);break;case"characterData":this.processCharacterDataChanged(r);break;case"childList":this.processChildListChanged(r);break;default:pt.error(`processRawMutations: unknown record type '${r.type}'`);break}}}processAttributeChanged(t){let e={type:"attributeChanged",target:t.target,attribute:t.attributeName,namespace:t.attributeNamespace,oldValue:t.oldValue,newValue:rt.getAttributeNS(t.target,t.attributeNamespace,t.attributeName)};this.S(e)}processCharacterDataChanged(t){let e={type:"characterDataChanged",target:t.target,oldValue:t.oldValue,newValue:t.target.data};this.S(e)}processChildListChanged(t){var e,i,r;if(!((e=t.movedNodes)===null||e===void 0)&&e.length){let o={type:"nodesMoved",target:t.target,nodes:t.movedNodes,previousSibling:t.previousSibling,nextSibling:t.nextSibling};this.S(o)}if(!((i=t.addedNodes)===null||i===void 0)&&i.length){let o={type:"nodesAdded",target:t.target,previousSibling:t.previousSibling,nextSibling:t.nextSibling,nodes:Us(t.addedNodes)};this.S(o)}if(!((r=t.removedNodes)===null||r===void 0)&&r.length){let o={type:"nodesRemoved",target:t.target,nodes:Te(t.removedNodes,c=>c)};this.S(o)}}Ky(t){let e={type:"shadowRootAttached",target:t.host,shadowRoot:t};this.S(e)}}return tt([P()],s.prototype,"processAttributeChanged",null),tt([P()],s.prototype,"processCharacterDataChanged",null),tt([P()],s.prototype,"processChildListChanged",null),s})(),_f=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=4,this.data=t.data}}return s})(),wf=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=8,this.data=t.data}}return s})(),bf=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=10,this.name=t.name,this.publicId=t.publicId,this.systemId=t.systemId}}return s})(),Af=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=9,this.baseURI=s.getBaseURI(t),this.children=[]}static getBaseURI(t){let e=t.baseURI;if(e==null){let i=t.getElementsByTagName("base");e=i.length!==0?i[0].href:t.URL}return e}}return s})(),Tf=(()=>{class s extends _s{constructor(t){super(t),this.nodeType=11,this.mode=t.mode,this.children=[]}}return s})(),Rf=(()=>{class s{constructor(t,e,i){var r;typeof t=="string"?(this.name=t,this.value=e,this.namespaceURI=i!=null?i:""):(this.name=t.name,this.value=t.value,this.namespaceURI=(r=t.namespaceURI)!==null&&r!==void 0?r:"")}static create(t){let e=t.attributes,i=new csArray(e.length);for(let r=0;r<i.length;r++){let o=e[r];i[r]=new s(o.name,o.value,o.namespaceURI),o.name==="href"&&Nr(t)&&(i[r].value=Bc(t))}return i}}return s})(),ga={workTime:40,async:!0,initialDOM:!0};var ui=csSymbol("InitialDom"),ma=csSymbol.for("ignoreNextSerialization");function qc(s){return s[ma]?(delete s[ma],!0):!1}function Cf(s=ga){return function(t,e){var i;(i=s.workTime)!==null&&i!==void 0||(s.workTime=ga.workTime);let r=Pe("serialize:callback",E=>e(E)),o=new zs,c=(E,y)=>{E.hasChildNodes()&&o.push({node:E,serializedNode:y});let S=E instanceof Element&&csElementshadowRoot.apply(E);if(S){let R=y.shadowRoot=di(S);s.async&&s.initialDOM&&Y.setProperty(S,ui,!0),c(S,R)}},l,h=!0,g=8,d=Pe("work",()=>{var E;if(h)l=di(t),s.async&&s.initialDOM&&Y.setProperty(t,ui,!0),c(t,l),h=!1;else if(o.isEmpty)return;let y=Of(100);for(;!o.isEmpty;){if(s.async&&y.elapsed()>=s.workTime){--g<=0&&csSetTimeout(d);return}let{node:S,serializedNode:R}=o.pop(),O=(E=R.children)!==null&&E!==void 0?E:[];if(gn(S))continue;let b=0;for(let w=csNodefirstChild.apply(S);w;w=csNodenextSibling.apply(w)){if(qc(w))continue;let x=di(w);s.async&&s.initialDOM&&Y.setProperty(w,ui,!0),O[b++]=x,c(w,x)}}s.async?csSetTimeout(()=>r(l)):e(l)});if(!s.async)s.workTime=1/0,d();else for(let E=0;E<g;E++)csSetTimeout(d,1)}}function If(s){let n=di(s),t=n;if(gn(s))return n;let e=0;for(let r=csNodefirstChild.apply(s);r;r=csNodenextSibling.apply(r))qc(r)||(t.children[e++]=Er(r));let i=s.shadowRoot;return i&&(t.shadowRoot=Er(i)),n}var Er=vs(If,"serializeSync");function di(s){let n,t;switch(s.nodeType){case 1:t=n=new Ls(s),n.attributes=Nf(s);break;case 3:t=new zc(s);break;case 4:t=new _f(s);break;case 8:t=new wf(s);break;case 10:t=new bf(s);break;case 9:t=new Af(s);break;case 11:t=new Tf(s);break;default:throw new Error("Node type not supported: "+s.nodeType)}return t}function Pf(){ui=csSymbol("InitialDom")}function Of(s){if(s<1)throw new Error("Precision should be >= 1");let n=0,t=performance.now();return{started:t,elapsed(){return++n%s===0&&(t=performance.now()),t-this.started}}}function Nf(s){return gn(s)?[]:Rf.create(s)}var Ee=(()=>{class s{constructor(){this.re=[],this.isStarted=!1}produceEvent(t){var e;this.isStarted&&(t.timestamp=(e=t.timestamp)!==null&&e!==void 0?e:M.now(),t.timestamp==null&&(t.timestamp=M.now()),csArray.prototype.forEach.call(this.re,i=>i(t)))}onStop(){}start(){this.isStarted||(this.isStarted=!0,this.onStart())}stop(){this.isStarted&&(this.isStarted=!1,this.onStop(),this.re=[])}stopForInactivity(){this.isStarted&&(this.isStarted=!1,this.onStop())}subscribe(t){return csArray.prototype.push.call(this.re,t),()=>{let e=csArray.prototype.indexOf.call(this.re,t);csArray.prototype.splice.call(this.re,e,1)}}}return s})(),Mf=Cf(),Df=(()=>{class s extends Ee{constructor(){super(...arguments),this.Eo=!1}onStart(){this.Eo=!0,this.S=af(this.Jy,this),this.F=new vf(this.S),this.F.observe();let t=Mt.mutations.initialDOM.asyncMeasure(),e=()=>{this.Eo=!1,Pf(),t()};this.produceEvent(new Yr(i=>Mf(document,r=>{e(),i({type:"DomEvent",domEvent:"initialDOM",initialDOM:r})})))}onStop(){var t,e;this.Eo=!1,(t=this.S)===null||t===void 0||t.cancel(),(e=this.F)===null||e===void 0||e.disconnect()}xt(t,e){let i={type:"DomEvent",domEvent:e.type,target:0,targetProps:{}};return"target"in e&&(i.target=nt(e.target),i.targetProps=Y.getProperties(e.target)),[e,i]}Jy(t){if(!this.Qy(t))switch(t.type){case"attributeChanged":{let[e,i]=this.xt(t.type,t);i.attribute=e.attribute,i.isSvg=Fs(e.target),i.namespace=e.namespace,i.newValue=e.newValue,i.oldValue=e.oldValue,i.localName=ri(e.target),i.linkRel=lc(e.target)?e.target.rel:null,i.parentLocalName=e.target.parentElement?ri(e.target.parentElement):void 0,i.localName==="input"&&(i.inputType=e.target.getAttribute("type")),this.produceEvent(i)}break;case"characterDataChanged":{let[e,i]=this.xt(t.type,t);i.newValue=e.newValue,i.oldValue=e.oldValue,i.targetNodeType=e.target.nodeType,i.parentLocalName=e.target.parentElement?ri(e.target.parentElement):null,i.parentProps=e.target.parentElement?Y.getProperties(e.target.parentElement):void 0,this.produceEvent(i)}break;case"nodesAdded":{let[e,i]=this.xt(t.type,t);i.targetLocalName=dt(e.target)?ri(e.target):null,i.nextSibling=e.nextSibling?nt(e.nextSibling):null,i.previousSibling=e.previousSibling?nt(e.previousSibling):null,Mt.mutations.serializedMutations.measure(()=>{i.nodes=Te(e.nodes,Er)}),this.produceEvent(i);break}case"nodesMoved":{let[e,i]=this.xt(t.type,t);i.previousSibling=e.previousSibling?nt(e.previousSibling):null,i.nextSibling=e.nextSibling?nt(e.nextSibling):null,i.nodesIds=Te(e.nodes,nt),this.produceEvent(i);break}case"nodesRemoved":{let[e,i]=this.xt(t.type,t);i.nodesIds=Te(e.nodes,nt),this.produceEvent(i);break}case"shadowRootAttached":{let[e,i]=this.xt(t.type,t);i.shadowRoot=di(e.shadowRoot),this.produceEvent(i);break}case"cssRuleInserted":{let[e,i]=this.xt(t.type,t);i.index=e.index,i.rule=e.rule,this.produceEvent(i);break}case"cssRuleDeleted":{let[e,i]=this.xt(t.type,t);i.index=e.index,this.produceEvent(i);break}case"cssRuleUpdated":{let[e,i]=this.xt(t.type,t);i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"cssStyleSheetDisabled":{let[e,i]=this.xt(t.type,t);i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetRegistered":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.cssRules=e.cssRules,i.disabled=e.disabled,this.produceEvent(i);break}case"adoptedStyleSheetsSet":{let[e,i]=this.xt(t.type,t);i.sheetsIds=e.sheetsIds,this.produceEvent(i);break}case"adoptedStyleSheetRuleInserted":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleDeleted":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetRuleUpdated":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.rule=e.rule,i.index=e.index,this.produceEvent(i);break}case"adoptedStyleSheetDisabled":{let[e,i]=this.xt(t.type,t);i.sheetId=e.sheetId,i.disabled=e.disabled,this.produceEvent(i);break}}}So(t){return this.Eo&&!Y.getProperty(t,ui)}Qy(t){switch(t.type){case"nodesAdded":case"nodesMoved":case"nodesRemoved":case"shadowRootAttached":return this.So(t.target)||k.isMaskedElement(t.target)||k.isMaskedElementChild(t.target);case"characterDataChanged":{let e=t.target.parentElement;return e!==null&&(this.So(e)||k.isMaskedElement(e)||k.isMaskedElementChild(e))}case"attributeChanged":return this.So(t.target)||k.isMaskedElementChild(t.target)||k.isMaskedAttribute(t.target,t.attribute);case"cssRuleInserted":case"cssRuleDeleted":case"cssRuleUpdated":case"cssStyleSheetDisabled":return this.So(t.target)||k.isMaskedElementChild(t.target);default:return!1}}}return s})(),Ai=(()=>{let s;return function(n){function t(e){return e.type==="DomEvent"}n.isDOMEvent=t}(s||(s={})),s})(),qs=(()=>{class s{constructor(){this.re=[]}start(){}stop(){this.re.length=0,this.re=[]}pushEvent(t){if(s.pendingEvents++,this.isListening(t)){let e=this.re;csSetTimeout(()=>{let r=Pe("Processor:processEvent",o=>this.processEvent(o))(t);r!=null&&csArray.prototype.forEach.call(e,o=>o(r)),s.pendingEvents--})}else csSetTimeout(()=>{csArray.prototype.forEach.call(this.re,e=>e(t))})}subscribe(t){return csArray.prototype.push.call(this.re,t),()=>{this.re=csArray.prototype.filter.call(this.re,e=>e!==t)}}emitEvent(t){zt(()=>csArray.prototype.forEach.call(this.re,e=>e(t)))}}return s.pendingEvents=0,s})(),ya=(()=>{class s{static async toStaticResourceEvent(t,e,i){let r=await s.Zy(t);if(!r)return null;let o=await s.Sd(r),c=Jt(t)?void 0:t,l={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:o,data:r}};return c&&(l.originalResourceName=c),l}static async toCSSStaticResourceEvent(t,e,i,r){let o=await s.tE(t,r),c=ge(t),l=o.get(c);if(!l)return null;let h={type:"StaticResourceManagerEvent",timestamp:i,resourceId:e,resource:{hash:l.hash,data:l.data}};return o.delete(c),o.size&&(h.nestedResources=[],o.forEach(g=>{g&&csArray.prototype.push.call(h.nestedResources,{hash:g.hash,data:g.data})})),h}static async Sd(t){let e=await t.arrayBuffer(),i=await crypto.subtle.digest(this.Gn,e);return pr(i)}static async Zy(t){let e;if(!Jt(t))e=await(await window.fetch(t)).blob();else{let i=qo(t);if(!i)return null;e=i}return e}static async tE(t,e){let i=new Map,r=ge(t),c=[{resourceRawPath:t,resourceAbsolutePath:r}];for(;c.length>0;){let l=csArray.prototype.pop.call(c);if(!e&&l.resourceAbsolutePath!==null&&!Jt(l.resourceAbsolutePath)){i.set(l.resourceAbsolutePath,null);continue}if(i.get(l.resourceAbsolutePath)===void 0)try{if(l.resourceRawPath===null||csString.prototype.indexOf.call(l.resourceRawPath,".css")>0){if(!l.data){let y=await fetch(l.resourceAbsolutePath);l.data=await y.text()}l.nestedResources||(l.nestedResources=hi(l.data));let d=!1,E=!1;for(let y of l.nestedResources){let S=Jt(y)?y:l.resourceAbsolutePath?Bd(y,l.resourceAbsolutePath):ge(y),R=i.get(S);if(R!==void 0){if(R!==null){let b=s.eE(R,y);l.data=ct.stringReplaceAll(l.data,y,b)}continue}pe(c,b=>b.resourceAbsolutePath===S)!==void 0||(d=!0,E||(csArray.prototype.push.call(c,l),E=!0),csArray.prototype.push.call(c,{resourceRawPath:y,resourceAbsolutePath:S}))}if(!d){let y=await s.sE(l.data);i.set(l.resourceAbsolutePath,{hash:y.hash,data:y.data})}}else{let d;if(!Jt(l.resourceAbsolutePath))d=await(await fetch(l.resourceAbsolutePath)).blob();else{let y=qo(l.resourceAbsolutePath);if(!y){i.set(l.resourceAbsolutePath,null);continue}d=y}let E=await s.Sd(d);i.set(l.resourceAbsolutePath,{hash:E,data:d})}}catch{i.set(l.resourceAbsolutePath,null)}}return i}static eE(t,e){let i=`cs://resources/${t.hash}`;return Jt(e)||(i+=`?${s.Dc}=${e}`),i}static async sE(t){let e=new Blob([t],{type:"text/css"}),i=await e.arrayBuffer(),r=await crypto.subtle.digest(s.Gn,i);return{data:e,hash:pr(r)}}}return s.Gn="SHA-256",s.Dc="original-resource-name",s})(),Sr=(()=>{class s extends qs{constructor(){super(),this.vo="cssrm://",this.oe=0,this.us=!1}isListening(t){return!s.isSupported()||!Ai.isDOMEvent(t)?!1:t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged"}processEvent(t){switch(t.domEvent){case"initialDOM":case"nodesAdded":this.iE(t);break;case"attributeChanged":this.nE(t);break;case"characterDataChanged":this.rE(t);break}return t}disableOnlineAssets(){this.us=!1}enableOnlineAssets(){this.us=!0}isOnlineAssetsActivated(){return this.us}iE(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let i of e)Y.traverse(i,(r,o)=>{if(r.nodeType===3&&o){this.oE(r,o.localName);return}if(!Ls.isElement(r))return;let c=pe(r.attributes,l=>l.name==="style");if(c&&(c.value=this._o(c.value)),this.aE(r)||this.cE(r,o)){let l=pe(r.attributes,g=>g.name==="src");l&&l.value&&(l.value=this.vd(l.value));let h=pe(r.attributes,g=>g.name==="srcset");if(h){h.value=this._d(h.value);return}}if(this.lE(r)&&this.us){let l=pe(r.attributes,h=>h.name==="href");if(!l||!l.value)return;this.oe++,this.Vi(ge(l.value),this.oe,!0),this.hE(r,l,this.oe)}})}hE(t,e,i){csArray.prototype.push.call(t.attributes,{name:"data-cs-original-href",namespaceURI:"",value:e.value}),e.value=this.vo+i}oE(t,e){if(!t||e!=="style")return;let i=this._o(t.data);i!==null&&(t.data=i)}rE(t){if(t.parentLocalName!=="style"||!t.newValue)return;let e=this._o(t.newValue);e!==null&&(t.newValue=e)}nE(t){if(!t.newValue||t.newValue===t.oldValue)return;let e=t.attribute==="src",i=t.attribute==="srcset";if(t.attribute==="style"){t.newValue=this._o(t.newValue);return}if(!e&&!i)return;let o=t.localName==="img",c=t.localName==="source"&&t.parentLocalName&&t.parentLocalName==="picture";!o&&!c||(e&&(t.newValue=this.vd(t.newValue)),i&&(t.newValue=this._d(t.newValue)))}vd(t){return Jt(t)||this.us?(this.oe++,this.Vi(t,this.oe,!1,M.now()),this.vo+this.oe):t}_d(t){if(!this.us)return t;let e=t,i=Wr(t),r=M.now();for(let o of i)this.oe++,this.Vi(ge(o),this.oe,!1,r),e=csString.prototype.replace.call(e,o,this.vo+this.oe);return e}_o(t){let e=hi(t),i=t,r=M.now();for(let o of e){let c=Jt(o);if(!(c||this.us)||this.uE(o))continue;this.oe++,i=csString.prototype.replace.call(i,o,this.vo+this.oe);let l=Kp(o);c?this.Vi(o,this.oe,!1,r):this.us&&(l?this.Vi(o,this.oe,!0,r):this.Vi(ge(o),this.oe,!1,r))}return i}Vi(t,e,i,r=M.now()){let o=i?ya.toCSSStaticResourceEvent:ya.toStaticResourceEvent,c=new Yr(async l=>{try{let h=await o(t,e,r,this.us);l(h||{type:"warning",message:`Failed to process static resource: ${t}`})}catch(h){l({type:"warning",message:h})}});this.emitEvent(c)}aE(t){return t.localName==="img"}cE(t,e){return t.localName==="source"&&!!e&&e.localName==="picture"}lE(t){return t.localName==="link"&&csArray.prototype.some.call(t.attributes,e=>e.name==="rel"&&e.value==="stylesheet")}static isSupported(){return Tc()&&xd()&&!!csArray.from}uE(t){return csString.prototype.replace.call(t,/['"]+/g,"").length===0}}return Ne([It("StaticResourceManagerProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Qt=(()=>{let s;return function(n){n.Visible="visible",n.Hidden="hidden",n.Blur="blur",n.PagehideVisible="pagehideVisible",n.PagehideHidden="pagehideHidden",n.ExitPageByNavigate="exitPageByNavigate"}(s||(s={})),s})(),Wc=(()=>{class s{constructor(){this.N=!1,this.Ns=t=>{try{switch(t.type){case"visibilitychange":return document.visibilityState==="hidden"?this.Jt(Qt.Hidden):this.Jt(Qt.Visible);case"pagehide":return document.visibilityState==="hidden"?this.Jt(Qt.PagehideHidden):this.Jt(Qt.PagehideVisible);case"blur":return this.Jt(Qt.Blur);case"navigate":return this.dE(t)?this.Jt(Qt.ExitPageByNavigate):void 0;default:return}}catch{}}}start(){this.N||(this.N=!0,this.kc(),this.pE(),this.fE(),Xo()&&this.gE())}stop(){this.N&&(this.N=!1,this.Lc(),this.mE(),this.yE(),Xo()&&this.EE())}onEvent(t){this.Jt=t}gE(){window.navigation.addEventListener("navigate",this.Ns)}EE(){window.navigation.removeEventListener("navigate",this.Ns)}kc(){document.addEventListener("visibilitychange",this.Ns)}Lc(){document.removeEventListener("visibilitychange",this.Ns)}pE(){window.addEventListener("pagehide",this.Ns)}mE(){window.removeEventListener("pagehide",this.Ns)}fE(){window.addEventListener("blur",this.Ns)}yE(){window.removeEventListener("blur",this.Ns)}dE(t){return t instanceof NavigateEvent?!t.downloadRequest&&!t.formData:!1}}return s})(),Lt=(()=>{let s;return function(n){n[n.Active=0]="Active",n[n.Paused=1]="Paused",n[n.Stopped=2]="Stopped"}(s||(s={})),s})(),kf=(()=>{class s{constructor(t,e,i=[]){this.ji=t,this.xc=e,this.SE=i,this.wo=null,this.wt=Lt.Active,this.Z=[]}reset(){this.wo=null,this.Z=[],this.wt=Lt.Active}disconnect(){this.wt=Lt.Stopped}vE(){this.xc(Lt.Paused),this.wt=Lt.Paused,csSetTimeout(()=>{this.wt===Lt.Paused&&this.Uc()},s.STOP_TIMEOUT)}_E(){this.xc(Lt.Active),this.wt=Lt.Active,X(this.Z,this.ji),this.Z=[]}Uc(){this.Z=[],this.xc(Lt.Stopped),this.wt=Lt.Stopped}pushEvent(t,e){if(e.isUserEvent&&(this.wo=t.date,this.wt!==Lt.Active)){this._E(),this.ji(t);return}if(this.wE(t)){this.ji(t);return}switch(this.wt){case Lt.Active:if(this.bE(t,e)){this.vE(),csArray.prototype.push.call(this.Z,t);return}this.ji(t);break;case Lt.Paused:csArray.prototype.push.call(this.Z,t);break;case Lt.Stopped:break}}bE(t,e){return!e.isUserEvent&&this.wo!==null&&t.date-this.wo>s.INACTIVITY_TIMEOUT}wE(t){return csArray.prototype.indexOf.call(this.SE,t.type)>-1}}return s.INACTIVITY_TIMEOUT=5e3,s.STOP_TIMEOUT=5e3,s})(),Lf=2e3,xf=(()=>{class s extends xt{constructor(t,e,i,r,o,c,l,h,g,d,E,y,S,R,O=[],b,w,x,N,C){super(),this.h=t,this.j=e,this.AE=i,this.xe=r,this.X=o,this.w=c,this.ae=l,this.at=h,this.ce=g,this.tt=d,this.U=E,this.Ct=y,this.yt=S,this.Pe=R,this.Oe=O,this.wd=b,this.Ut=w,this.Hi=x,this.qe=N,this.We=C,this.Ms=0,this.Ds=new jc,this.Bi={allowFromQuotaService:!0,allowFromSerialization:!0},this.bd=En(()=>{this.j.eventsCount()>0&&this.Ad()},Lf),this.ds=H=>this.processBrowserEvent(H),this.qn=H=>this.It(H),this.Td=0,this.bo=0,this.Ue=new Wc,this.Vc=!1,this.Rd=50*1024,this.pi=!1,this.Wn=!1,this.fi=[],this.Ao=new kf(H=>this.G(H),H=>{switch(H){case Lt.Active:this.TE();break;case Lt.Stopped:this.RE();break}},[L.RESOURCE_HASHES,L.TEXT_VISIBILITY,L.API_ERROR,L.JAVASCRIPT_ERROR]),this.Cd=H=>{this.Ct.removeBatchInProgress(`${H.params.sn}.${H.params.pn}.${H.params.ri}`)}}init(){this.jc(),this.U.onLoad(this.Cd),this.U.onError(this.Cd)}TE(){csArray.prototype.forEach.call(this.wd,t=>t.start())}RE(){csArray.prototype.forEach.call(this.wd,t=>t.stopForInactivity())}jc(){var t,e,i;this.Pe.onEvent(this.ds,this.qn),(t=this.tt)===null||t===void 0||t.onInputNodeToEncrypt(this.qn),(e=this.tt)===null||e===void 0||e.onApiErrorToEncrypt(r=>{this.Id(r)}),(i=this.tt)===null||i===void 0||i.onUserIdentifierToEncrypt(this.ds),this.Ue.onEvent(r=>{if(csSetTimeout(()=>this.gi("page-state",r)),r!==Qt.Visible){if(r===Qt.Blur)return this.Pd();if(!this.Vc)return this.Vc=!0,csSetTimeout(()=>{this.Vc=!1}),r===Qt.Hidden?this.Pd():this.CE()}})}isRecording(){return this.w.hasValidSession()&&this.isStarted}Pd(){if(!this.canSendEvents())return;this.Pe.flush(),this.Ct.saveBatchesInProgress(),X(this.Oe,o=>{var c,l;return X((l=(c=o.getPendingEvents)===null||c===void 0?void 0:c.call(o))!==null&&l!==void 0?l:[],h=>this.j.addEvent(h))});let t=this.j.getEvents();if(t.length===0)return;this.gi("pending-events",this.Pe.pendingEvents);let e=this.U.getQueryParams();e.rst=this.getRecordingStartTimestamp(),e.let=this.getRecordingLastEventTimestamp();let i=this.xe.getCurrentIndex();e.ri=i.toString(),this.yt.removeQueryParams(),this.yt.setQueryParams(e),this.bo=t[t.length-1].date;let r=this.j.stringifyEvents();if(r.length>this.Rd){let o=this.Od();if(o.length>0){let c=Vs(o);this.yt.send(c)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.xe.increment()}if(this.j.eventsCount()>0){e.ri=this.xe.getCurrentIndex().toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:c}),this.xe.increment()}}else this.yt.send(r)||this.Ct.save({key:`${e.sn}.${e.pn}.${e.ri}.last`,metadata:{...e,datatype:"json"},events:r}),this.xe.increment();this.yt.removeQueryParams(),this.j.clearEvents()}CE(){if(!this.canSendEvents())return;this.Pe.flush();let t=this.U.getQueryParams();this.Ct.saveBatchesInProgress(),t.rst=this.getRecordingStartTimestamp(),delete t.ri,t.hlm="true",this.yt.removeQueryParams(),X(this.Oe,r=>{var o,c;return X((c=(o=r.getPendingEvents)===null||o===void 0?void 0:o.call(r))!==null&&c!==void 0?c:[],l=>this.j.addEvent(l))});let e=this.j.getEvents();if(e.length===0){delete t.let,delete t.rst,this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();return}this.gi("pending-events",this.Pe.pendingEvents),this.bo=e[e.length-1].date,t.let=this.getRecordingLastEventTimestamp(),this.yt.setQueryParams(t);let i=this.j.stringifyEvents();if(i.length>this.Rd){let r=this.Od();if(r.length>0){let o=Vs(r);this.yt.send(o)||this.Ct.save({key:`${t.sn}.${t.pn}.last`,metadata:{...t,datatype:"json"},events:o})}else delete t.let,delete t.rst,delete t.ri,this.yt.removeQueryParams(),this.yt.setQueryParams(t),this.yt.send(),this.yt.removeQueryParams();if(this.j.eventsCount()>0){t.rst=this.getRecordingStartTimestamp(),t.let=this.getRecordingLastEventTimestamp();let o=this.xe.getCurrentIndex();t.ri=o.toString();let c=this.j.stringifyEvents();this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:c}),this.xe.increment()}}else this.yt.send(i)||(this.Ct.save({key:`${t.sn}.${t.pn}.${t.ri}.last`,metadata:{...t,datatype:"json"},events:i}),this.xe.increment());this.yt.removeQueryParams(),this.j.clearEvents()}blockSendingEventsFromQuotaService(){this.Bi.allowFromQuotaService=!1}allowSendingEventsFromQuotaService(){this.Bi.allowFromQuotaService=!0}blockSendingEventsFromSerialization(){this.Bi.allowFromSerialization=!1}allowSendingEventsFromSerialization(){this.Bi.allowFromSerialization=!0}canSendEvents(){return this.Bi.allowFromQuotaService&&this.Bi.allowFromSerialization}onIframeJavascriptError(t){var e;if(this.ae&&this.qe){(e=this.ae)===null||e===void 0||e.anonymize(t);let i=this.qe.translate({message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename,timestamp:M.now(),type:"JSError"});i&&this.ds(i)}}onIframeCustomError(t){if(this.We){let e=this.We.translate({...t,timestamp:M.now(),type:"CustomError"});e&&this.ds(e)}}onIframeDetailedApiError(t){this.Nd(t)}onIframeRecordingUserEvent(t){for(let e of t)this.It(e)}onIframeRecordingBrowserEvent(t){if(this.isStarted)for(let e of t)this.processBrowserEvent(e)}processBrowserEvent(t){this.X.isCurrentPageviewValid()&&this.Ao.pushEvent(t,{isUserEvent:!1})}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.Ao.pushEvent(t,{isUserEvent:!0})}G(t){Mt.general.nbEvents.increase(),this.j.addEvent(t),this.j.isThresholdReached()?this.pushEvents():this.j.isFull()&&this.bd(),this.Md(t)}Md(t){this.h.emitDebugEvents&&this.Ds.emit("recordingEvent",{...t,typeName:L[t.type]})}onStart(){var t;this.gi("tag-version","15.114.0"),this.gi("page-state",document.visibilityState),this.Ao.reset(),this.Ue.start(),this.initStates(),this.Pe.start(),this.at&&this.ce&&this.at.subscribe(s.Mt,e=>this.Nd(e),{detailedEvent:!0}),this.h.emitDebugEvents&&this.Ds.emit("replayRecordingStarted"),csArray.prototype.forEach.call(this.fi,e=>this.Dd(e)),this.fi=[],this.pi&&((t=this.Ut)===null||t===void 0||t.enableOnlineAssets(),this.pi=!1)}onStop(){var t;this.Ue.stop(),this.at&&this.at.unsubscribe(s.Mt),this.Pe.stop(),this.Ao.disconnect(),(t=this.Ut)===null||t===void 0||t.disableOnlineAssets()}clearStates(){this.Pe.flush(),this.bd.cancel(),this.pushEvents(),this.U.removeQueryParams()}initStates(){this.Td=M.now(),this.xe.reset(),this.Ms=0,this.U.setQueryParams(this.AE.getRequestParameters())}pushEvents(){X(this.Oe,t=>{var e;return(e=t.flushEvents)===null||e===void 0?void 0:e.call(t)}),this.j.eventsCount()>0&&(this.isStarted?this.Ad():this.j.clearEvents())}Ad(){if(!this.canSendEvents())return;let t=this.j.getEvents();this.bo=t[t.length-1].date;let e=this.xe.getCurrentIndex();this.U.setQueryParams({ri:e.toString(),rst:this.getRecordingStartTimestamp(),let:this.getRecordingLastEventTimestamp()});let i=this.U.getQueryParams();this.Ct.addBatchInProgress(`${i.sn}.${i.pn}.${e}`,this.U.getQueryParams(),t),this.U.send(t),this.xe.increment(),this.j.clearEvents(),this.kd&&this.kd()}addInitialDom(t){this.j.addEventByTimestamp(t),this.Md(t)}Nd(t){if(this.Hi&&(t.plainCustomRequestHeaders||t.plainCustomResponseHeaders||t.requestBodyAttributes||t.responseBodyAttributes||t.customRequestHeaders||t.customResponseHeaders||t.queryParameters||t.requestBody||t.responseBody)){if(this.Hi.truncate(t),this.tt){this.tt.registerApiErrorToEncrypt(t);return}t.customRequestHeaders="",t.customResponseHeaders="",t.requestBodyAttributes="",t.responseBodyAttributes="",t.queryParameters="",t.requestBody="",t.responseBody=""}this.Id(t)}Id(t){if(this.Ms<s.IE){let e={type:L.API_ERROR,date:M.now(),args:[this.ce.anonymize(t)]};this.ds(e),this.Ms=this.Ms+1,lt.counters.networkRequests.count("collected")}}PE(t){t===es.ETR_SESSION?this.U.setQueryParams({[s.OE]:s.Ld}):t===es.ETR_PAGE&&this.U.setQueryParams({[s.NE]:s.Ld})}clearEvents(){this.j.clearEvents()}onCustomJavaScriptErrorEvent(t){var e;let i=(e=this.qe)===null||e===void 0?void 0:e.translate({type:"JSError",timestamp:M.now(),message:t.message,colno:t.colno,lineno:t.lineno,filename:t.filename});i&&this.ds(i)}onCustomErrorEvent(t){var e;let i=(e=this.We)===null||e===void 0?void 0:e.translate({type:"CustomError",timestamp:M.now(),message:t.message,attributes:t.attributes});i&&this.ds(i)}onPageEvent(t){this.xd(t)}onUserIdentifierEvent(t){var e;let i={userIdentifier:t,date:M.now(),keyId:this.h.encryptionPublicKeyId};(e=this.tt)===null||e===void 0||e.registerUserIdentifierToEncrypt(i)}onEventTriggerRecording(t,e){this.isStarted?this.Dd({eventName:t,eventType:e}):csArray.prototype.push.call(this.fi,{eventName:t,eventType:e})}Dd(t){this.PE(t.eventType),this.xd(t.eventName),this.pushEvents()}xd(t){let e={type:L.PAGE_EVENT,date:M.now(),args:[{eventName:csString.prototype.slice.call(t,0,s.ME)}]};this.j.addEvent(e)}triggerUnanonymizationConsentGranted(){let t={date:M.now(),type:L.UNANONYMIZED_CONSENT_GRANTED};this.j.addEvent(t)}triggerUnanonymizationConsentWithdrawn(){let t={date:M.now(),type:L.UNANONYMIZED_CONSENT_WITHDRAWN};this.j.addEvent(t)}triggerRecordingForSessionGranted(){this.gi("consent-granted")}triggerRecordingForSessionWithdrawn(){this.gi("consent-withdrawn")}activateOnlineAssetsOnNextPageview(){this.Wn=!0}getStaticResourceManagerStatus(){return this.Ut?{isStarted:this.h.useStaticResourceManager&&Sr.isSupported(),onlineAssets:{activated:this.Ut.isOnlineAssetsActivated(),enabledOnNextPageview:this.Wn}}:null}resetOnlineAssetsOnPageview(){this.pi=!1,this.Wn=!1}updateOnlineAssetsOnPageview(){this.Ut&&this.Wn&&(this.pi=!0,this.Wn=!1)}onRecordingRequestSent(t){this.kd=t}getRecordingStartTimestamp(){return this.Td.toString()}getRecordingLastEventTimestamp(){return this.bo.toString()}onOptOut(){X(this.Oe,t=>{var e;return(e=t.releaseResources)===null||e===void 0?void 0:e.call(t)})}gi(t,e){if(!this.h.emitRecordInfoEvents)return;let i={date:M.now(),type:L.RECORDING_INFO_EVENT,args:e==null?[t]:[t,e]};this.j.addEvent(i)}Od(){return this.j.extractEvents(L.API_ERROR,L.JAVASCRIPT_ERROR,L.CUSTOM_ERROR,L.TEXT_VISIBILITY,L.POINTER_DOWN)}}return s.Mt="RecordingService",s.ME=255,s.IE=20,s.NE="etrp",s.OE="etrs",s.Ld="1",j([It("addInitialDom")],s.prototype,"addInitialDom",null),s})(),Uf=(()=>{class s extends xt{constructor(t,e,i){super(),this.Yt=t,this.yt=e,this.U=i,this.Hc=!1,this.Yn={},this.DE=r=>{if(r.length!==0)for(let o of r){let{metadata:c,events:l}=o;this.kE(c.rt)&&this.U.send(l,c)}},window.addEventListener("focus",()=>{this.recover()})}onStart(){this.Yn={}}onStop(){}recover(){this.Yt.recover(this.DE)}addBatchInProgress(t,e,i){this.Yn[t]={metadata:{...e},events:i}}removeBatchInProgress(t){delete this.Yn[t]}blockSendingLastMessage(){this.Hc=!1}allowSendingLastMessage(){this.Hc=!0}sendLastMessageBeacon(){if(this.Hc){let{ri:t,rst:e,let:i,...r}=this.U.getQueryParams();r.hlm="true",this.yt.setQueryParams(r),this.yt.send()}}kE(t){return!!t&&csString.prototype.indexOf.call(t,U.RECORDING_TEMPORARILY)===-1}saveBatchesInProgress(){csArray.prototype.forEach.call(Object.keys(this.Yn),t=>{let{metadata:e,events:i}=this.Yn[t];this.Yt.save({key:`${e.sn}.${e.pn}.${e.ri}`,metadata:{...e,datatype:"json"},events:csJSON.stringify(i)})})}save(t){this.Yt.save(t)}}return j([P("RecordingRecovery")],s.prototype,"recover",null),s})(),Si=(()=>{class s{constructor(...t){this.Ud=t}addProvider(t){csArray.prototype.push.call(this.Ud,t)}getRequestParameters(){return csArray.prototype.reduce.call(this.Ud,(t,e)=>({...e.getRequestParameters(),...t}),{})}}return s})(),Vf=(()=>{class s{constructor(t,e){this.Rt=t,this.I=e,this.ks=[{boundElement:window,type:"hashchange",listener:()=>this.hashChangeListener()},{boundElement:document,type:"visibilitychange",listener:()=>this.visibilityChangeListener()}]}onEvent(t){this.O=t}start(){this.li(),this.triggerInitialEvents()}stop(){this.hi()}li(){csArray.prototype.forEach.call(this.ks,t=>ft(t))}hi(){csArray.prototype.forEach.call(this.ks,t=>gt(t))}triggerInitialEvents(){this.hashChangeListener()}hashChangeListener(){let t={type:L.HASH_CHANGE,args:[this.I.anonymizePII(this.Rt.href)],date:M.now()};this.O(t)}visibilityChangeListener(){let t={type:L.VISIBILITY_CHANGE,args:[document.visibilityState],date:M.now()};this.O(t)}}return j([P("hashChange")],s.prototype,"hashChangeListener",null),j([P("visibilityChange")],s.prototype,"visibilityChangeListener",null),s})(),jf=(()=>{class s{constructor(){}onScannedAsset(t){this.To=t}scanCssString(t){this.Bc(hi(t))}scanElement(t,e){k.getMaskedElementDetails(t).state!==k.MaskedElementState.NotMasked||e&&k.isMaskedAttribute(t,e)||(pn(t)?this.LE(t):Nr(t)?this.xE(t,e):(this.UE(t,e),this.VE(t,e),this.jE(t,e)))}xE(t,e){var i;if((!e||e==="href")&&t.href){let o={assetId:((i=t.sheet)===null||i===void 0?void 0:i.href)||t.href,assetBasePath:window.location.href,assetRawPath:Bc(t)};this.To({type:"stylesheet",asset:o})}}LE(t){var e;let i=new Set;if(t.textContent)for(let o of hi(t.textContent))i.add(o);let r;try{r=(e=t.sheet)===null||e===void 0?void 0:e.cssRules}catch(o){o.name==="SecurityError"||o.name==="InvalidAccessError"||B.error(o.message)}if(r)for(let o=0;o<r.length;o++){let c=r.item(o).cssText;for(let l of hi(c))i.add(l)}this.Bc(rs(i))}Fc(t){return!this.HE(t)&&!Jt(t)&&!Xp(t)}UE(t,e){if(Ru(t)||Tu(t)){if(!e||e==="src"){let i=t.getAttribute("src");if(i&&this.Fc(i)){let r={assetId:t.src,assetRawPath:i,assetBasePath:window.location.href};this.To({type:"asset",asset:r})}}(!e||e==="srcset")&&t.srcset&&this.BE(t.srcset)}}VE(t,e){if(t.nodeType!==1){pt.warn(`StaticResourceUrlTracker: Wrong element nodeType: ${t==null?void 0:t.nodeName}/${t.nodeType}`);return}if(t.hasAttribute&&(!e||e==="style")&&t.hasAttribute("style")){let i=t.getAttribute("style");if(typeof i=="string")this.scanCssString(i);else throw new Error("Unexpected style: "+t.outerHTML)}}BE(t){this.Bc(Wr(t))}jE(t,e){if((Ou(t)||Nu(t)||Mu(t))&&(!e||e==="href"||e==="xlink:href")){let i=t.getAttribute("href")||t.getAttribute("xlink:href");if(i&&this.Fc(i)){let r={assetId:ge(i),assetRawPath:i,assetBasePath:window.location.href};this.To({type:"asset",asset:r})}}}Bc(t){return csArray.prototype.forEach.call(csArray.prototype.map.call(csArray.prototype.filter.call(t,e=>this.Fc(e)),e=>({rawUrl:e,absoluteUrl:ge(e)})),e=>{let i={assetId:e.absoluteUrl,assetBasePath:window.location.href,assetRawPath:e.rawUrl};this.To({type:"asset",asset:i})})}HE(t){return/^https:\/\/\w+:\w+@/.test(t)}}return s})(),Hf=(()=>{class s{constructor(t=Number.POSITIVE_INFINITY){this.Ls=[],this.Z=[],this.FE=t}next(t){this.Z.length===this.FE&&csArray.prototype.shift.call(this.Z),csArray.prototype.push.call(this.Z,t),this.Z.length===1&&csSetTimeout(()=>this.clear());for(let e of this.Ls)e(t)}subscribe(t){if(pe(this.Ls,i=>t===i))return()=>{this.Ls=csArray.prototype.filter.call(this.Ls,i=>i!==t)};csArray.prototype.push.call(this.Ls,t);for(let i of this.Z)t(i);return()=>{this.Ls=csArray.prototype.filter.call(this.Ls,i=>i!==t)}}clear(){this.Z=[]}hasObservers(){return this.Ls.length>0}}return s})(),Yc=(()=>{var s;class n{constructor(e){this.S=e}observe(){this.zE=s.Xn.subscribe(e=>this.S(e)),s.Ro||(s.Ro=!0,s.Kn.observe(),Zt(document,NodeFilter.SHOW_ELEMENT).visitAll(i=>{s.ps.add(i),s.Xn.next(i)}))}disconnect(){s.Ro&&(this.zE(),s.Xn.hasObservers()||(s.Ro=!1,s.Kn.disconnect(),s.Xn.clear(),s.ps.clear()))}}return s=n,n.ps=new _n,n.Xn=new Hf,n.$E=vs(t=>{zt(()=>{for(let e of t)e.type==="childList"&&X(e.addedNodes,i=>{Zt(i,NodeFilter.SHOW_ELEMENT).visitAll(o=>{s.ps.has(o)||(s.ps.add(o),s.Xn.next(o))})})})},"ElementObserver.findAllElements"),n.Ro=!1,n.Kn=new ye(s.$E),tt([P()],n.prototype,"observe",null),tt([P()],n.prototype,"disconnect",null),n})(),Bf=1,Ff=0,Xc=(()=>{class s{constructor(t,e=Bf,i=Ff){this.GE=t,this.qE=e,this.WE=i,this.Ve=new zs,this.Le=!1,this.zc=0,this.Vd=()=>{for(this.zc=0;this.Ve.length;){if(this.zc>=this.qE){csSetTimeout(this.Vd,this.WE);return}let r=M.elapsed(),o=this.Ve.pop();if(!o)break;this.runTask(o);let c=M.elapsed()-r;this.zc+=c}this.Le=!1}}schedule(t,e=!1){if(!this.GE||e){t();return}Mt.general.pendingTasks.increase(),this.Ve.push(t),this.YE()}YE(){this.Le||(this.Le=!0,csSetTimeout(()=>{this.Vd()}))}runTask(t){Mt.general.pendingTasks.decrease(),t()}runPendingTasks(){this.Ve.forEach(t=>{this.runTask(t)}),this.Ve.clear()}clearQueue(){Mt.general.pendingTasks.clear(),Mt.mutations.pendingMutations.clear(),this.Ve.clear()}isEmpty(){return this.Ve.length===0}}return j([P("TaskScheduler"),It("runTask")],s.prototype,"runTask",null),j([It("runPendingTasks")],s.prototype,"runPendingTasks",null),s})(),zf=(()=>{class s{constructor(){this.B=!1,this.jd=new Xr(t=>t.type==="cssRuleInserted"&&this.XE(t)),this.KE=wn(t=>{this.B&&t.length>0&&this.R.schedule(()=>X(t,e=>this.Jn.scanElement(e)))}),this.JE=({type:t,asset:e})=>{var i,r,o;t==="stylesheet"&&((i=this.QE)===null||i===void 0||i.call(this,e)),(r=this.ZE)===null||r===void 0||r.call(this,e);let c={date:M.now(),type:L.STATIC_RESOURCE_URL,args:[e.assetId]};(o=this.O)===null||o===void 0||o.call(this,c)},this.R=new Xc(!0,30,0),this.Qn=new Yc(t=>this.tS(t)),this.P=new ye(t=>this.Co(t)),this.Jn=new jf,this.Jn.onScannedAsset(this.JE)}onEvent(t){this.O=t}onAsset(t){this.ZE=t}onStyleSheetFound(t){this.QE=t}start(){this.B||(this.B=!0,this.jd.observe(),this.Qn.observe(),this.P.observe())}stop(){this.B&&(this.jd.disconnect(),this.Qn.disconnect(),this.P.disconnect(),this.B=!1)}XE(t){!t.rule||!this.B||this.Jn.scanCssString(t.rule)}tS(t){this.B&&k.getMaskedElementDetails(t).state===k.MaskedElementState.NotMasked&&this.KE.push(t)}Co(t){csSetTimeout(()=>{for(let e of t)switch(e.type){case"attributes":this.Jn.scanElement(e.target,e.attributeName);break;case"characterData":this.eS(e.target);break;case"childList":}})}eS(t){tn(t)&&csNodeparentNode.apply(t)&&pn(csNodeparentNode.apply(t))&&this.Jn.scanCssString(t.data)}}return s})(),Kc=(()=>{class s{constructor(t){this.Hd=[],this.Bd=[],this.qt={},this.Wt=t}setQueryParams(t){csArray.prototype.forEach.call(Object.keys(t),e=>{this.qt[e]=t[e]})}removeQueryParams(t){t?csArray.prototype.forEach.call(t,e=>{delete this.qt[e]}):this.qt={}}onBeaconSuccess(t){csArray.prototype.push.call(this.Hd,t)}onBeaconFailure(t){csArray.prototype.push.call(this.Bd,t)}send(t){let e=Ei.toQuery({...this.qt,ct:yn.UNCOMPRESSED}),i=this.sS(e,t);return i?csArray.prototype.forEach.call(this.Hd,r=>r()):csArray.prototype.forEach.call(this.Bd,r=>r(this.qt)),i}sS(t,e){try{if(typeof csNavigatorsendBeacon!="function")return!1;let i=csNavigatorsendBeacon(`${this.Wt}?${t}`,e||"");if(i)return i}catch{}return typeof navigator.sendBeacon!="function"?!1:navigator.sendBeacon(`${this.Wt}?${t}`,e||"")}}return s})(),$f=(()=>{class s{constructor(t){this.Io={},this._e=new qr(t)}save({key:t,metadata:e,events:i}){this._e.isThresholdReached()||(this._e.addString(t),typeof i=="string"?this._e.addString(i):this._e.addArrayBuffer(i),!this._e.isThresholdReached()&&(this.Io[t]={metadata:e,events:i}))}recover(t){let e=[];csArray.prototype.forEach.call(this.iS(),i=>{let r=this.Io[i];r!==void 0&&(delete r.metadata.datatype,csArray.prototype.push.call(e,r),this.nS(i))}),e.length!==0&&(t(e),this._e.reset())}iS(){return Object.keys(this.Io)}nS(t){delete this.Io[t]}}return s})(),Ge=(()=>{let s;return function(n){n[n.NOT_STARTED=0]="NOT_STARTED",n[n.OPEN_IN_PROGRESS=1]="OPEN_IN_PROGRESS",n[n.OPEN_FAILED=2]="OPEN_FAILED",n[n.READY=3]="READY"}(s||(s={})),s})(),Gf=(()=>{class s{constructor(t,e,i){this.Fi=t,this.rS=i,this.mi=Ge.NOT_STARTED,this.Po=[],this.$c=0,this.oS=self.origin,this.we=typeof window=="object"?"":"worker-",this._e=new qr(e),this.Gc()}async Gc(){await this.Fd(),this.mi===Ge.READY?this.aS():this.rS(this.Po)}aS(){csArray.prototype.forEach.call(this.Po,t=>{this.save(t)}),this.Po=[]}async save(t){try{if(this.mi===Ge.OPEN_IN_PROGRESS){csArray.prototype.push.call(this.Po,t);return}if(this.mi!==Ge.READY||this._e.isThresholdReached())return;let{key:e,metadata:i,events:r}=t;if(this._e.addString(e),typeof r=="string"?this._e.addString(r):this._e.addArrayBuffer(r),this._e.isThresholdReached())return;await this.Qt.put(`${this.oS}/${e}`,new Response(r,{headers:i}))}catch{}}async recover(t){!this.Qt&&(await this.Fd(),this.mi!==Ge.READY)||this.cS(t)}async Fd(){try{this.mi=Ge.OPEN_IN_PROGRESS,this.Qt=await self.caches.open(`${this.we}${this.Fi}`),this.mi=Ge.READY}catch{this.mi=Ge.OPEN_FAILED}}async cS(t){try{if(this.$c++,this.$c>1)return;let e=await this.Qt.keys();if(e.length===0)return;let i=await this.Qt.matchAll(),r=csArray.prototype.map.call(i,c=>{let l={};c.headers.forEach((g,d)=>{l[d]=g}),delete l["content-type"];let h=l.datatype;return delete l.datatype,h==="json"||h==="base64"?c.text().then(g=>({metadata:l,events:g})):c.arrayBuffer().then(g=>({metadata:l,events:g}))}),o=await Promise.all(r);await Promise.all(csArray.prototype.map.call(e,c=>this.Qt.delete(c))),t(o),this._e.reset()}catch{}finally{this.$c--}}}return s})(),qf=(()=>{class s{constructor(t){try{this.lS(t)}catch{this.qc()}}lS(t){self.caches?this.hS(t):this.qc()}save(t){this.Oo.save(t)}recover(t){this.Oo.recover(t)}hS(t){this.Oo=new Gf(t,s.zd,e=>{this.qc(e)})}qc(t){this.Oo=new $f(s.zd),t&&csArray.prototype.forEach.call(t,e=>{this.Oo.save(e)})}}return s.zd=1024*1024*16,s})(),qn=(()=>{let s;return function(n){n.REQUEST_START="requestStart",n.DOM_INTERACTIVE="domInteractive",n.TIME_ORIGIN="timeOrigin"}(s||(s={})),s})();var Wf=(()=>{class s extends qs{isListening(t){return Ai.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded")}processEvent(t){let e=0,i=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes;for(let r of i){if(r instanceof Ls){let c=k.getMaskedAttributeDetails(r);r.attributes=this.Do(r,c)}if(k.getMaskedElementDetails(r).state===k.MaskedElementState.Child){if(t.domEvent==="initialDOM")return null;t.nodes=csArray.prototype.filter.call(t.nodes,c=>c!==r);continue}Y.traverse(r,c=>{if(c instanceof Ls){let l=k.getMaskedAttributeDetails(c);c.attributes=this.Do(c,l);let h=k.getMaskedElementDetails(c);h.state===k.MaskedElementState.Parent&&(this.Yc(c,h),e++)}})}return e>0&&lt.counters.sensitiveElements.count("masked-elements",e),t}Do(t,e){return e.attributes.length===0?t.attributes:csArray.prototype.filter.call(t.attributes,i=>csArray.prototype.indexOf.call(e.attributes,i.name)===-1)}Yc(t,e){let i=`width: ${e.width}px !important; height: ${e.height}px !important;`;t.children=[],t.shadowRoot=void 0,csArray.prototype.push.call(t.attributes,{name:"style",value:i,namespaceURI:""}),Ls.getAttribute(t,"data-cs-mask")||csArray.prototype.push.call(t.attributes,{name:"data-cs-mask",value:"",namespaceURI:""})}}return Ne([It("MaskedElementProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Ae=(()=>{let s;return function(n){n.ANONYMIZED_TEXT_STATUS_PROP="anonymizationStatus",n.WHITELISTED_STATUS="whitelisted";function t(r){return Y.getProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP)===n.WHITELISTED_STATUS}n.isWhitelistedElement=t;function e(r){Y.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,n.WHITELISTED_STATUS)}n.whitelistElement=e;function i(r){Y.setProperty(r,n.ANONYMIZED_TEXT_STATUS_PROP,void 0)}n.removeWhitelistElement=i}(s||(s={})),s})(),Yf=/[\u4E00-\u9FFF]|[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]/g,Xf="\uFF41",Kf=/[^\s]/g,Jf="a";function Wn(s){let n=csString.prototype.replace.call(s,Yf,Xf);return csString.prototype.replace.call(n,Kf,Jf)}var Qf=["id","class","style","srcset","sizes","rel","type","width","height","media","align","dir","bgcolor","color","border","colspan","rowspan","cols","rows","size","start","slot","data-cs-override-id"],Jc=s=>{let n=new Set(Qf);return csArray.prototype.forEach.call(s,t=>{n.add(t)}),n},Zf=["svg","slot"],tg=(s,n,t)=>t==="radio"&&s==="input"&&n==="name"||csArray.prototype.indexOf.call(Zf,s)>-1,Qc={href:new Set(["a"]),src:new Set(["iframe"])},eg=s=>Qc.hasOwnProperty(s),sg=(s,n,t)=>{var e;return((e=Qc[n])===null||e===void 0?void 0:e.has(s))&&!Jt(t)},ig=(s,n,t)=>(t==="submit"||t==="button")&&s==="input"&&n==="value",ng=(()=>{class s{constructor(t,e,i,r=null){this.Ye=t,this.ES=e,this.I=i,this.ko=r,this.SS=Jc(this.ES)}sanitize(t,e){return Y.traverse(t,(i,r)=>{if(i.anonymized=this.Ye,i.nodeType===3){let{anonymizedValue:o,withAnonymization:c}=this.getAnonymizedValue(i.data,r?r==null?void 0:r.localName:e==null?void 0:e.targetLocalName,r?Y.getProperties(r):e==null?void 0:e.targetProps);i.anonymized=c,i.data=o;return}if(Ls.isElement(i))return this.vS(i);if(i.nodeType===4){i.data=this.Ye?Wn(i.data):this.I.checkAndAnonymizePII(i.data,this.ko);return}}),t}setAnonymization(t){this.Ye=t}getAnonymizedValue(t,e,i){if(e==="style")return{anonymizedValue:t,withAnonymization:!1};let r=(i==null?void 0:i[Ae.ANONYMIZED_TEXT_STATUS_PROP])===Ae.WHITELISTED_STATUS;return this.Ye&&!r?{anonymizedValue:Wn(t),withAnonymization:!0}:{anonymizedValue:this.I.checkAndAnonymizePII(t,this.ko),withAnonymization:!1}}vS(t){if(Y.getProperty(t,"SVG"))return;let e=pe(t.attributes,r=>r.name==="type"),i=e==null?void 0:e.value;t.attributes=csArray.prototype.map.call(t.attributes,r=>(r.anonymized=this.Ye,r.value=this.getAnonymizedAttributeValue(t.localName,r.name,r.value,i),r))}getAnonymizedAttributeValue(t,e,i,r){return this._S(t,e,r)?i:eg(e)?sg(t,e,i)?this.I.anonymizePII(i):i:this.Ye&&ig(t,e,r)?Wn(i):this.Ye?"":this.I.checkAndAnonymizePII(i,null)}_S(t,e,i){return tg(t,e,i)||this.SS.has(e)}}return s})(),Ea=(()=>{class s{static create(t,e){if(!s.isSupported())throw new Error("IntersectionObserver is not supported");if(e&&e.delay&&e.delay<100)throw new Error("Visibility delay should be > 100ms");return e!=null&&e.trackVisibility&&(t=s.wS(t)),new IntersectionObserver(t,e)}static isSupported(){return!!window.IntersectionObserver&&!!window.IntersectionObserverEntry}static wS(t){return(e,i)=>t(Te(e,rg),i)}}return s})();function rg(s){return s.isVisible||!rt.isVisibleInViewportInForeground(s.target)?s:{boundingClientRect:s.boundingClientRect,intersectionRatio:s.intersectionRatio,intersectionRect:s.intersectionRect,isIntersecting:s.isIntersecting,rootBounds:s.rootBounds,target:s.target,time:s.time,isVisible:!0}}var vr=()=>(s,n,t)=>{t.value=ag(t.value)},og=csQueueMicrotask||csSetTimeout;function ag(s){let n=csSymbol("oncePerTickSymbol"),t=null,e={},i=function(){var r;let o=(r=this)!==null&&r!==void 0?r:e;if(t=arguments,o[n])return;o[n]=!0,og(()=>{o[n]=!1,s.apply(o,t)})};return i.oncePerTickSymbol=n,i}vr.isScheduled=(s,n)=>{let t=n.oncePerTickSymbol;return s[t]};var cg=(()=>{class s{constructor(t){this.S=t,this.xs=new Map,this.$d=e=>{let i=e.target;if(this.xs.has(i))return!0;let r=!1;return this.xs.forEach((o,c)=>{r||!this.xs.get(c).subtree||(r=c.contains(i))}),r},Mt.general.nbOfMutationObservers.increase(),this.P=new csMutationObserver(e=>{vr.isScheduled(this,this.garbageCollect)&&(e=yi(e,this.$d)),e.length&&zt(()=>t(e,this))})}disconnect(){Mt.general.nbOfMutationObservers.decrease(),this.P.disconnect(),this.xs=new Map}takeRecords(){return this.P.takeRecords()}observe(t,e){return Mt.mutations.elementMutationObserved.increase(),this.xs.set(t,e),this.P.observe(t,e)}unobserve(t){this.xs.has(t)&&(Mt.mutations.elementMutationObserved.decrease(),this.xs.delete(t),this.garbageCollect())}garbageCollect(){Mt.mutations.unobserveGarbageCollection.measure(()=>{let t=yi(this.takeRecords(),this.$d);t.length&&this.S(t,this),this.P.disconnect(),this.xs.forEach((e,i)=>this.P.observe(i,e))})}}return tt([vr()],s.prototype,"garbageCollect",null),s})(),lg=(()=>{class s{constructor(t){this.S=t,this.Lo=new Set}onMutations(t){if(on(t,e=>{var i;return!!(!((i=e.removedNodes)===null||i===void 0)&&i.length)}))for(let e of this.Lo.values())rt.isConnected(e)||(this.Lo.delete(e),this.S(e))}observe(t){this.F||(this.F=new ye(e=>csSetTimeout(()=>this.onMutations(e))),this.F.observe()),this.Lo.add(t)}disconnect(){var t;(t=this.F)===null||t===void 0||t.disconnect(),this.Lo.clear(),this.F=void 0}}return tt([P("NodeDisconnectedObserver.onMutations")],s.prototype,"onMutations",null),s})(),hg=300,ln=(()=>{class s{constructor(t){this.xo=new Set,this.bS=new lg(e=>this.Gd(e)),this.B=!1,this.Et=t?{...Sa,...t}:Sa}stop(){var t,e;this.B=!1,(t=this.ir)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect()}start(t){if(this.B)throw new Error("VisibilityObserver is already started");this.S=Pe("VisibilityObserver:callback",(i,r)=>t(i,r));let e={root:null,rootMargin:"0px",threshold:.5,trackVisibility:!0,delay:hg};this.ir=Ea.create(i=>this.handleIntersection(i),e),this.P=new cg(i=>csSetTimeout(()=>{X(i,r=>this.Gd(r.target))})),this.Gc(),this.B=!0}observe(t){if(!this.B)throw new Error("Observer is stopped.");this.Et.reobserve===!1&&t[this.Xc]||(Mt.visibilityObserver.nbElements.increase(),t[this.Xc]=!0,this.watchIntersection(t))}Gc(){this.Uo=csSymbol("isVisible"),this.Xc=csSymbol("ObservedElement"),this.Kc=csSymbol("LinkedElement"),this.qd=csSymbol("Tracked")}Gd(t){this.xo.add(t);for(let e of this.AS(t))this.xo.add(e);this.recheckCssVisibilityAll()}recheckCssVisibilityAll(){X(this.xo.keys(),t=>{!t.isConnected||rt.areAncestorsHiddenByCSS(t)||t[this.Xc]&&this.watchIntersection(t)}),this.xo.clear()}watchIntersection(t){this.P.unobserve(t),this.ir.unobserve(t);let e=rt.getTopAncestorHiddenByCSS(t);e?(e!==t&&(this.Wd(e,t),this.watchMutation(e)),this.watchMutation(t)):this.ir.observe(t)}watchMutation(t,e=!0){e&&delete t[this.Uo],this.ir.unobserve(t);let i={attributeFilter:["style","class","hidden"]};this.P.observe(t,i)}handleIntersection(t){for(let e of t){let i=e.target;if(!e.isVisible){rt.isVisibleInDocument(i)||this.TS(i);continue}let r=this.Et.allowSameMatch||!e.target[this.Uo];e.target[this.Uo]=!0,r&&!this.Et.delay&&this.onVisibilityChanged(e.target,pi.VisibleInViewPort)}this.Et.delay&&csSetTimeout(()=>{for(let e of t){let i=e.isIntersecting&&e.isVisible;e.target[this.Uo]&&i&&this.onVisibilityChanged(e.target,pi.VisibleInViewPort)}},this.Et.delay)}TS(t){Mt.visibilityObserver.hiddenElements.increase();let e=rt.getTopElement(t);this.watchMutation(t),e&&(this.bS.observe(e),this.Wd(e,t),this.watchMutation(e,!1))}Wd(t,e){var i;(t[this.Kc]=(i=t[this.Kc])!==null&&i!==void 0?i:new Set).add(e)}AS(t){var e,i;let r=[],o=(i=(e=t[this.Kc])===null||e===void 0?void 0:e.values())!==null&&i!==void 0?i:[];return X(o,c=>csArray.prototype.push.call(r,c)),r}onVisibilityChanged(t,e){if(e===pi.VisibleInViewPort&&this.Et.trackOnce){if(this.ir.unobserve(t),this.P.unobserve(t),t[this.qd])return;t[this.qd]=!0}this.S(t,e)}static isSupported(){return Ea.isSupported()}}return tt([P()],s.prototype,"observe",null),tt([Sn({wait:50}),P(),It("recheckCssVisibilityAll")],s.prototype,"recheckCssVisibilityAll",null),tt([P()],s.prototype,"watchIntersection",null),tt([P()],s.prototype,"watchMutation",null),tt([P(),It("VisibilityObserver.handleIntersection")],s.prototype,"handleIntersection",null),tt([P()],s.prototype,"onVisibilityChanged",null),s})(),pi=(()=>{let s;return function(n){n.VisibleInViewPort="VisibleInViewPort",n.HiddenByAnother="HiddenByAnother",n.Hidden="Hidden"}(s||(s={})),s})(),Sa={delay:1e3,trackOnce:!0,reobserve:!1};var ug=(()=>{let s;return function(n){n.ENCRYPTED_NODE_PROP="toEncrypt";function t(r){return Y.getProperty(r,n.ENCRYPTED_NODE_PROP)===!0}n.shouldEncrypt=t;function e(r){Y.setProperty(r,n.ENCRYPTED_NODE_PROP,!0)}n.markEncryptedNode=e;function i(r){Y.setProperty(r,n.ENCRYPTED_NODE_PROP,void 0)}n.unmarkEncryptedNode=i}(s||(s={})),s})(),Ke=(()=>{let s;return function(n){n.EDITABLE_NODE_PROP="editableNode";function t(r){return Y.getProperty(r,n.EDITABLE_NODE_PROP)===!0}n.isEditableNode=t;function e(r){Y.setProperty(r,n.EDITABLE_NODE_PROP,!0)}n.markEditableNode=e;function i(r){Y.setProperty(r,n.EDITABLE_NODE_PROP,void 0)}n.unmarkEditableNode=i}(s||(s={})),s})();var va=(()=>{let s;return function(n){function t(e){return e.type==="TextVisibility"}n.isTextVisibilityEvent=t}(s||(s={})),s})(),dg=(()=>{class s extends qs{constructor(t,e,i,r=null){super(),this.I=i,this.ko=r,this.Vo=new ng(t,e,i,r)}setAnonymization(t){this.Vo.setAnonymization(t)}isListening(t){return va.isTextVisibilityEvent(t)||Ai.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="attributeChanged"||t.domEvent==="characterDataChanged")}processEvent(t){if(va.isTextVisibilityEvent(t))return t.text=this.I.checkAndAnonymizePII(t.text,this.ko),t;switch(t.domEvent){case"initialDOM":case"nodesAdded":this.Zc(t);break;case"attributeChanged":this.CS(t);break;case"characterDataChanged":this.IS(t);break}return t}Zc(t){let e=t.domEvent==="initialDOM"?[t.initialDOM]:t.nodes,i;t.domEvent==="nodesAdded"&&(i={targetLocalName:t.targetLocalName,targetProps:t.targetProps});for(let r of e)this.Vo.sanitize(r,i)}CS(t){if(!t.isSvg&&t.newValue){if(t.localName===null){t.newValue="";return}t.newValue=this.Vo.getAnonymizedAttributeValue(t.localName,t.attribute,t.newValue,t.inputType)}}IS(t){t.newValue=this.Vo.getAnonymizedValue(t.newValue,t.parentLocalName,t.parentProps).anonymizedValue}}return Ne([It("AnonymizedTextProcessor.processEvent")],s.prototype,"processEvent",null),s})();var pg=(()=>{class s extends qs{constructor(t){super(),this.K=t}isListening(t){return Ai.isDOMEvent(t)&&t.domEvent==="initialDOM"}processEvent(t){return t.domEvent==="initialDOM"&&(t.initialDOM.baseURI=this.K.anonymizeUrl(t.initialDOM.baseURI)),t}}return Ne([It("UrlAnonymizationProcessor.processEvent")],s.prototype,"processEvent",null),s})(),Yn="textarea",fg=(()=>{class s extends qs{isListening(t){return Ai.isDOMEvent(t)&&(t.domEvent==="initialDOM"||t.domEvent==="nodesAdded"||t.domEvent==="characterDataChanged")}processEvent(t){switch(t.domEvent){case"initialDOM":this.OS(t);break;case"nodesAdded":this.NS(t);break;case"characterDataChanged":this.MS(t);break}return t}OS(t){Y.traverse(t.initialDOM,(e,i)=>{(this.Kd(e,i)||this.Jd(e))&&(e.data=this.tl(e.data))})}NS(t){for(let e of t.nodes)Y.traverse(e,(i,r)=>{(this.DS(i,r,t)||this.Jd(i))&&(i.data=this.tl(i.data))})}MS(t){var e;(t.parentLocalName===Yn||!((e=t.targetProps)===null||e===void 0)&&e.editableNode)&&(t.newValue=this.tl(t.newValue))}tl(t){return csString.prototype.replace.call(t,/\S/g,"\u2022")}DS(t,e,i){return this.kS(t,i)||this.Kd(t,e)}kS(t,e){return t.nodeType===3&&e.targetLocalName===Yn}Kd(t,e){return t.nodeType===3&&W(e)&&e.localName===Yn}Jd(t){return t.nodeType===3&&Ke.isEditableNode(t)}}return Ne([It("AnonymizedEditableTextProcessor.processEvent")],s.prototype,"processEvent",null),s})(),gg=(()=>{class s{constructor(t){this.S=t,this.Vt={boundElement:window,type:"resize",listener:()=>this.resizeListener()},this.S=t}observe(){ft(this.Vt),this.Ec()}Ec(){this.resizeListener()}disconnect(){gt(this.Vt)}resizeListener(){let t={width:Tt.windowWidth(),height:Tt.windowHeight()};this.S(t)}}return tt([P("resize")],s.prototype,"resizeListener",null),s})(),Ye=(()=>{let s;return function(n){n.PORTRAIT="Portrait",n.LANDSCAPE="Landscape"}(s||(s={})),s})(),ji=(()=>{let s;return function(n){n.PORTRAIT_PRIMARY="portrait-primary",n.PORTRAIT_SECONDARY="portrait-secondary",n.LANDSCAPE_PRIMARY="landscape-primary",n.LANDSCAPE_SECONDARY="landscape-secondary"}(s||(s={})),s})(),Hi=(()=>{let s;return function(n){n[n.PORTRAIT=0]="PORTRAIT",n[n.PORTRAIT_REVERSE=180]="PORTRAIT_REVERSE",n[n.LANDSCAPE=-90]="LANDSCAPE",n[n.LANDSCAPE_REVERSE=90]="LANDSCAPE_REVERSE"}(s||(s={})),s})(),mg=(()=>{let s;return function(n){let t=null;n.isScreenOrientationApiSupported=()=>{var c;return t!=null?t:t=!!(!((c=at.screen)===null||c===void 0)&&c.orientation)},n.isDeprecatedScreenOrientationApiSupported=()=>"orientation"in at;function e(){return Ye.LANDSCAPE}function i(){var c;switch((c=at.screen.orientation)===null||c===void 0?void 0:c.type){case ji.PORTRAIT_PRIMARY:case ji.PORTRAIT_SECONDARY:return Ye.PORTRAIT;case ji.LANDSCAPE_PRIMARY:case ji.LANDSCAPE_SECONDARY:return Ye.LANDSCAPE;default:return Ye.PORTRAIT}}function r(){switch(window.orientation){case Hi.PORTRAIT:case Hi.PORTRAIT_REVERSE:return Ye.PORTRAIT;case Hi.LANDSCAPE:case Hi.LANDSCAPE_REVERSE:return Ye.LANDSCAPE;default:return Ye.PORTRAIT}}function o(){return n.isScreenOrientationApiSupported()?i():n.isDeprecatedScreenOrientationApiSupported()?r():e()}n.getCurrentOrientation=o}(s||(s={})),s})(),yg=(()=>{class s extends Ee{constructor(){super(...arguments),this.sl=null,this.il=null,this.Vs=new gg(t=>{this.produceEvent({...t,type:"viewportResize"}),this.onScreenPotentiallyChanged()})}onScreenPotentiallyChanged(){let t=mg.getCurrentOrientation(),{screenWidth:e,screenHeight:i}=this.LS(t);if(e!==this.sl||i!==this.il){this.sl=e,this.il=i;let r={type:"screenResize",width:e,height:i};this.produceEvent(r)}}LS(t){let e,i,r=Tt.screenWidth(),o=Tt.screenHeight();return t===Ye.PORTRAIT?(e=r,i=o):(e=Math.max(r,o),i=Math.min(r,o)),{screenWidth:e,screenHeight:i}}onStart(){this.Vs.observe()}onStop(){this.sl=null,this.il=null,this.Vs.disconnect()}}return s})();function Eg(s){let n=csEventtarget.apply(s);return n&&dt(n)&&csElementshadowRoot.apply(n)&&s.composedPath?s.__csOriginalTarget||s.composedPath()[0]:n}var oe=(()=>{class s{get selectors(){return this.He===""?null:this.He}constructor(t,e={closest:!1}){this.S=t,this.Et=e,this.He="",this.nr=new _n,this.Co=vs(i=>{if(this.He==="")return;let r=[];for(let o of Ur(i,c=>c.addedNodes)){if(!(ku(o)||this.Et.closest&&tn(o)))continue;let c=this.Et.closest?this.xS(o,this.He):this.findMatchingElements(o,this.He);zo(c,r)}r.length&&this.S(r,"added")},"SelectorObserver.processMutations"),this.US=(i,r)=>{if(this.He===""||r!=="added")return;let o=this.findMatchingElements(i,this.He);o.length&&this.S(o,"added")},this.F=new ye(this.Co,this.US)}observe(t){this.He===""?this.F.observe():this.He+=",",this.He+=t;let e=this.findMatchingElements(document,t);for(let i of this.F.shadowRoots){let r=this.findMatchingElements(i,t);zo(r,e)}e.length&&(X(e,i=>{this.nr.add(i)}),this.S(e,"initial"))}processPendingMutations(){this.Co(this.F.takeRecords())}disconnect(){this.F.disconnect(),this.nr.clear(),this.He=""}xS(t,e){let i=[];if(tn(t)){if(t.parentElement){let r=Hs(t.parentElement,e);r&&csArray.prototype.push.call(i,r)}return csArray.prototype.filter.call(i,r=>this.nr.has(r)===!1)}else{if(Ie(t)){let r=Hs(t,e);if(r)return csArray.prototype.push.call(i,r),csArray.prototype.filter.call(i,o=>this.nr.has(o)===!1)}return this.findMatchingElements(t,e)}}findMatchingElements(t,e){let i=Us(window.csquerySelectorAll[t.nodeType].call(t,e));return dt(t)&&Wt.call(t,e)&&csArray.prototype.push.call(i,t),csArray.prototype.filter.call(i,r=>this.nr.has(r)===!1)}}return tt([P()],s.prototype,"observe",null),tt([P()],s.prototype,"disconnect",null),tt([It("SelectorObserver.findMatchingElements")],s.prototype,"findMatchingElements",null),s})(),Sg=(()=>{class s extends Ee{constructor(){super(),this.Qd=t=>{let e=Eg(t);e&&this.nl(e,t.type)},this.ne=new Gs((t,e)=>{switch(e){case"initial":case"added":this.Zd(t);break;case"removed":this.tp(t);break}}),this.V=new oe((t,e)=>{(e==="initial"||e==="added")&&this.VS(t)})}static shouldProcessElement(t){return t.tagName==="VIDEO"&&rt.isConnected(t)&&!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)}static isPlaying(t){return!t.paused&&!t.ended}onStart(){this.Zd(document),this.ne.observe(),this.V.observe("video")}onStop(){this.tp(document),this.ne.disconnect(),this.V.disconnect()}nl(t,...e){if(this.isStarted&&s.shouldProcessElement(t))for(let i of e){let r=nt(t),o={type:"VideoEvent",videoEventType:i,nodeId:r};i==="seeked"&&(o.newTimePositionInSec=t.currentTime),yr(()=>this.produceEvent(o))}}VS(t){for(let e of t)this.nl(e,"seeked"),s.isPlaying(e)&&this.nl(e,"play")}Zd(t){for(let e of["play","pause","seeked"])ft({type:e,listener:this.Qd,boundElement:t})}tp(t){for(let e of["play","pause","seeked"])gt({type:e,listener:this.Qd,boundElement:t})}}return s})();function vg(s){return s.nodeName==="SELECT"}function Kr(s){return s.nodeName==="INPUT"}function _g(s){return s.nodeName==="TEXTAREA"||Kr(s)&&!Zc(s)&&!tl(s)}function Zc(s){return Kr(s)&&s.type==="number"}function tl(s){return Kr(s)&&(s.type==="checkbox"||s.type==="radio")}var wg=(()=>{class s extends Ee{constructor(t){super(),this.tt=t,this.rl=new cf("low"),this.zi=e=>this.inputHandler(e),this.yi=[],this.jS(),this.HS(),this.V=new oe(e=>{for(let i of e)this.ol(i)&&zt(()=>{this.al(i,nt(i))},"low")}),this.ne=new Gs((e,i)=>{switch(i){case"initial":case"added":ft({type:"change",listener:this.zi,boundElement:e});break;case"removed":gt({type:"change",boundElement:e,listener:this.zi});break}})}onStart(){ft({type:"keyup",boundElement:document,listener:this.zi}),ft({type:"change",boundElement:document,listener:this.zi}),X(this.yi,t=>t.activate()),this.V.observe(csArray.prototype.join.call(s.BS,",")),this.ne.observe()}onStop(){gt({type:"keyup",boundElement:document,listener:this.zi}),gt({type:"change",boundElement:document,listener:this.zi}),X(this.yi,t=>t.deactivate()),this.V.disconnect(),this.ne.disconnect(),this.rl.clear()}al(t,e){var i,r,o;if(this.rl.has(t))return;if(this.rl.add(t),vg(t)){let h={type:"InputEvent",inputType:"select",target:nt(t),selectedIndex:t.selectedIndex,timestamp:M.now()};this.produceEvent(h);return}if(tl(t)){let h={type:"InputEvent",inputType:"checkable",target:nt(t),checked:t.checked,timestamp:M.now()};this.produceEvent(h);return}let c=_g(t),l=Zc(t);if(c||l){let h=(i=t.value)!==null&&i!==void 0?i:"";if(!((r=this.tt)===null||r===void 0)&&r.shouldEncrypt(t)){(o=this.tt)===null||o===void 0||o.registerInputNodeToEncrypt({targetId:e,targetValue:h,date:M.now()});return}let g=l?"0":"\u2022",d={type:"InputEvent",inputType:"text",target:nt(t),value:csString.prototype.replace.call(h,/\S/g,g),timestamp:M.now()};this.produceEvent(d)}}inputHandler(t){if(!this.isStarted)return;let e=Rt(t),i=nt(e);!i||!this.ol(e)||rt.isConnected(e)&&zt(()=>{this.al(e,i)},"low")}jS(){this.trackChanges(HTMLInputElement,"checked"),this.trackChanges(HTMLInputElement,"value"),this.trackChanges(HTMLTextAreaElement,"value")}HS(){this.trackChanges(HTMLSelectElement,"selectedIndex"),this.trackChanges(HTMLSelectElement,"value"),this.trackChanges(HTMLOptionElement,"selected",!0)}trackChanges(t,e,i=!1){let r=cn(t.prototype,e,(o,c,l)=>{if(l!==c&&rt.isConnected(o)){let h=i?o.parentElement:o;this.FS(h)}});r&&csArray.prototype.push.call(this.yi,r)}ol(t){return!k.isMaskedElement(t)&&!k.isMaskedElementChild(t)&&(fn(t)||Dr(t)||Mr(t))}FS(t){if(this.isStarted&&rt.isConnected(t)){let e=nt(t);e&&this.ol(t)&&zt(()=>{this.al(t,e)},"low")}}}return s.BS=["textarea","input:not([type])",'input[type="text"]','input[type="email"]','input[type="search"]','input[type="tel"]','input[type="url"]','input[type="password"]','input[type="number"]','input[type="checkbox"]','input[type="radio"]',"select"],Ne([ut()],s.prototype,"inputHandler",null),Ne([P()],s.prototype,"trackChanges",null),s})();var bg=(()=>{class s extends Ee{constructor(){super(),this.fs=typeof window.customElements=="object"&&typeof window.customElements.whenDefined=="function"&&typeof window.Promise=="function",this.zS=Pe("CustomElementRegistrationProducer:onElementsFound",e=>{for(let i of e)k.isMaskedElement(i)||k.isMaskedElementChild(i)||xu(i)&&this.register(csString.prototype.toLowerCase.call(i.tagName))});let t=wn(this.zS);this.Qn=new Yc(e=>t.push(e)),this.Us=new Set}onStart(){this.fs&&this.Qn.observe()}onStop(){this.Us.clear(),this.Qn.disconnect()}async register(t){this.Us.has(t)||(this.Us.add(t),await window.customElements.whenDefined(t),this.produceEvent({type:"CustomElementRegistration",tagName:csString.prototype.toLowerCase.call(t)}))}}return Ne([P()],s.prototype,"register",null),s})(),_a=(()=>{class s{static isNavigationTimingObserverSupported(){var t,e;return(((t=window.PerformanceObserver)===null||t===void 0?void 0:t.supportedEntryTypes)==null?void 0:csArray.prototype.indexOf.call((e=window.PerformanceObserver)===null||e===void 0?void 0:e.supportedEntryTypes,"navigation"))>=0}static getTimeOrigin(){return window.performance.timeOrigin}static ep(){if(this.isNavigationTimingObserverSupported())return new window.PerformanceObserver(t=>s.$S(t))}static $S(t){let i=t.getEntriesByType("navigation")[0];i&&(this.Ei=i,s.$i(i))}static Fn(t){this.GS(t),this.Ei&&t(this.Ei),this.Ne||this.qS()}static GS(t){this.Pt.add(t)}static WS(t){this.Pt.delete(t)}static qS(){if(this.rr||(this.rr=this.ep()),!this.rr){this.Ei||(this.Ei={requestStart:window.performance.timing.requestStart,domInteractive:window.performance.timing.domInteractive}),this.$i(this.Ei);return}this.rr.observe({type:"navigation",buffered:!0}),this.Ne=!0}static $i(t){this.Pt.forEach(e=>e(t))}static $n(t){this.WS(t),this.Pt.size===0&&this.tr()}static tr(){var t;this.Ne&&((t=this.rr)===null||t===void 0||t.disconnect(),this.Ne=!1,this.Ei=null,this.rr=this.ep())}constructor(t){this.S=t}observe(){s.Fn(this.S)}disconnect(){s.$n(this.S)}}return s.Ne=!1,s.Pt=new Set,s.Ei=null,s})(),Ag=(()=>{class s extends Ee{constructor(){super(...arguments),this.jo=null,this.sp=new _a(t=>{if(this.jo)return;let e=this.YS(t);e&&(this.jo=e,this.produceEvent(e))})}onStart(){if(this.jo){this.produceEvent(this.jo);return}this.sp.observe()}onStop(){this.sp.disconnect()}YS(t){let e=_a.getTimeOrigin();return{type:"PerformanceTiming",timings:{timeOrigin:e,requestStart:Math.floor(e+t.requestStart),domInteractive:Math.floor(e+t.domInteractive)},timestamp:M.now()}}}return s})(),At=(()=>{let s;return function(n){n[n.TAP=0]="TAP",n[n.LONG_PRESS=1]="LONG_PRESS",n[n.DRAG=2]="DRAG",n[n.FLICK=3]="FLICK",n[n.PINCH_IN=4]="PINCH_IN",n[n.PINCH_OUT=5]="PINCH_OUT"}(s||(s={})),s})(),Bi=(()=>{let s;return function(n){n[n.UP=1]="UP",n[n.DOWN=2]="DOWN",n[n.LEFT=3]="LEFT",n[n.RIGHT=4]="RIGHT"}(s||(s={})),s})(),Tg=(()=>{class s{compute(t,e){let i=this.js(e.x)-this.js(t.x),r=this.js(e.y)-this.js(t.y),o=e.time-t.time;return{duration:o,distance:this.ip(i,r),direction:this.XS(i,r),velocity:this.KS(i,r,o)}}computePinchMetrics(t,e){let i=this.js(e.x)-this.js(t.x),r=this.js(e.y)-this.js(t.y);return{duration:e.time-t.time,distance:this.ip(i,r)}}getScale(t,e){return Math.abs(e/t-1)}js(t){return t/window.devicePixelRatio}ip(t,e){return Math.round(Math.sqrt(t*t+e*e))}KS(t,e,i){let r=i/1e3,o=t/r,c=e/r;return Math.round(Math.abs(o)+Math.abs(c))}XS(t,e){return Math.abs(t)>Math.abs(e)?t>0?Bi.RIGHT:Bi.LEFT:e>0?Bi.DOWN:Bi.UP}}return s})(),el=typeof performance!="undefined"&&!!performance.now,wa=el?()=>performance.now():csDate.now,Rg=(()=>{var s;return el?(s=performance.timing)===null||s===void 0?void 0:s.navigationStart:0})(),Fi={now(){return Math.round(wa()+Rg)},elapsed(){return wa()}};function ba(s,n=0){let t=Math.pow(10,n);return Math.round(s*t)/t}var Cg=1e3,Ig=100,Pg=.1,_r=(()=>{class s{constructor(){this.jt={},this.cl=()=>{},this.Ho=new Tg,this.be()}static isGestureDetectionSupported(){return typeof devicePixelRatio!="undefined"}onGesture(t){this.cl=t}isValidTouchEvent(t){return"touches"in t&&"changedTouches"in t}processActionDown(t){if(!this.JS(t))return;this.QS(t)&&this.be();let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:Fi.now()};if(t.touches.length===1)this.jt.startPinchTime=e.time,this.jt.firstTouch=e;else if(t.touches.length===2&&(this.jt.secondTouch={x:t.touches[1].clientX,y:t.touches[1].clientY,time:Fi.now()},this.jt.firstTouch&&this.jt.secondTouch)){let i=this.Ho.computePinchMetrics(this.jt.firstTouch,this.jt.secondTouch);this.Gi=i.distance}csArray.prototype.push.call(this.or,e),this.Bo=Rt(t)}processActionMove(){this.ll=!0}processActionUp(t){if(this.ZS(t)){if(csArray.prototype.push.call(this.or,{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Fi.now()}),this.sv(t)&&this.jt.startPinchTime){let e={x:t.touches[0].clientX,y:t.touches[0].clientY,time:this.jt.startPinchTime},i={x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY,time:Fi.now()};this.jt.firstTouch&&(this.jt.firstTouch=e,this.jt.secondTouch=i),this.iv(t)}this.Gi||this.nv()&&this.rv(t)}}be(){this.or=[],this.Bo=null,this.ll=!1,this.Gi=null,this.ar=!0}rv(t){let e=this.Ho.compute(this.or[0],this.or[1]);this.ar=t.isTrusted;let i=this.ll?this.ov(e):this.av(e);if(this.cv(i.type,t.changedTouches)){let r=t.changedTouches[0];i.pageX=ba(r.pageX,1),i.pageY=ba(r.pageY,1)}this.cl(i,t)}iv(t){if(!(this.jt.firstTouch&&this.jt.secondTouch))return;let e=this.Ho.computePinchMetrics(this.jt.firstTouch,this.jt.secondTouch);this.ar=t.isTrusted;let i=this.lv(e);i&&this.cl(i,t)}lv(t){return!this.Gi||this.Ho.getScale(this.Gi,t.distance)<Pg?void 0:{type:this.Gi>t.distance?At.PINCH_IN:At.PINCH_OUT,target:this.Bo,distance:t.distance,isTrusted:this.ar}}ov(t){return{type:t.velocity<Ig?At.DRAG:At.FLICK,target:this.Bo,velocity:t.velocity,distance:t.distance,direction:t.direction,isTrusted:this.ar}}av(t){return{type:t.duration<Cg?At.TAP:At.LONG_PRESS,target:this.Bo,isTrusted:this.ar}}cv(t,e){return t===At.TAP&&e&&e.length===1}QS(t){return t.touches.length===1}nv(){return this.or.length===2}JS(t){return t.touches.length>0}ZS(t){return t.changedTouches.length>0}sv(t){return this.ll&&!!this.Gi&&t.changedTouches.length===1&&t.touches.length===1}}return s})(),Og="touchstart",Ng="touchmove",Mg="touchend",sl=(()=>{class s{constructor(t){this.S=t}observe(){s.np&&s.ul(this.S)}disconnect(){s.np&&s.dl(this.S)}static hv(t,e){csArray.prototype.forEach.call(rs(s.Pt),i=>i(t,e))}static ul(t){s.Pt.has(t)||(s.Pt.add(t),s.Pt.size===1&&(s.cr.onGesture(s.hv),csArray.prototype.forEach.call(s.ks,e=>ft(e))))}static dl(t){s.Pt.delete(t),s.Pt.size===0&&csArray.prototype.forEach.call(s.ks,e=>gt(e))}static pl(t){if(s.cr.isValidTouchEvent(t))switch(t.type){case"touchstart":s.cr.processActionDown(t);break;case"touchmove":s.cr.processActionMove();break;case"touchend":s.cr.processActionUp(t);break}}}return s.ks=[{boundElement:at.document,type:Og,listener:n=>s.pl(n)},{boundElement:at.document,type:Ng,listener:n=>s.pl(n)},{boundElement:at.document,type:Mg,listener:n=>s.pl(n)}],s.np=_r.isGestureDetectionSupported(),s.Pt=new Set,s.cr=new _r,s})(),Dg=(()=>{class s extends Ee{constructor(){super(),this.lr=new sl(this.gl.bind(this))}onStart(){this.lr.observe()}onStop(){this.lr.disconnect()}gl(t){let e=this.uv(t);e&&this.produceEvent(e)}uv(t){if(!this.pv(t))return null;let e=jp(t.target);return e?{type:"Gesture",targetId:e,data:{type:t.type,direction:t.direction,distance:t.distance,velocity:t.velocity,pageX:t.pageX,pageY:t.pageY}}:null}pv(t){return t.target!==null&&!(dt(t.target)&&k.isMaskedElementChild(t.target))}}return s})(),il=(()=>{class s{constructor(t){this.S=t,this.Hs=!1,this.Vt={boundElement:at,type:"error",listener:e=>this.fv(e)}}observe(){ft(this.Vt,this.Hs)}disconnect(){gt(this.Vt,this.Hs)}fv(t){this.S(t)}}return s})(),kg=(()=>{class s extends Ee{constructor(){super(...arguments),this.rp=new il(t=>this.Fo(t))}Fo({message:t,filename:e,lineno:i,colno:r}){t=t!=null?t:"[NO ERROR MESSAGE]",e=!e||Jt(e)?"":e,this.produceEvent({type:"JSError",message:t,filename:e,lineno:i,colno:r})}onStart(){this.rp.observe()}onStop(){this.rp.disconnect()}}return s})(),Lg=(()=>{class s extends qs{constructor(t){super(),this.gv=t,this.ml=1024,this.yl=150}isListening(t){return t.type==="JSError"}processEvent(t){return t.message=ct.truncate(t.message,this.ml,ct.ELLIPSIS),t.filename=ct.truncate(t.filename,this.yl,ct.ELLIPSIS),this.gv(t)}}return s})();var Ns=[],wr=!1,nl=vs(Ug,"executeTasks");function xg(s){if(csArray.prototype.push.call(Ns,s),!wr){for(let n=0;n<3;n++)csSetTimeout(nl);wr=!0}}function Ug(){let s=csDate.now();for(let n=0;n<Ns.length;n++)if(Ns[n](),csDate.now()-s>=35){Ns=csArray.prototype.slice.call(Ns,n+1),csSetTimeout(nl);return}Ns=[],wr=!1}var qe=(()=>{let s;return function(n){n[n.Started=0]="Started",n[n.Stopped=1]="Stopped",n[n.Processing=2]="Processing",n[n.Completed=3]="Completed"}(s||(s={})),s})(),rl=(()=>{class s{constructor(){this.At=new zs,this.wt=qe.Stopped,this.S=null,this.ap=t=>{this.wt===qe.Stopped||!t||(this.S(t),this.cp())}}get queueLength(){return this.At.length}start(t){if(this.S)throw new Error("callback already set");this.wt=qe.Started,this.S=t}push(t){this.At.push(t),this._l()}stop(){this.S=null,this.wt=qe.Stopped,this.At.clear()}static pipe(t,e){let i=t,r=new csArray;for(let c of e){let l=new s;l.start(h=>{c.pushEvent(h)}),csArray.prototype.push.call(r,l),X(i,h=>h.subscribe(g=>l.push(g))),i=[c]}let o=new Vg(r);return X(i,c=>c.subscribe(l=>o.push(l))),o}lp(){return this.wt===qe.Stopped}Xe(){return this.wt===qe.Processing}cp(){if(!this.lp()){if(this.At.isEmpty){this.wt=qe.Completed;return}this.wt=qe.Processing,xg(()=>{let t=this.At.pop();t instanceof Yr?t.complete(this.ap):this.ap(t)})}}_l(){this.lp()||this.Xe()||this.cp()}}return s})(),Vg=(()=>{class s extends rl{constructor(t){super(),this.hp=t}get queueLength(){return csArray.prototype.reduce.call(this.hp,(t,e)=>t+e.queueLength,0)}stop(){super.stop(),X(this.hp,t=>t.stop())}}return s})(),jg=(()=>{class s{constructor(t,e=[]){this.producers=t,this.processors=e,this.B=!1,this.Pt=[]}get pendingEvents(){var t,e;return(e=(t=this.At)===null||t===void 0?void 0:t.queueLength)!==null&&e!==void 0?e:0}start(){if(this.B)throw new Error("Recording is already started.");let t=this.Pt;this.At=rl.pipe(this.producers,this.processors),this.At.start(e=>csArray.prototype.forEach.call(t,i=>i(e))),X(this.producers,e=>e.start()),X(this.processors,e=>e.start()),this.B=!0}stop(){this.At.stop(),this.Pt.length=0;for(let t of this.producers)t.stop();for(let t of this.processors)t.stop();this.B=!1,this.Pt=[]}subscribe(t){if(this.B)throw new Error("Recording is already started.");return csArray.prototype.push.call(this.Pt,t),()=>this.Pt=csArray.prototype.filter.call(this.Pt,e=>e!==t)}}return s})(),Hg=(()=>{class s extends Ee{constructor(t){super(),this.Oe=t}subscribe(t){return super.subscribe(t)}onStart(){X(this.Oe,t=>{t.onEvent(e=>{var i;return this.ji(e,(i=t.eventType)!==null&&i!==void 0?i:"browser")})}),X(this.Oe,t=>{var e;(e=t.start)===null||e===void 0||e.call(t)})}onStop(){X(this.Oe,t=>{var e;return(e=t.stop)===null||e===void 0?void 0:e.call(t)})}ji(t,e){this.produceEvent({timestamp:M.now(),type:"Legacy",originalEvent:t,eventType:e})}}return s})();function Bg(s,n,t){let{timestamp:e}=s;switch(s.domEvent){case"initialDOM":{let{initialDOM:i}=s,r={type:L.INITIAL_DOM,date:e,args:[i]};t.emitInitialDomDone(r);break}case"nodesAdded":{csArray.prototype.forEach.call(s.nodes,i=>{n({type:L.MUTATION_INSERT,date:e,args:[s.target,s.nextSibling,i]})});break}case"nodesMoved":{for(let i of s.nodesIds)n({type:L.MUTATION_MOVE,date:e,args:[i,s.nextSibling,s.target]});break}case"nodesRemoved":{csArray.prototype.forEach.call(s.nodesIds,i=>{n({type:L.MUTATION_REMOVE,date:e,args:[i]})});break}case"attributeChanged":{let{target:i,namespace:r,attribute:o,newValue:c}=s;n({type:L.MUTATION_ATTRIBUTE,date:e,args:[i,r,o,c]});break}case"characterDataChanged":{let{target:i,newValue:r}=s;n({type:L.MUTATION_CHARACTER_DATA,date:e,args:[i,r]});break}case"cssRuleInserted":{let{target:i,rule:r,index:o}=s,c=W(o)?[i,r,o]:[i,r];n({type:L.STYLESHEET_RULE_INSERT,date:e,args:c});break}case"cssRuleDeleted":{let{target:i,index:r}=s;n({type:L.STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"cssRuleUpdated":{let{target:i,rule:r,index:o}=s;n({type:L.STYLESHEET_RULE_UPDATE,date:e,args:[i,r,o]});break}case"cssStyleSheetDisabled":{let{target:i,disabled:r}=s;n({type:L.STYLESHEET_DISABLED,date:e,args:[i,r]});break}case"shadowRootAttached":{let{target:i,shadowRoot:r}=s;n({type:L.ATTACH_SHADOW,date:e,args:[i,r]});break}case"adoptedStyleSheetRegistered":{let{sheetId:i,cssRules:r,disabled:o}=s;n({type:L.REGISTER_ADOPTED_STYLE_SHEET,date:e,args:[i,{cssRules:r,disabled:o}]});break}case"adoptedStyleSheetsSet":{let{target:i,sheetsIds:r}=s;n({type:L.SET_ADOPTED_STYLE_SHEETS,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleInserted":{let{sheetId:i,rule:r,index:o}=s,c=W(o)?[i,r,o]:[i,r];n({type:L.ADOPTED_STYLESHEET_RULE_INSERT,date:e,args:c});break}case"adoptedStyleSheetRuleDeleted":{let{sheetId:i,index:r}=s;n({type:L.ADOPTED_STYLESHEET_RULE_DELETE,date:e,args:[i,r]});break}case"adoptedStyleSheetRuleUpdated":{let{sheetId:i,rule:r,index:o}=s,c=[i,r,o];n({type:L.ADOPTED_STYLESHEET_RULE_UPDATE,date:e,args:c});break}case"adoptedStyleSheetDisabled":{let{sheetId:i,disabled:r}=s,o=[i,r];n({type:L.ADOPTED_STYLESHEET_DISABLED,date:e,args:o});break}default:B.error("translateDOMEvent: DOMEvent not supported");break}}function Fg(s){let n=zg(s.data);return{type:L.GESTURE_RECOGNITION,args:[s.targetId,n],date:s.timestamp}}function zg(s){let n={type:$g(s.type)};for(let t in s){let e=s[t];e!==void 0&&t!=="type"&&(n[t]=e)}return n}function $g(s){switch(s){case At.DRAG:case At.FLICK:return ii.SWIPE;case At.LONG_PRESS:return ii.LONG_PRESS;case At.TAP:return ii.TAP;case At.PINCH_IN:return ii.PINCH_IN;case At.PINCH_OUT:return ii.PINCH_OUT}}function Gg(s,n){let t=[],e=!1;return{push(i){if(csArray.prototype.push.call(t,i),t.length===n.batchSize){this.flush();return}n.autoFlushDelay&&n.autoFlushDelay>0&&!e&&(e=!0,csSetTimeout(()=>{e=!1,t.length>0&&this.flush()},n.autoFlushDelay))},flush(){if(!t.length)return;let i=t;t=[],s(i)}}}var qg=20;function Wg(s){return Gg(n=>{let t={visibleInViewPort:n},e={type:L.TEXT_VISIBILITY,date:M.now(),args:[t]};s(e)},{batchSize:qg,autoFlushDelay:1e3})}function Yg(s){return{type:L.PERFORMANCE_TIMINGS,args:[{performanceTiming:qn.REQUEST_START,timestamp:s.timings.requestStart},{performanceTiming:qn.DOM_INTERACTIVE,timestamp:s.timings.domInteractive},{performanceTiming:qn.TIME_ORIGIN,timestamp:s.timings.timeOrigin}],date:s.timestamp}}function Xg(s){switch(s.inputType){case"text":return{type:L.INPUT_TEXT,args:[s.target,s.value],date:s.timestamp};case"select":return{type:L.INPUT_SELECT,args:[s.target,s.selectedIndex],date:s.timestamp};case"checkable":return{type:L.INPUT_CHECKABLE,args:[s.target,s.checked],date:s.timestamp}}}var Kg=500,Xn=0;function Jg(){return{processEvent(s,n){if(s.originalEvent.type===L.PERFORMANCE_RESOURCE_TIMING)return Xn>=Kg?null:(Xn+=1,n({...s.originalEvent,date:s.timestamp}));n(s.originalEvent)},reset(){Xn=0}}}function Qg(s){switch(s.videoEventType){case"play":return{type:L.VIDEO_PLAY,args:[s.nodeId],date:s.timestamp};case"pause":return{type:L.VIDEO_PAUSE,args:[s.nodeId],date:s.timestamp};case"seeked":{let n=s;return{type:L.VIDEO_SEEK,args:[n.nodeId,n.newTimePositionInSec],date:s.timestamp}}default:return null}}var Zg=(()=>{class s{get pendingEvents(){return this.zo.pendingEvents}constructor(t,e,i,r,o){this.zo=t,this.E=e,this.Ae=i,this.qe=r,this.We=o,this.Zt=()=>{},this.$o=()=>{},this.up=Wg(c=>this.Zt(c))}start(){var t,e;this.dp=Jg(),this.zo.subscribe(i=>{var r,o,c,l,h,g;let d=i,{timestamp:E}=d;switch(d.type){case"Legacy":{let y=d.eventType==="user"?(r=this.$o)!==null&&r!==void 0?r:()=>{}:this.Zt;this.dp.processEvent(d,y)}break;case"CustomElementRegistration":{this.Zt({type:L.CUSTOM_ELEMENT_REGISTRATION,date:E,args:[d.tagName]});break}case"DomEvent":{Bg(d,this.Zt,this.E);break}case"InputEvent":{let y=Xg(d);(o=this.$o)===null||o===void 0||o.call(this,y);break}case"encryptedCharacterDataChanged":{let{target:y,rawData:S,encryptedData:R,encryptionMetadata:O}=d;this.Zt({type:L.MUTATION_ENCRYPTED_CHARACTER_DATA,date:E,args:[y,S,R,O]});break}case"StaticResource":{let{url:y}=d;this.Zt({type:L.STATIC_RESOURCE_URL,date:E,args:[y]});break}case"ResizeMaskedElement":{let{target:y,width:S,height:R}=d;this.Zt({type:L.MUTATION_ATTRIBUTE,date:E,args:[y,"","style",`width:${S}px !important;height:${R}px !important;`]});break}case"Gesture":{let y=Fg(i);(c=this.$o)===null||c===void 0||c.call(this,y);break}case"TextVisibility":{this.up.push(d.text);break}case"StaticResourceManagerEvent":{(l=this.Ae)===null||l===void 0||l.processEvent(d);break}case"screenResize":{let{width:y,height:S}=d,R={type:L.SCREEN_RESIZE,date:E,args:[y,S]};this.Zt(R);break}case"viewportResize":{let{width:y,height:S}=d,R={type:L.RESIZE,date:E,args:[y,S]};this.Zt(R);break}case"PerformanceTiming":{this.Zt(Yg(d));break}case"CustomError":{let y=(h=this.We)===null||h===void 0?void 0:h.translate(d);y&&this.Zt(y);break}case"JSError":{let y=(g=this.qe)===null||g===void 0?void 0:g.translate(d);y&&this.Zt(y);break}case"VideoEvent":{let y=Qg(d);y&&this.Zt(y);break}case"warning":{B.warn(d.message);break}default:B.error(`WebRecorderEventTranslator: Event not supported (${d.type})`);break}}),this.E.emitInitialDomStart(),(t=this.qe)===null||t===void 0||t.start(),(e=this.We)===null||e===void 0||e.start(),this.zo.start()}stop(){var t,e,i;this.reset(),this.flush(),this.zo.stop(),(t=this.Ae)===null||t===void 0||t.flushEvents(),(e=this.qe)===null||e===void 0||e.stop(),(i=this.We)===null||i===void 0||i.stop()}flush(){this.up.flush()}onEvent(t,e){var i;this.Zt=t,this.$o=e,(i=this.Ae)===null||i===void 0||i.onEvent(r=>this.Zt(r))}reset(){this.dp.reset()}}return s})(),tm=(()=>{class s{constructor(t=100){this.Sv=t,this.Go={},this.ur=null,this.Dc="original-resource-name"}onEvent(t){this.vv=t}processEvent(t){this._v(t.resourceId,t.resource.hash,t.originalResourceName),this.wv(t)}flushEvents(){this.ur&&csClearTimeout(this.ur),this.pp()}onSendStaticResource(t){this.wv=t}pp(){if(!Object.keys(this.Go).length)return;let t={type:L.RESOURCE_HASHES,date:M.now(),args:[this.Go]};this.ur=null,this.Go={},this.vv(t)}_v(t,e,i){let r=e;i&&(r+=`?${this.Dc}=${i}`),this.Go[t]=r,!this.ur&&(this.ur=window.csSetTimeout(()=>this.pp(),this.Sv))}}return s})(),em=(()=>{class s{constructor(t,e){this.E=t,this.w=e,this.pr=Kt.ETR_DISABLED,this.qo=Kt.ETR_PENDING,this.wl=!0}getEtrStatus(t){t===void 0&&(t=this.w.getSession());let e=t==null?void 0:t.etrStatus;return this.fp()&&e===Kt.ETR_SAVED_SESSION?e:this.pr}onEventTriggerRecording(t,e){switch(e){case es.ETR_PAGE:this.gp(Kt.ETR_SAVED_PAGE);break;case es.ETR_LEGACY:case es.ETR_SESSION:this.gp(Kt.ETR_SAVED_SESSION);break}}onCollectStateChange(t,e){t===U.RECORDING_TEMPORARILY?this.wl=!0:this.wl=!1,t===U.ANALYTICS_ONLY&&e===qt.ETR_ON?this.mp(this.qo):this.mp(Kt.ETR_DISABLED)}mp(t){this.pr=t,this.qo=Kt.ETR_PENDING,this.yp(t),this.E.emitRecordingContextChange()}gp(t){this.wl?Number(t)>Number(this.qo)&&(this.qo=t):this.fp()&&Number(t)>Number(this.pr)&&(this.pr=t,this.yp(t),this.E.emitRecordingContextChange())}yp(t){let e=this.w.getSession();e!==null&&e.etrStatus===Kt.ETR_NOT_SAVED_SESSION&&t===Kt.ETR_SAVED_SESSION&&(e.etrStatus=t,this.w.setSession(e))}fp(){return this.pr!==Kt.ETR_DISABLED}}return s})();function hn(s,n){let t,e,i,r,o=null,c=h=>{let g=M.elapsed();if(!h&&o!==null){let E=n-(g-o);if(E>0){e=window.csSetTimeout(c,E);return}}let d=g-i;e=null,o=null,i=null,r=s(d,...t)},l=(...h)=>{if(t=[...h],i){o=M.elapsed();return}return i=M.elapsed(),e=window.csSetTimeout(c,n),r};return l.flushPending=()=>{e&&(window.csClearTimeout(e),c(!0))},l.cancel=()=>{o=null,i=null,e&&(window.csClearTimeout(e),e=null)},l}var sm=(()=>{let s;return function(n){n[n.NOT_EXIST=2]="NOT_EXIST"}(s||(s={})),s})(),im=8*1024*1024,nm=(()=>{class s extends xt{constructor(t,e,i){super(),this.Ae=t,this.Ep=e,this.J=i,this.bl={},this.Sp=new Set,this.Xe=!1}initState(){Tc()&&(this.Me=this.J.getRequestParameters(),this.bv=`${this.Ep}/exist?${Ei.toQuery(this.Me)}`,this.Av=`${this.Ep}/putTag?${Ei.toQuery(this.Me)}`,this.vp=hn(async()=>{if(this.Xe){this.vp();return}this.Xe=!0;try{await this.Tv()}finally{this.Xe=!1}},300),this.Ae.onSendStaticResource(t=>{this._p(t)}))}onStart(){}onStop(){}onIframeStaticResource(t){this._p(t)}_p(t){this.wp(t.resource.hash,t.resource.data),t.nestedResources&&t.nestedResources.length>0&&csArray.prototype.forEach.call(t.nestedResources,e=>{this.wp(e.hash,e.data)})}wp(t,e){this.Sp.has(t)||(this.Sp.add(t),this.bl[t]=e,this.vp())}async Tv(){let t=this.bl;this.bl={};let e=await this.Rv(t);if(!e.length)return;let i=this.Cv(e);await Promise.all(csArray.prototype.map.call(i,r=>window.fetch(this.Av,{method:"POST",body:r})))}async Iv(t){try{let e=Object.keys(t);if(!e.length)return[];let i={projectId:this.Me.pid,filter:sm.NOT_EXIST,hashes:e,touch:!0};return await(await window.fetch(this.bv,{method:"POST",body:csJSON.stringify(i)})).json()}catch{return[]}}async Rv(t){let e=[],i=await this.Iv(t);return csArray.prototype.forEach.call(i,r=>{let o=t[r];o?csArray.prototype.push.call(e,{hash:r,data:o}):B.warn("SRM: received unknown hash: "+r)}),e}Cv(t){let e=0,i=[new FormData];for(let r of t){let{data:o,hash:c}=r,l=i.length-1;if(e=e+o.size,e<im)i[l].append("",o,c);else{let h=new FormData;h.append("",o,c),e=o.size,csArray.prototype.push.call(i,h)}}return i}}return s})(),rm=(()=>{class s{constructor(t){this.Wo=t,this.fr=20,this.Si=0,this.N=!1}translate(t){if(this.Si>=this.fr)return this.Wo.stop(),null;this.Si+=1;let{filename:e,message:i,lineno:r,colno:o,timestamp:c}=t;return{type:L.JAVASCRIPT_ERROR,date:c,args:[{errorType:"jsError",message:i,filename:e,lineno:r,colno:o}]}}start(){this.N||(this.Si=0,this.N=!0)}stop(){this.N=!1}}return s})(),om=(()=>{class s{constructor(){this.fr=20,this.vi=0,this.N=!1}translate(t){if(this.vi>=this.fr)return null;this.vi+=1;let{message:e,attributes:i,timestamp:r}=t;return{type:L.CUSTOM_ERROR,date:r,args:[{errorType:"customError",message:e,attributes:i}]}}start(){this.N||(this.vi=0,this.N=!0)}stop(){this.N=!1}}return s})(),am="csPersisted",Aa="v2/recording",cm=["isRecording"],ol=["replay:resourceManager:enableForOnlineResource:nextPageviewOnly","cssrm:onlineAssets:activateForNextPageview"],lm=["replay:resourceManager:getStatus","cssrm:getStatus"],hm=(()=>{class s{constructor(t,e,i,r,o,c,l,h,g,d,E,y,S,R,O,b,w,x,N,C,H,$){this.Bs=t,this.w=e,this.h=i,this.Me=r,this.f=o,this.I=c,this.X=l,this.Ht=h,this.ae=g,this.at=d,this.ce=E,this.lt=y,this.E=S,this.Fs=R,this.bp=O,this.te=b,this.St=w,this.K=x,this.Hi=N,this.nt=C,this.pC=H,this.tt=$}init(){var t,e;let i=[],r=[];csArray.prototype.push.call(r,new Wf),this.gr=new dg(this.nt.shouldUseAnonymization(),this.h.whitelistedAttributes,this.I,this.h.anonymizeDigits),this._i();let o=new qf(am);this.Pv(o);let c=new qp;this.j=new Gp;let l=new zf;csArray.prototype.push.call(i,l),this.h.useStaticResourceManager&&Sr.isSupported()&&(this.Ut=new Sr,this.Ae=new tm,this.Ap=new nm(this.Ae,this.h.getStaticResourceManagerUri(),this.Me),this.bp.addListener(this.Ap),csArray.prototype.push.call(r,this.Ut));let h=new Si(c,this.Me,{getRequestParameters:()=>({let:this.recordingService.getRecordingLastEventTimestamp()})},{getRequestParameters:()=>({rst:this.recordingService.getRecordingStartTimestamp()})},{getRequestParameters:()=>({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")})}),g=new Kc(`${this.h.getRecordingUri()}/${Aa}`);csArray.prototype.push.call(r,this.gr),csArray.prototype.push.call(r,new pg(this.K)),csArray.prototype.push.call(r,new fg),this.wi=new Bp,this.wi.init(),csArray.prototype.push.call(i,this.wi),this.Ct=new Uf(o,g,this.U),csArray.prototype.push.call(i,new Vf(window.location,this.I));let d=new Df,E=new yg,y=new Sg,S=new wg(this.tt),R=new bg,O=[E,this.Ht,d,new Hg(csArray.prototype.filter.call(i,N=>N)),R,new Ag,new Dg,S,y];this.h.jsErrorsEnabled&&(this.Wo=new kg,this.Nv=new Lg(N=>this.ae.anonymize(N)),this.qe=new rm(this.Wo),csArray.prototype.push.call(O,this.Wo),csArray.prototype.push.call(r,this.Nv)),!((e=this.h.customErrors)===null||e===void 0)&&e.enabled&&(this.We=new om);let b=new jg(O,r),w=new Zg(b,this.E,this.Ae,this.qe,this.We),x=[d,E,y,S,R];this.recordingService=new xf(this.h,this.j,h,c,this.X,this.w,this.ae,this.at,this.ce,this.tt,this.U,this.Ct,g,w,i,x,this.Ut,this.Hi,this.qe,this.We),this.Fs.addListener(this.recordingService),this.bp.addListener(this.recordingService),this.recordingService.init(),this.f.register(cm,()=>this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()),this.f.register(ol,()=>{this.recordingService.activateOnlineAssetsOnNextPageview(),this.E.emitRecordingContextChange()}),this.f.register(lm,()=>this.recordingService.getStaticResourceManagerStatus()),this.mr=new em(this.E,this.w),this.Fs.addListener(this.mr),this.Bs.enableRecordingContext(this.recordingService,this.w,this.mr),this.Al()}onAfterNaturalPageView(){var t;this.te.isUrlExcludedForSessionReplay()?this.recordingService.resetOnlineAssetsOnPageview():this.recordingService.updateOnlineAssetsOnPageview(),(t=this.Ap)===null||t===void 0||t.initState()}onStartTracking(){this.Ct.recover(),this._i(),this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Tl())}onArtificialPageViewEnd(){this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&!this.w.isTemporarilyRecorded()&&this.Ct.sendLastMessageBeacon(),this.recordingService.clearStates()}onAfterArtificialPageView(){this._i(),this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()?(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.recordingService.updateOnlineAssetsOnPageview(),this.Mv()):(this.recordingService.resetOnlineAssetsOnPageview(),this.qi())}onBeforeSessionRenewal(){this.recordingService.clearStates(),this.qi()}onOptout(){this.qi(),this.recordingService.onOptOut()}onReplayUnanonymizationConsentGranted(){this._i(),this.recordingService.triggerUnanonymizationConsentGranted(),this.E.emitRecordingContextChange()}onReplayUnanonymizationConsentWithdrawn(){this._i(),this.recordingService.triggerUnanonymizationConsentWithdrawn(),this.E.emitRecordingContextChange()}onCollectStateChange(t,e){t===U.QUOTA_REACHED||t===U.ANALYTICS_ONLY&&e===qt.ETR_OFF?(this.recordingService.clearEvents(),this.qi()):(this.U.setQueryParams({rt:csArray.prototype.join.call(this.w.getCollectStates(),",")}),this.recordingService.allowSendingEventsFromQuotaService(),this.recordingService.pushEvents(),this.mr.onCollectStateChange(t,e))}onInitialDomStart(){this.recordingService.blockSendingEventsFromSerialization(),this.Ct.blockSendingLastMessage()}onInitialDomDone(t){this.recordingService.allowSendingEventsFromSerialization(),this.recordingService.addInitialDom(t),this.Ct.allowSendingLastMessage(),this.wi.start(),this.recordingService.pushEvents()}onAfterReplayRecordingConsentGranted(){this.w.isReplayRecorded()&&!this.te.isUrlExcludedForSessionReplay()&&(this.w.isTemporarilyRecorded()&&this.recordingService.blockSendingEventsFromQuotaService(),this.Tl(),this.recordingService.triggerRecordingForSessionGranted())}onAfterReplayRecordingConsentWithdrawn(){this.recordingService.isRecording()&&(this.recordingService.triggerRecordingForSessionWithdrawn(),this.recordingService.clearStates(),this.qi())}Al(){var t,e,i,r;if(!((e=(t=this.h.experimental.sessionReplay)===null||t===void 0?void 0:t.shadowRoot)===null||e===void 0)&&e.filterByHostSelector){let o=(r=(i=this.h.experimental.sessionReplay)===null||i===void 0?void 0:i.shadowRoot)===null||r===void 0?void 0:r.filterByHostSelector;X(o,c=>{Dt(c)&&ye.setShadowRootFilter(l=>{try{return Wt.call(l.host,c)}catch{return!1}})})}}Tl(){this.recordingService.start(),this.Ct.start(),this.E.emitRecordingContextChange()}qi(){Vp(),this.recordingService.stop(),this.Ct.stop(),this.E.emitRecordingContextChange()}Mv(){this.qi(),this.Tl()}Pv(t){let e="byteArray";this.U=this.St.create(`${this.h.getRecordingUri()}/${Aa}`,!0,e,t,["rt","v","pid","pn","sn","uu"])}_i(){var t;let e=this.nt.shouldUseAnonymization();this.gr.setAnonymization(e),(t=this.Ov)===null||t===void 0||t.setAnonymization(e)}}return j([It("Recording.onStartTracking")],s.prototype,"onStartTracking",null),j([It("onInitialDomDone")],s.prototype,"onInitialDomDone",null),s})(),zi=(()=>{let s;return function(n){n[n.NOT_NEEDED=1]="NOT_NEEDED",n[n.NOT_EXPRESSED=2]="NOT_EXPRESSED",n[n.WITHDRAWN=3]="WITHDRAWN",n[n.GRANTED=4]="GRANTED"}(s||(s={})),s})(),ts=(()=>{let s;return function(n){function t(r){return r.replayConsentRequiredForSession}n.isReplayConsentNeeded=t;function e(r){return r.collectState===U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED||r.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingBlockedByConsent=e;function i(r){return r.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}n.isRecordingWithDrawn=i}(s||(s={})),s})(),um=(()=>{class s{constructor(t,e,i,r){this.C=t,this.w=e,this.h=i,this.Ke=r,this.Tp=!1}isNaturalPageViewSent(){return this.Tp}setNaturalPageViewSent(t){this.Tp=t}getTrackingContext(){let t=this.w.getSession();if(!t)return null;let e=this.getSessionKey();if(!e)return null;let i=this.h.projectId,r=this.h.uxaDomain,o=t.pageNumber,c=this.Ke.getPageViewType(),l=this.w.isReplayRecorded(),h=this.Dv(t);return{projectId:i,sessionKey:e,pageNumber:o,pageViewType:c,isRecording:l,uxaDomain:r,recordingConsentState:h,...this.h.smbConfig}}getSessionKey(){let t=this.C.getVisitor();return t?`${t.id}.${t.visitsCount}`:null}Dv(t){return ts.isReplayConsentNeeded(this.h)?t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED?zi.NOT_EXPRESSED:t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?zi.WITHDRAWN:zi.GRANTED:zi.NOT_NEEDED}}return s})(),dm=(()=>{class s{constructor(t){this.vt=t,this.ee=[]}handleCommand(t){if(me(t)&&(this.yr(t),this.vt.isNaturalPageViewSent())){let e=this.vt.getTrackingContext();e!==null&&this.Dt(t,e)}}yr(t){csArray.prototype.push.call(this.ee,t)}executeRegisteredCallbacks(){let t=this.vt.getTrackingContext();t!==null&&csArray.prototype.map.call(this.ee,e=>this.Dt(e,t))}Dt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),pm=(()=>{class s{constructor(t){this.vt=t,this.bi=[]}handleCommand(t){if(this.vt.isNaturalPageViewSent())return this.kv(t);this.Er(t)}kv(t){let e=this.vt.getSessionKey();return this.Rp(t)&&e!==null&&this.Dt(t.callback,e),e}Er(t){this.Rp(t)&&csArray.prototype.push.call(this.bi,t.callback)}flushPendingCallbacks(){let t=this.vt.getSessionKey();t!==null&&csArray.prototype.forEach.call(this.bi,e=>{this.Dt(e,t)}),this.bi=[]}Rp(t){return t&&typeof t.callback=="function"}Dt(t,e){csSetTimeout(()=>{t(e)})}}return s})(),fm=(()=>{class s{constructor(t,e){this.Y=t,this.vt=e}onTrackingContextRequestCallback(t){let e=this.vt.getTrackingContext();e!==null&&this.Y.sendToChildren(Z.TrackingContextResultMessage,{...t,trackingContext:e})}onIframeIntegrationCallback(t){if(!this.vt.isNaturalPageViewSent())return;let e=this.vt.getTrackingContext();e!==null&&(t.trackingContext=e,this.Y.sendToChildren(Z.IntegrationCallback,t))}sendAfterPageViewCallbackToChildren(){let t=this.vt.getTrackingContext();if(t===null)return;let e={trackingContext:t,initiator:zd.AfterPageView};this.Y.sendToChildren(Z.IntegrationCallback,e)}}return s})();function gm(s,n){let{isRecording:t,pageNumber:e,projectId:i,siteId:r,uxaDomain:o,csLiteDomain:c}=s,l=/^(.+)\.(\d+)$/.exec(s.sessionKey),h;if(t&&l){let[,g,d]=l;r?h=`${c}/sites/${r}/player?uu=${g}&sn=${d}&pn=${e}`:h=`${o}/quick-playback/index.html?pid=${i}&uu=${g}&sn=${d}&pvid=${e}&recordingType=cs`,n.withTimestamp&&(h+=`&t=${M.now()-n.recordingStartTimestamp}`)}return{replayLink:h,isRecording:t}}var mm=(()=>{class s{constructor(t){this.vt=t}handleCommand(t,e){ss(t)&&me(e)&&this.Dt(t,e)}Dt(t,e){csSetTimeout(()=>{let i=this.vt.getTrackingContext();if(i){let r=gm(i,t);e(r)}})}}return s})(),ym=(()=>{class s{constructor(){this.ee=new Set}handleCommand(t,e){return!me(t)||this.ee.has(t)?null:(this.ee.add(t),e&&(this.we=e,this.Cp(t,e)),()=>this.ee.delete(t))}executeCallbacks(t){this.Lv(t)&&(this.we=t,this.ee.forEach(e=>this.Cp(e,t)))}Cp(t,e){csSetTimeout(()=>{try{t(e)}catch{}})}Lv(t){let{isRecording:e,recordingStartTimestamp:i,etrState:r,etrStatus:o,collectState:c}=t;return this.we&&(this.we.isRecording!==e||this.we.recordingStartTimestamp!==i||this.we.etrState!==r||this.we.etrStatus!==o||this.we.collectState!==c)}}return s})(),al=["afterPageView"],Em=["getSessionKey"],Sm=["onRecordingContextChange","onRecordingStateChange"],vm=["replay:link:generate"],_m=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.C=t,this.w=e,this.f=i,this.et=r,this.Y=o,this.h=c,this.Ke=l,this.Bs=h}init(){this.vt=new um(this.C,this.w,this.h,this.Ke),this.Rl=new dm(this.vt),this.Ip=new pm(this.vt),this.Sr=new ym,this.xv=new mm(this.vt),this.Cl=new fm(this.Y,this.vt),this.et.addListener(this.Cl),this.f.register(Em,t=>this.Ip.handleCommand(t)),this.f.register(al,t=>this.Rl.handleCommand(t)),this.f.register(Sm,t=>this.Sr.handleCommand(t,this.Bs.getRecordingContext())),this.f.register(vm,(t,e)=>{this.Wi&&this.xv.handleCommand({...t,recordingStartTimestamp:this.Bs.getRecordingContext().recordingStartTimestamp},e)})}onAfterNaturalPageView(){this.vt.setNaturalPageViewSent(!0),this.Ip.flushPendingCallbacks(),this.Rl.executeRegisteredCallbacks(),this.Cl.sendAfterPageViewCallbackToChildren()}onAfterArtificialPageView(){this.Rl.executeRegisteredCallbacks(),this.Cl.sendAfterPageViewCallbackToChildren()}onCollectStateChange(){this.executeRecordingContextChangeCallbacks()}onRecordingContextChange(){this.executeRecordingContextChangeCallbacks()}executeRecordingContextChangeCallbacks(){this.Sr.executeCallbacks(this.Bs.getRecordingContext())}setRecordingService(t){this.Wi=t}}return j([Sn({wait:0,mode:"trailing"})],s.prototype,"executeRecordingContextChangeCallbacks",null),s})(),wm=512,bm=255,Kn=(()=>{class s{constructor(t,e){this.key=csString.prototype.slice.call(t,0,wm),this.value=T(e)?csString.prototype.slice.call(e,0,bm):e}static isKeyValid(t){return T(t)}static isValueValid(t){return T(t)||xs(t)}}return s})(),Am=(()=>{class s extends xt{constructor(t,e){super(),this.Bt=t,this.I=e,this.Il=[]}onStart(){csArray.prototype.forEach.call(this.Il,t=>this.Pp(t.key,t.value)),this.Il=[]}onStop(){}Pp(t,e){let i=this.I.anonymizePII(t),r=xs(e)?e:this.I.anonymizePII(e);this.Bt.add(new Kn(i,r))}trackDynamicVariable(t,e){if(Kn.isKeyValid(t)&&Kn.isValueValid(e)){if(!this.isStarted){csArray.prototype.push.call(this.Il,{key:t,value:e});return}this.Pp(t,e)}else throw new Error(`Command misuse: ${Jr[0]}`)}}return s})(),Tm=(()=>{class s{constructor(t){this.le=t,this.Bt=[]}add(t){csArray.prototype.push.call(this.Bt,t),this.setBatchReadyCall()}clear(){this.Bt=[]}onBatchReady(t){this.Uv=t}getRequestParameters(){let t={};for(let e of this.Bt)t[e.key]=e.value;return{dv:this.le.compressSync(csJSON.stringify(t),"base64"),ct:this.le.algorithm}}setBatchReadyCall(){this.Uv()}}return j([Sn({wait:0,mode:"trailing"}),P("dynamicVariablesBatchReady")],s.prototype,"setBatchReadyCall",null),s})(),Rm="dvar",Jr=["trackDynamicVariable"],Cm=(()=>{class s{constructor(t,e,i,r,o,c){this.f=t,this.w=e,this.h=i,this.Me=r,this.le=o,this.I=c,this.cs=new js(this.h.getTrackerUri(),Rm),this.Bt=new Tm(this.le),this.Je=new Am(this.Bt,this.I)}init(){this.cs.setRequestParametersProviders(this.Me,this.Bt),this.w.setDynamicVariablesService(this.Je),this.Bt.onBatchReady(()=>this.cs.send()),this.cs.after(()=>this.Bt.clear()),this.f.register(Jr,({key:t,value:e}={})=>{this.Je.trackDynamicVariable(t,e)})}onStartTracking(){this.Je.start()}}return s})(),Ta=(()=>{class s{constructor(t,e){this.id=t,this.revenue=e}static from(t){let e=new s(t.id,parseFloat(t.revenue));return isNaN(parseFloat(t.tax))||(e.tax=parseFloat(t.tax)),isNaN(parseFloat(t.shipping))||(e.shipping=parseFloat(t.shipping)),T(t.currency)&&t.currency.length<=10&&(e.currency=t.currency),e}hasValidRevenue(){return!isNaN(this.revenue)&&this.revenue>=0}static isValid(t){return mt(t)&&Ct(t.revenue)&&T(t.currency)&&t.currency.length<=10&&(!mt(t.id)||T(t.id))}}return s})(),cl=100,Im=100,Pm=(()=>{class s{constructor(t,e,i,r){this.id=t,this.name=e,this.price=i,this.quantity=r}static from(t){if(!s.Pl(t))return null;let e=new s(t.id,t.name,parseFloat(t.price),parseInt(t.quantity,10));return W(t.sku)&&(e.sku=t.sku),W(t.category)&&(e.category=t.category),W(t.merchant)&&t.merchant.length>0&&(e.merchant=t.merchant.slice(0,cl)),e}static Pl(t){return mt(t)&&T(t.id)&&T(t.name)&&Ct(parseFloat(t.price))&&xs(parseInt(t.quantity,10))&&(!W(t.sku)||T(t.sku))&&(!W(t.category)||T(t.category))&&(!W(t.merchant)||T(t.merchant))}}return s})(),Om=(()=>{class s extends xt{constructor(t,e,i){super(),this.I=t,this.Op=e,this.X=i,this.Ol=[],this.clear()}onStart(){csArray.prototype.forEach.call(this.Ol,t=>{this.he=t.transaction,this.vr=t.transactionItems,this.sendTransaction()}),this.Ol=[]}onStop(){}addTransaction(t){let e=this.I.anonymizeFields(t,["id"]);this.he=Ta.from(e)}getTransaction(){return this.he}sendTransaction(){if(!this.isStarted){csArray.prototype.push.call(this.Ol,{transaction:this.he,transactionItems:[...this.vr]}),this.clear();return}if(!(this.Op===null||this.X===null)&&(this.X.refreshSession(),!!this.X.isSessionValid())){if(!this.he.hasValidRevenue()){B.warn("Transaction Service: unable to send transaction with invalid parameters");return}this.Op.send()}}addItem(t){if(me(t))throw new Error(`Command misuse: ${bn[1]}`);let e=this.I.anonymizeFields(t,["id","name","sku","category"]),i=Pm.from(e);i!==null&&csArray.prototype.push.call(this.vr,i)}getItems(){return this.vr}clear(){this.he=Ta.from({revenue:NaN}),this.vr=[]}getRequestParameters(){let t={id:this.he.id?`${this.he.id}`:"",revenue:`${this.he.revenue}`};return W(this.he.tax)&&(t.tax=`${this.he.tax}`),W(this.he.shipping)&&(t.shipping=`${this.he.shipping}`),W(this.he.currency)&&(t.cu=`${this.he.currency}`),t.items=window.csJSON.stringify(this.vr),t}}return s})(),Nm=(()=>{class s extends xt{constructor(t,e){super(),this.jv=t,this.X=e,this.Te=null,this.Nl=[]}onStart(){csArray.prototype.forEach.call(this.Nl,t=>{this.Te=t,this.Np()}),this.Nl=[]}onStop(){}addToCart(t){let e={};T(t.sku)&&(e.sku=csString.prototype.slice.call(t.sku,0,Im)),T(t.merchant)&&(e.merchant=csString.prototype.slice.call(t.merchant,0,cl)),(e.sku||e.merchant)&&(this.Te=e,this.Np())}getCartItem(){return this.Te}Np(){if(!this.isStarted&&this.Te!==null){csArray.prototype.push.call(this.Nl,this.Te),this.clear();return}this.X.refreshSession(),this.X.isSessionValid()&&this.jv.send()}clear(){this.Te=null}getRequestParameters(){if(!this.Te)return{};let t={};return T(this.Te.sku)&&this.Te.sku.length>0&&(t.sku=this.Te.sku),T(this.Te.merchant)&&this.Te.merchant.length>0&&(t.me=this.Te.merchant),t}}return s})(),Mm=["ecommerce:addToCart","ec:cart:add"],Qr=["ecommerce:addTransaction","ec:transaction:create"],bn=["ecommerce:addItem","ec:transaction:items:add"],Zr=["ecommerce:send","ec:transaction:send"],Dm=(()=>{class s{constructor(t,e,i,r,o,c,l){this.h=t,this.J=e,this.C=i,this.f=r,this.I=o,this.X=c,this.A=l}init(){let t=new js(this.h.getTrackerUri(),"transaction"),e=new js(this.h.getTrackerUri(),"addtocart");this.Qe=new Om(this.I,t,this.X),this.Yo=new Nm(e,this.X);let i=new Si(this.J,this.C,this.A,this.Qe);t.setRequestParametersProviders(i),t.after(()=>{this.Qe.clear()});let r=new Si(this.J,this.C,this.A,this.Yo);e.setRequestParametersProviders(r),e.after(()=>{this.Yo.clear()}),this.f.register(Qr,o=>{this.Qe.addTransaction(o)}),this.f.register(bn,o=>this.Qe.addItem(o)),this.f.register(Zr,()=>this.Qe.sendTransaction()),this.f.register(Mm,o=>{this.Yo.addToCart(o)})}onStartTracking(){this.Qe.start(),this.Yo.start()}}return s})(),km=(()=>{class s{constructor(t){this.Xo=t.performance}getRequestParameters(){if(this.Hv())return{};let t=this.Bv();return{str:t.startRender,di:t.domInteractive,dc:t.domComplete,fl:t.fullyLoaded}}Bv(){let t=this.Xo.timing;return{startRender:`${t.domLoading-t.requestStart}`,domInteractive:`${t.domInteractive-t.requestStart}`,domComplete:`${t.domComplete-t.requestStart}`,fullyLoaded:`${t.loadEventEnd-t.requestStart}`}}Hv(){return!(this.Xo&&this.Xo.timing&&this.Xo.timing.loadEventEnd>0)}}return s})(),Ft=(()=>{class s{static build(t,e,i){return csArray.prototype.reduce.call(i,(r,o)=>o.enhanceAnalysisEvent(t,r),e)}}return s})(),G=(()=>{let s;return function(n){n[n.RESIZE=0]="RESIZE",n[n.SCROLL=1]="SCROLL",n[n.MOUSEMOVE=2]="MOUSEMOVE",n[n.MOUSEDOWN=3]="MOUSEDOWN",n[n.MOUSEUP=4]="MOUSEUP",n[n.CLICK=5]="CLICK",n[n.MOUSEOVER=6]="MOUSEOVER",n[n.MOUSEOUT=7]="MOUSEOUT",n[n.CHANGE=10]="CHANGE",n[n.FOCUSIN=11]="FOCUSIN",n[n.FOCUSOUT=12]="FOCUSOUT",n[n.TAP=14]="TAP",n[n.KEYDOWN=15]="KEYDOWN",n[n.KEYUP=16]="KEYUP",n[n.COMMAND=17]="COMMAND",n[n.SUBMIT_COMMAND=18]="SUBMIT_COMMAND",n[n.PERFORMANCE=19]="PERFORMANCE",n[n.DRAG=20]="DRAG",n[n.FLICK=21]="FLICK",n[n.KEYBOARD_NAVIGATION=22]="KEYBOARD_NAVIGATION",n[n.ZOOM=23]="ZOOM",n[n.VIEWPORT_SCALE=24]="VIEWPORT_SCALE",n[n.TEXT_HIGHLIGHT=25]="TEXT_HIGHLIGHT",n[n.DEAD_CLICK=30]="DEAD_CLICK",n[n.DEAD_ZOOM=31]="DEAD_ZOOM",n[n.PAGE_RELOAD=32]="PAGE_RELOAD",n[n.THRASHED_CURSOR=33]="THRASHED_CURSOR",n[n.BLANK_PAGE=34]="BLANK_PAGE",n[n.EXTERNAL_EVENT=35]="EXTERNAL_EVENT",n[n.SUBMIT=36]="SUBMIT"}(s||(s={})),s})(),Jn=(()=>{let s;return function(n){n.SUCCESS="success",n.FAILURE="failure",n.ATTEMPT="attempt"}(s||(s={})),s})();function Lm(s){return s.tgtHM!==void 0}function ll(s){return s.tgt!==void 0}function xm(s){return s.tgtLk!==void 0}function Um(s){return s.x!==void 0&&s.y!==void 0}function Vm(s){return s===Jn.SUCCESS||s===Jn.FAILURE||s===Jn.ATTEMPT}var jm=(()=>{class s{constructor(t,e,i){this.se=t,this.kt=e,this.Et=i}processGesture(t,e){switch(t.type){case At.TAP:this.Fv(e);break;case At.FLICK:this.zv(t,e);break;case At.DRAG:this.$v(t,e);break;default:break}}Fv(t){let e={type:G.TAP,ts:0,x:0,y:0,tgt:""},i=Ft.build(t,e,this.se);i.tgt!==Re.INVALID_ELEMENT&&this.O(i)}$v(t,e){var i,r;let o={type:G.DRAG,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.Et)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.build(e,o,this.se);c.tgt!==Re.INVALID_ELEMENT&&this.O(c)}zv(t,e){var i,r;let o={type:G.FLICK,ts:0,fd:t.direction,tgt:""};!((i=this.Et)===null||i===void 0)&&i.collectGestureDistance&&(o.distance=t.distance),!((r=this.Et)===null||r===void 0)&&r.collectGestureVelocity&&(o.velocity=t.velocity);let c=Ft.build(e,o,this.se);c.tgt!==Re.INVALID_ELEMENT&&this.O(c)}onEvent(t){this.O=t}start(){this.kt.subscribe(s.Mp,(t,e)=>this.processGesture(t,e))}stop(){this.kt.unsubscribe(s.Mp)}}return s.Mp="AnalysisGestureTracker",j([ut()],s.prototype,"processGesture",null),s})(),Hm=(()=>{class s{constructor(t,e,i,r=["submit"]){this.se=t,this.ut=e,this.Lt=i,this.Gv=r,this.Dp="select, select *, input, textarea",this.qv="select, select *, input, textarea",this.kp="a, a *, button, button *, select, select *, input, textarea",this._r="input, select, textarea",this.Wv="form",this.Ko=150,this.Yv=400,this.Lp=!1,this.wr=hn((o,c)=>this.scrollListener(o,c),this.Ko),this.xp=hn(o=>this.resizeListener(o),this.Ko),this.Xv=En(o=>this.mouseMoveListener(o),this.Yv),this.Kv=[{boundElement:window,type:"resize",listener:()=>this.xp()},{boundElement:document,type:"scroll",listener:o=>this.wr(o)},{boundElement:window,type:"mousemove",listener:o=>{this.Xv(Mp(o))}},{boundElement:document,type:"mousedown",listener:o=>this.mouseDownListener(o)},{boundElement:document,type:"mouseup",listener:o=>this.mouseUpListener(o)},{boundElement:document,type:"click",listener:o=>this.clickListener(o)}],this.Up=[{type:"change",listener:this.Lt.on(this.qv,o=>this.changeListener(o))},{type:"submit",listener:this.Lt.on(this.Wv,o=>this.submitListener(o))}],this.Jv=[{boundElement:document,type:"mouseover",listener:this.Lt.on(this.kp,o=>this.mouseOverListener(o))},{boundElement:document,type:"mouseout",listener:this.Lt.on(this.kp,o=>this.mouseOutListener(o))},{boundElement:document,type:"focusin",listener:this.Lt.on(this.Dp,o=>this.focusInListener(o))},{boundElement:document,type:"focusout",listener:this.Lt.on(this.Dp,o=>this.focusOutListener(o))},{boundElement:document,type:"keyup",listener:this.Lt.on(this._r,o=>this.keyUpListener(o))},{boundElement:document,type:"keydown",listener:this.Lt.on(this._r,o=>this.keyDownListener(o))},{boundElement:document,type:"copy",listener:this.Lt.on(this._r,o=>this.copyListener(o))},{boundElement:document,type:"cut",listener:this.Lt.on(this._r,o=>this.cutListener(o))},{boundElement:document,type:"paste",listener:this.Lt.on(this._r,o=>this.pasteListener(o))},...csArray.prototype.map.call(this.Up,o=>({...o,boundElement:document}))],this.D={},this.Nc=(o,c)=>{switch(c){case"initial":case"added":this.li(o);break;case"removed":this.hi(o);break}},this.ne=new Gs(this.Nc),this.yc()}li(t){if(en(t)){let e=this.Vp();csArray.prototype.forEach.call(e,i=>ft(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{ft({...i,boundElement:t})})}}hi(t){if(en(t)){let e=this.Vp();csArray.prototype.forEach.call(e,i=>gt(i))}else{let e=this.jp();csArray.prototype.forEach.call(e,i=>{gt({...i,boundElement:t})})}}onEvent(t){this.O=t}start(){this.ne.observe(),this.li(document),this.resizeListener()}stop(){this.hi(document),this.ne.disconnect()}flushPendingDebouncedListeners(){this.wr.flushPending(),this.xp.flushPending()}Hp(t){return csArray.prototype.some.call(this.Gv,e=>e===t)}jp(){return this.Lt.isMatchesSelectorSupported()?csArray.prototype.filter.call(this.Up,t=>!this.Hp(t.type)):(B.warn("Element.matches is not implemented yet"),[])}Vp(){let t=[];return csArray.prototype.push.call(t,...this.Kv),this.Lt.isMatchesSelectorSupported()?csArray.prototype.push.call(t,...this.Jv):B.warn("Element.matches is not implemented yet"),csArray.prototype.filter.call(t,e=>!this.Hp(e.type))}resizeListener(t){let e=Ds.getScrollContainer(),i=Ie(e);i&&(this.Lp=!0);let r={type:G.RESIZE,ts:0,x:i?e.clientWidth:Tt.windowWidth(),y:i?e.clientHeight:Tt.windowHeight()};t!==void 0&&(r.d=t),this.O(r)}scrollListener(t,e){let i=Ds.isEventOnScrollContainer(e);!this.Lp&&i&&this.resizeListener();let r={type:G.SCROLL,ts:0,x:i?csEventtarget.apply(e).scrollLeft:Tt.windowOffsetX(),y:i?csEventtarget.apply(e).scrollTop:Tt.windowOffsetY(),d:t},o=Ft.build(e,r,this.se);this.O(o)}mouseMoveListener(t){let e={type:G.MOUSEMOVE,ts:0,x:t.pageX,y:t.pageY},i=Ft.build(t,e,this.se);this.O(i)}mouseDownListener(t){let e={type:G.MOUSEDOWN,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.se);this.ue(i)}mouseUpListener(t){let e={type:G.MOUSEUP,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.se);this.ue(i)}clickListener(t){let e={type:G.CLICK,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.se);this.ue(i)}mouseOverListener(t){let e={type:G.MOUSEOVER,ts:0,x:t.pageX,y:t.pageY,tgt:""},i=Ft.build(t,e,this.se);this.ue(i)}mouseOutListener(t){let e={type:G.MOUSEOUT,ts:0,x:t.pageX,y:t.pageY,tgt:this.ut.getEventTargetPath(t)},i=Ft.build(t,e,this.se);this.ue(i)}focusInListener(t){let e={type:G.FOCUSIN,ts:0,tgt:this.ut.getEventTargetPath(t)},i=Ft.build(t,e,this.se);this.ue(i)}focusOutListener(t){let e={type:G.FOCUSOUT,ts:0,tgt:this.ut.getEventTargetPath(t)},i=Ft.build(t,e,this.se);this.ue(i)}changeListener(t){let e={type:G.CHANGE,ts:0,tgt:""},i=Ft.build(t,e,this.se);this.ue(i)}submitListener(t){let e={type:G.SUBMIT,ts:0,tgt:""},i=Ft.build(t,e,this.se);this.ue(i)}copyListener(t){let e={type:G.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:ks.COPY};this.ue(e)}cutListener(t){let e={type:G.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:ks.CUT};this.ue(e)}pasteListener(t){let e={type:G.COMMAND,ts:0,tgt:this.ut.getEventTargetPath(t),key:ks.PASTE};this.ue(e)}keyUpListener(t){let e={type:G.KEYUP,ts:0,tgt:this.ut.getEventTargetPath(t),key:this.Bp(t)};this.ue(e)}keyDownListener(t){let e={type:G.KEYDOWN,ts:0,tgt:this.ut.getEventTargetPath(t),key:this.Bp(t)};this.ue(e)}Bp(t){let e=this.D[t.key];return e===void 0?q.ALPHANUMERICAL:e}ue(t){ll(t)&&t.tgt!==Re.INVALID_ELEMENT&&this.O(t)}yc(){this.D[" "]=q.SPACE,this.D.Spacebar=q.SPACE,this.D.Enter=q.ENTER,this.D.Backspace=q.BACKSPACE,this.D.Delete=q.DELETE,this.D.ArrowUp=q.ARROWUP,this.D.ArrowDown=q.ARROWDOWN,this.D.ArrowLeft=q.ARROWLEFT,this.D.ArrowRight=q.ARROWRIGHT,this.D.Up=q.ARROWUP,this.D.Down=q.ARROWDOWN,this.D.Left=q.ARROWLEFT,this.D.Right=q.ARROWRIGHT,this.D.CapsLock=q.CAPSLOCK,this.D.Shift=q.SHIFT,this.D.Tab=q.TAB}}return j([P("Event handler type: resize")],s.prototype,"resizeListener",null),j([P("Event handler type: scroll")],s.prototype,"scrollListener",null),j([P("Event handler type: mouseMove"),ut()],s.prototype,"mouseMoveListener",null),j([P("Event handler type: mouseDown"),ut()],s.prototype,"mouseDownListener",null),j([P("Event handler type: mouseUp"),ut()],s.prototype,"mouseUpListener",null),j([P("Event handler type: click"),ut()],s.prototype,"clickListener",null),j([P("Event handler type: mouseOver"),ut()],s.prototype,"mouseOverListener",null),j([P("Event handler type: mouseOut"),ut()],s.prototype,"mouseOutListener",null),j([P("Event handler type: focusIn")],s.prototype,"focusInListener",null),j([P("Event handler type: focusOut")],s.prototype,"focusOutListener",null),j([P("Event handler type: change")],s.prototype,"changeListener",null),j([P("Event handler type: submit"),ut()],s.prototype,"submitListener",null),j([P("Event handler type: copy")],s.prototype,"copyListener",null),j([P("Event handler type: cut")],s.prototype,"cutListener",null),j([P("Event handler type: paste")],s.prototype,"pasteListener",null),j([P("Event handler type: keyup")],s.prototype,"keyUpListener",null),j([P("Event handler type: keydown")],s.prototype,"keyDownListener",null),s})(),Bm=(()=>{class s{constructor(){this.Fp=100,this.br=0,this.Ar=Tt.documentHeight(),this.zp={boundElement:document,type:"scroll",listener:t=>this.maxScrollRateListener(t)},this.br=this.Ml(Ds.getScrollContainer()).maxScrollRate}onEvent(t){this.O=t}start(){ft(this.zp)}stop(){gt(this.zp)}reset(){let t=Ds.getScrollContainer(),{maxScrollRate:e,maxDocumentHeight:i}=this.Ml(t);this.Ar=i,this.br=e,this.O()}Ml(t){let e=0,i=0;if(t===null)i=Tt.documentHeight(),e=this.Qv(i);else{let r=this.Zv(t);i=this.$p(t,r),e=this.t_(t,r)}return{maxScrollRate:e,maxDocumentHeight:i}}maxScrollRateListener(t){let e=null;Ds.isEventOnScrollContainer(t)&&(e=csEventtarget.apply(t));let{maxScrollRate:i,maxDocumentHeight:r}=this.Ml(e);(i>this.br||r>this.Ar)&&(this.br=i,r>this.Ar&&(this.Ar=r),this.O())}Qv(t){let e=Math.round(this.e_()/t*100);return Math.min(e,this.Fp)}e_(){let t=Tt.windowHeight();return Tt.windowOffsetY()+t}t_(t,e){let i=t.scrollTop+t.clientHeight+t.getBoundingClientRect().top+e,r=this.$p(t,e),o=Math.round(i/r*100);return Math.min(o,this.Fp)}Zv(t){let e=window.getComputedStyle(t).paddingTop||"0px";return parseInt(e,10)}$p(t,e){return t.scrollHeight+t.getBoundingClientRect().top+e}getRequestParameters(){return{sr:`${this.br}`,mdh:`${this.Ar}`}}}return j([P("MaxScrollRate handler")],s.prototype,"maxScrollRateListener",null),s})();var Fm=(()=>{class s{constructor(t,e,i,r,o,c,l,h,g,d,E,y,S,R,O,b,w,x,N,C,H){this.h=t,this.zs=e,this.kt=i,this.Yi=r,this.Dl=o,this.Be=c,this.Ze=l,this.Gp=h,this.X=g,this.Yt=d,this.W=E,this.kl=y,this.Ue=S,this.U=R,this.Jo=O,this.gs=b,this.ms=w,this.Ll=x,this.Ai=N,this.Ti=C,this.Ri=H,this.Ds=new jc,this.Qo=!1}init(){var t,e,i,r,o,c,l;this.zs.onEvent(h=>this.It(h)),this.kt.onEvent(h=>this.It(h)),this.Yi.onEvent(()=>{let h=this.Yi.getRequestParameters();this.U.setQueryParams(h),this.Ze.setQueryParams(h)}),this.kl.onEvent(h=>this.Fe(h)),this.xl(),(t=this.Jo)===null||t===void 0||t.onEvent(h=>this.It(h)),(e=this.Ai)===null||e===void 0||e.onEvent(h=>this.It(h)),(i=this.gs)===null||i===void 0||i.onEvent(h=>this.It(h)),(r=this.ms)===null||r===void 0||r.onEvent(h=>this.It(h)),this.s_(),(o=this.Ll)===null||o===void 0||o.onEvent(h=>this.Fe(h)),(c=this.Ti)===null||c===void 0||c.onEvent(h=>this.Fe(h)),(l=this.Ri)===null||l===void 0||l.onEvent(h=>this.Fe(h))}s_(){this.Ze.onBeaconSuccess(()=>{this.Be.clearEvents()}),this.Ze.onBeaconFailure(t=>{this.i_(t)})}initStates(){let t=this.Gp.getRequestParameters(),e=this.Dl.getRequestParameters(),i=this.Yi.getRequestParameters();this.U.setQueryParams(t),this.U.setQueryParams(e),this.U.setQueryParams(i),this.Ze.setQueryParams(t),this.Ze.setQueryParams(e),this.Ze.setQueryParams(i),this.Ul()}clearStates(t){var e,i;this.zs.flushPendingDebouncedListeners(),(e=this.gs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ms)===null||i===void 0||i.flushPendingTextHighlightEvent(),t?(this.Vl(),this.sendLastMessageBeacon()):this.sendEvents(),this.Yi.reset(),this.U.removeQueryParams()}start(t){var e,i,r,o,c,l,h;t||(e=this.Ll)===null||e===void 0||e.start(),this.Ue.start(),this.zs.start(),this.Yi.start(),this.kt.start(),(i=this.Jo)===null||i===void 0||i.start(),(r=this.ms)===null||r===void 0||r.start(),t||this.kl.start(),(o=this.gs)===null||o===void 0||o.start(),(c=this.Ai)===null||c===void 0||c.start(),(l=this.Ti)===null||l===void 0||l.start(),(h=this.Ri)===null||h===void 0||h.start()}collectInitialEvents(){var t;(t=this.Jo)===null||t===void 0||t.collectInitialEvents()}onIframeAnalysisBrowserEvent(t){this.Fe(t)}onIframeAnalysisUserEvent(t){this.It(t)}onExternalEvent(t){this.G(t)}Fe(t){this.X.isCurrentPageviewValid()&&this.G(t)}It(t){this.X.refreshSession(),this.X.isSessionValid()&&this.G(t)}G(t){this.Be.addEvent(this.n_(t)),this.Be.isFull()&&this.sendEvents(),this.h.emitDebugEvents&&this.Ds.emit("analysisEvent",{...t,typeName:G[t.type]})}n_(t){return t.ts=this.Ci(),t}Vl(){this.Ze.setQueryParams({hlm:"true"}),this.Qo=!0}sendLastMessageBeacon(){this.Ze.setQueryParams(this.Dl.getRequestParameters()),this.Ze.send(this.Be.stringifyEvents()),this.Ze.removeQueryParams(["hlm"]),this.Qo=!1}sendEvents(){this.Be.isEmpty()||(this.U.setQueryParams(this.Gp.getRequestParameters()),this.U.setQueryParams(this.Dl.getRequestParameters()),this.U.send(this.Be.getEvents()),this.Be.clearEvents())}stop(){var t,e,i,r,o,c,l;this.Ue.stop(),this.zs.stop(),this.Yi.stop(),this.kt.stop(),this.kl.stop(),(t=this.Jo)===null||t===void 0||t.stop(),(e=this.gs)===null||e===void 0||e.stop(),(i=this.ms)===null||i===void 0||i.stop(),(r=this.Ai)===null||r===void 0||r.stop(),this.Be.empty(),(o=this.Ll)===null||o===void 0||o.stop(),(c=this.Ti)===null||c===void 0||c.stop(),(l=this.Ri)===null||l===void 0||l.stop()}Ul(){this.es=M.now()}Ci(){return M.now()-this.es}xl(){this.Ue.onEvent(t=>{var e,i;t!==Qt.Visible&&((e=this.gs)===null||e===void 0||e.flushPendingKeyboardNavigationEvent(),(i=this.ms)===null||i===void 0||i.flushPendingTextHighlightEvent(),t===Qt.PagehideVisible?this.Vl():t===Qt.PagehideHidden?(this.Vl(),this.sendLastMessageBeacon()):(!this.Be.isEmpty()||this.Qo)&&this.sendLastMessageBeacon())})}i_(t){try{(!this.Be.isEmpty()||this.Qo)&&this.Yt.save({requestParameters:t,events:this.Be.getEvents()})}catch{}}pushSubmitCommandEvent(t,e){if(!Vm(t)||!Ie(e))throw new Error(`Command misuse: ${no}`);let i={status:t,type:G.SUBMIT_COMMAND,ts:0,tgt:this.W.getElementPath(e)};i.tgt!==Re.INVALID_ELEMENT&&this.Fe(i)}}return s})(),zm=(()=>{class s{constructor(t,e){this.Yt=t,this.U=e,this.qp=()=>{document.visibilityState==="visible"&&this.Wp()}}start(){this.Wp(),this.kc()}stop(){this.Lc()}getRecoveryStorage(){return this.Yt}Wp(){let t=this.Yt.recover();if(t!==null){let{requestParameters:e,events:i}=t;this.U.send(i,e)}}kc(){document.addEventListener("visibilitychange",this.qp)}Lc(){document.removeEventListener("visibilitychange",this.qp)}}return s})(),$m=(()=>{class s{constructor(t){this.Fi=t}save(t){localStorage.setItem(this.Fi,csJSON.stringify(t))}clear(){localStorage.removeItem(this.Fi)}recover(){let t=localStorage.getItem(this.Fi);if(t===null)return null;let e=null;try{e=csJSON.parse(t)}catch{B.error(`Invalid item in localStorage.
         (key:${this.Fi}; value:${t})`)}finally{this.clear()}return e}}return s})(),Gm=(()=>{class s{constructor(t){this.Xi=t,this.Ki=e=>this.processMetric(e),this.N=!1}onEvent(t){this.O=t}start(){this.N||(this.N=!0,this.Xi.onFCP(this.Ki),this.Xi.onCLS(this.Ki),this.Xi.onFID(this.Ki),this.Xi.onLCP(this.Ki),this.Xi.onTTFB(this.Ki),this.Xi.onINP(this.Ki))}stop(){this.N=!1}processMetric(t){if(!this.N)return;let e={type:G.PERFORMANCE,name:t.name,val:t.value,ts:0};this.O(e)}}return j([P("Performance metric handler")],s.prototype,"processMetric",null),s})(),Ze,fi,hl,un,br,ul=-1,ws=function(s){addEventListener("pageshow",function(n){n.persisted&&(ul=n.timeStamp,s(n))},!0)},to=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},An=function(){var s=to();return s&&s.activationStart||0},te=function(s,n){var t=to(),e="navigate";return ul>=0?e="back-forward-cache":t&&(document.prerendering||An()>0?e="prerender":document.wasDiscarded?e="restore":t.type&&(e=t.type.replace(/_/g,"-"))),{name:s,value:n===void 0?-1:n,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:e}},Ws=function(s,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(s)){var e=new PerformanceObserver(function(i){Promise.resolve().then(function(){n(i.getEntries())})});return e.observe(Object.assign({type:s,buffered:!0},t||{})),e}}catch{}},ee=function(s,n,t,e){var i,r;return function(o){n.value>=0&&(o||e)&&((r=n.value-(i||0))||i===void 0)&&(i=n.value,n.delta=r,n.rating=function(c,l){return c>l[1]?"poor":c>l[0]?"needs-improvement":"good"}(n.value,t),s(n))}},eo=function(s){requestAnimationFrame(function(){return requestAnimationFrame(function(){return s()})})},Tn=function(s){var n=function(t){t.type!=="pagehide"&&document.visibilityState!=="hidden"||s(t)};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},so=function(s){var n=!1;return function(t){n||(s(t),n=!0)}},Ms=-1,Ra=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},dn=function(s){document.visibilityState==="hidden"&&Ms>-1&&(Ms=s.type==="visibilitychange"?s.timeStamp:0,qm())},Ca=function(){addEventListener("visibilitychange",dn,!0),addEventListener("prerenderingchange",dn,!0)},qm=function(){removeEventListener("visibilitychange",dn,!0),removeEventListener("prerenderingchange",dn,!0)},io=function(){return Ms<0&&(Ms=Ra(),Ca(),ws(function(){setTimeout(function(){Ms=Ra(),Ca()},0)})),{get firstHiddenTime(){return Ms}}},Ti=function(s){document.prerendering?addEventListener("prerenderingchange",function(){return s()},!0):s()},Ia=[1800,3e3],dl=function(s,n){n=n||{},Ti(function(){var t,e=io(),i=te("FCP"),r=Ws("paint",function(o){o.forEach(function(c){c.name==="first-contentful-paint"&&(r.disconnect(),c.startTime<e.firstHiddenTime&&(i.value=Math.max(c.startTime-An(),0),i.entries.push(c),t(!0)))})});r&&(t=ee(s,i,Ia,n.reportAllChanges),ws(function(o){i=te("FCP"),t=ee(s,i,Ia,n.reportAllChanges),eo(function(){i.value=performance.now()-o.timeStamp,t(!0)})}))})},Pa=[.1,.25],Wm=function(s,n){n=n||{},dl(so(function(){var t,e=te("CLS",0),i=0,r=[],o=function(l){l.forEach(function(h){if(!h.hadRecentInput){var g=r[0],d=r[r.length-1];i&&h.startTime-d.startTime<1e3&&h.startTime-g.startTime<5e3?(i+=h.value,r.push(h)):(i=h.value,r=[h])}}),i>e.value&&(e.value=i,e.entries=r,t())},c=Ws("layout-shift",o);c&&(t=ee(s,e,Pa,n.reportAllChanges),Tn(function(){o(c.takeRecords()),t(!0)}),ws(function(){i=0,e=te("CLS",0),t=ee(s,e,Pa,n.reportAllChanges),eo(function(){return t()})}),setTimeout(t,0))}))},oi={passive:!0,capture:!0},Ym=new Date,Oa=function(s,n){Ze||(Ze=n,fi=s,hl=new Date,fl(removeEventListener),pl())},pl=function(){if(fi>=0&&fi<hl-Ym){var s={entryType:"first-input",name:Ze.type,target:Ze.target,cancelable:Ze.cancelable,startTime:Ze.timeStamp,processingStart:Ze.timeStamp+fi};un.forEach(function(n){n(s)}),un=[]}},Xm=function(s){if(s.cancelable){var n=(s.timeStamp>1e12?new Date:performance.now())-s.timeStamp;s.type=="pointerdown"?function(t,e){var i=function(){Oa(t,e),o()},r=function(){o()},o=function(){removeEventListener("pointerup",i,oi),removeEventListener("pointercancel",r,oi)};addEventListener("pointerup",i,oi),addEventListener("pointercancel",r,oi)}(n,s):Oa(n,s)}},fl=function(s){["mousedown","keydown","touchstart","pointerdown"].forEach(function(n){return s(n,Xm,oi)})},Na=[100,300],Km=function(s,n){n=n||{},Ti(function(){var t,e=io(),i=te("FID"),r=function(l){l.startTime<e.firstHiddenTime&&(i.value=l.processingStart-l.startTime,i.entries.push(l),t(!0))},o=function(l){l.forEach(r)},c=Ws("first-input",o);t=ee(s,i,Na,n.reportAllChanges),c&&Tn(so(function(){o(c.takeRecords()),c.disconnect()})),c&&ws(function(){var l;i=te("FID"),t=ee(s,i,Na,n.reportAllChanges),un=[],fi=-1,Ze=null,fl(addEventListener),l=r,un.push(l),pl()})})},gl=0,Qn=1/0,$i=0,Jm=function(s){s.forEach(function(n){n.interactionId&&(Qn=Math.min(Qn,n.interactionId),$i=Math.max($i,n.interactionId),gl=$i?($i-Qn)/7+1:0)})},ml=function(){return br?gl:performance.interactionCount||0},Qm=function(){"interactionCount"in performance||br||(br=Ws("event",Jm,{type:"event",buffered:!0,durationThreshold:0}))},Ma=[200,500],yl=0,Da=function(){return ml()-yl},de=[],Zn={},ka=function(s){var n=de[de.length-1],t=Zn[s.interactionId];if(t||de.length<10||s.duration>n.latency){if(t)t.entries.push(s),t.latency=Math.max(t.latency,s.duration);else{var e={id:s.interactionId,latency:s.duration,entries:[s]};Zn[e.id]=e,de.push(e)}de.sort(function(i,r){return r.latency-i.latency}),de.splice(10).forEach(function(i){delete Zn[i.id]})}},Zm=function(s,n){n=n||{},Ti(function(){var t;Qm();var e,i=te("INP"),r=function(c){c.forEach(function(g){g.interactionId&&ka(g),g.entryType==="first-input"&&!de.some(function(d){return d.entries.some(function(E){return g.duration===E.duration&&g.startTime===E.startTime})})&&ka(g)});var l,h=(l=Math.min(de.length-1,Math.floor(Da()/50)),de[l]);h&&h.latency!==i.value&&(i.value=h.latency,i.entries=h.entries,e())},o=Ws("event",r,{durationThreshold:(t=n.durationThreshold)!==null&&t!==void 0?t:40});e=ee(s,i,Ma,n.reportAllChanges),o&&("PerformanceEventTiming"in window&&"interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),Tn(function(){r(o.takeRecords()),i.value<0&&Da()>0&&(i.value=0,i.entries=[]),e(!0)}),ws(function(){de=[],yl=ml(),i=te("INP"),e=ee(s,i,Ma,n.reportAllChanges)}))})},La=[2500,4e3],tr={},ty=function(s,n){n=n||{},Ti(function(){var t,e=io(),i=te("LCP"),r=function(l){var h=l[l.length-1];h&&h.startTime<e.firstHiddenTime&&(i.value=Math.max(h.startTime-An(),0),i.entries=[h],t())},o=Ws("largest-contentful-paint",r);if(o){t=ee(s,i,La,n.reportAllChanges);var c=so(function(){tr[i.id]||(r(o.takeRecords()),o.disconnect(),tr[i.id]=!0,t(!0))});["keydown","click"].forEach(function(l){addEventListener(l,function(){return setTimeout(c,0)},!0)}),Tn(c),ws(function(l){i=te("LCP"),t=ee(s,i,La,n.reportAllChanges),eo(function(){i.value=performance.now()-l.timeStamp,tr[i.id]=!0,t(!0)})})}})},xa=[800,1800],ey=function s(n){document.prerendering?Ti(function(){return s(n)}):document.readyState!=="complete"?addEventListener("load",function(){return s(n)},!0):setTimeout(n,0)},sy=function(s,n){n=n||{};var t=te("TTFB"),e=ee(s,t,xa,n.reportAllChanges);ey(function(){var i=to();if(i){var r=i.responseStart;if(r<=0||r>performance.now())return;t.value=Math.max(r-An(),0),t.entries=[i],e(!0),ws(function(){t=te("TTFB",0),(e=ee(s,t,xa,n.reportAllChanges))(!0)})}})},iy=(()=>{class s{onFCP(t){dl(t,{reportAllChanges:!0})}onCLS(t){Wm(t,{reportAllChanges:!0})}onFID(t){Km(t,{reportAllChanges:!0})}onLCP(t){ty(t,{reportAllChanges:!0})}onTTFB(t){sy(t,{reportAllChanges:!0})}onINP(t){Zm(t,{reportAllChanges:!0})}}return s})();var Rn=(()=>{class s{isEventTypeSupported(t){return csArray.prototype.indexOf.call(this.supportedEventTypes,t)!==-1}enhanceAnalysisEvent(t,e){return this.isEventTypeSupported(e.type)?this.baseEnhanceAnalysisEvent(t,e):e}}return s})(),ny=(()=>{class s extends Rn{constructor(){super(...arguments),this.supportedEventTypes=[G.CHANGE],this.I_=["text","email","number","search","tel","url","password"]}baseEnhanceAnalysisEvent(t,e){let i=Rt(t);return fn(i)&&csArray.prototype.indexOf.call(this.I_,i.type)>=0&&(e.isBlank=i.value===""),e}}return s})();var El=(()=>{class s extends Rn{constructor(t){super(),this.ut=t,this.supportedEventTypes=[G.MOUSEDOWN,G.MOUSEUP,G.CLICK,G.MOUSEOVER,G.TAP,G.DRAG,G.FLICK,G.SUBMIT,G.CHANGE]}baseEnhanceAnalysisEvent(t,e){return e.tgt||(e.tgt=this.ut.getEventTargetPath(t)),e}}return s})(),Ua=65535,ry=(()=>{let s;return function(n){function t(e){let i=Rt(e);if(!i||!dt(i)||!me(i.getBoundingClientRect)||!mt(e.pageX)||!mt(e.pageY))return{xRel:-1,yRel:-1,valid:!1};let r=i.getBoundingClientRect(),o=e.pageX-r.left-Tt.windowOffsetX(),c=e.pageY-r.top-Tt.windowOffsetY();i!==document.documentElement&&(o+=i.scrollLeft,c+=i.scrollTop);let l=Math.max(i.scrollWidth,r.width),h=Math.max(i.scrollHeight,r.height),g=Math.round(o/l*Ua),d=Math.round(c/h*Ua);return{xRel:g,yRel:d,valid:!0}}n.getRelativePosition=t}(s||(s={})),s})(),oy=(()=>{class s extends Rn{constructor(t,e){super(),this.Is=t,this.ut=e,this.supportedEventTypes=[G.MOUSEMOVE,G.CLICK],this.Wl=""}baseEnhanceAnalysisEvent(t,e){let{valid:i,xRel:r,yRel:o}=ry.getRelativePosition(t);if(i){let c=this.ut.getEventTargetPath(t);c!==Re.INVALID_ELEMENT&&(e.xRel=r,e.yRel=o,e.type===G.MOUSEMOVE&&(c!==this.Wl||this.Is.iframesTracking?(this.Wl=c,e.tgtHM=c):e.tgtHM=""))}else e.type===G.MOUSEMOVE&&(this.Wl="");return e}}return s})(),Xe=(()=>{let s;return function(n){n[n.ANONYMIZED=0]="ANONYMIZED",n[n.CAPTURED=1]="CAPTURED",n[n.MASKED=2]="MASKED",n[n.ENCRYPTED=3]="ENCRYPTED"}(s||(s={})),s})(),Va=100,Sl=(()=>{class s extends Rn{constructor(t,e,i){super(),this.h=t,this.de=e,this.I=i,this.supportedEventTypes=[G.TAP,G.CLICK,G.SUBMIT]}P_(t){let e="",i=document.createTreeWalker(t,NodeFilter.SHOW_TEXT),r=i.nextNode();for(;r;){if(e+=r.textContent,Dr(r.parentElement)||Mr(r.parentElement)||this.de.getElementSensitiveStatus(r.parentElement)!==Xe.CAPTURED)return!0;if(csString.prototype.trim.call(e).length>=Va)break;r=i.nextNode()}return!1}O_(t){let e=Hs(t,"button,a");return e||(this.h.collectTargetText===ur.ButtonAndLinkOnly?null:t)}baseEnhanceAnalysisEvent(t,e){if(Ie(csEventtarget.apply(t))){let i=this.O_(csEventtarget.apply(t));if(i&&T(i.textContent)&&!this.P_(i)&&!this.I.hasPII(i.textContent,this.h.anonymizeDigits)){let r=ct.truncate(csString.prototype.trim.call(i.textContent),Va);r.length>0&&(e.text=r)}}return e}}return s})();function ay(s,n,t){let e=[];return s.mouseMoveHeatmapEnabled&&csArray.prototype.push.call(e,new oy(s,n)),s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Sl(s,t,new bi)),csArray.prototype.push.call(e,new ny,new El(n)),e}function cy(s,n,t){let e=[];return s.isCollectTargetTextEnabled()&&csArray.prototype.push.call(e,new Sl(s,t,new bi)),csArray.prototype.push.call(e,new El(n)),e}var ly=50,hy=(()=>{class s{constructor(t=[]){this.Nt=t}stringifyEvents(){return csJSON.stringify(this.Nt)}addEvent(t){csArray.prototype.push.call(this.Nt,t)}eventsCount(){return this.Nt.length}clearEvents(){this.Nt=[]}empty(){this.clearEvents()}isFull(){return this.eventsCount()>=ly}isEmpty(){return this.Nt.length===0}getEvents(){return this.Nt}}return s})(),uy="csAnalysisEventsPersisted",ja="v2/events",no=["submit"],dy=(()=>{class s{constructor(t,e,i,r,o,c,l,h,g,d,E,y){this.h=t,this.J=e,this.C=i,this.W=r,this.Lt=o,this.f=c,this.X=l,this.kt=h,this.et=g,this.St=d,this.Q=E,this.de=y}init(){let t=new hy,e=this.St.create(`${this.h.getTrackerUri()}/${ja}`,!0,"base64");this.ia=this.N_(e),this.De=this.M_(t,this.ia.getRecoveryStorage(),e),this.De.init(),this.Q.addListener(this.De),this.et.addListener(this.De),this.f.register(no,(i,r)=>{this.De.pushSubmitCommandEvent(i,r)})}onStartTracking(t){this.ia.start(),this.De.start(t)}onAfterNaturalPageView(){this.De.initStates()}onAfterArtificialPageView(){this.De.initStates(),this.De.collectInitialEvents()}onArtificialPageViewEnd(){this.De.clearStates(!0)}onBeforeSessionRenewal(){this.De.clearStates(),this.De.stop(),this.ia.stop()}onOptout(){this.De.stop(),this.ia.stop()}M_(t,e,i){var r;let o=new km(window),c=new Bm,l=ay(this.h,this.W,this.de),h=[];this.h.collectSubmit||csArray.prototype.push.call(h,"submit");let g=new Hm(l,this.W,this.Lt,h),d=cy(this.h,this.W,this.de),E=new jm(d,this.kt),y=new Gm(new iy),S=new Wc,R,O,b,w=new Kc(`${this.h.getTrackerUri()}/${ja}`),x=new Si(this.J,this.C),N,C,H,$;return new Fm(this.h,g,E,c,o,t,w,x,this.X,e,this.W,y,S,i,R,O,b,N,C,H,$)}N_(t){return new zm(new $m(uy),t)}}return s})(),Ji=(()=>{let s;return function(n){n.Artificial="a",n.Renewal="r",n.Natural="n"}(s||(s={})),s})(),py=(()=>{class s extends xt{constructor(t,e,i,r,o){super(),this.E=t,this.Q=e,this.Yl=i,this.A=r,this.Ke=o}init(){this.D_()}onStart(t){t?this.k_():this.L_()}onStop(){}triggerArtificialPageView(t,e){this.isStarted?this.mf(t,e):mt(t)&&this.A.overridePath(t,e),this.isStarted||(this.Q.emitTargetingRulesArtificialPageview(this.A.getUrl()),this.A.cleanupOverrideLifespan())}L_(){this.Ke.setPageViewType(Ji.Natural),this.E.emitBeforeNaturalPageView(),this.Yl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterNaturalPageView()}k_(){this.Ke.setPageViewType(Ji.Renewal),this.E.emitBeforeNaturalPageView(),this.Yl.send(),this.E.emitAfterNaturalPageView()}mf(t,e){this.Ke.setPageViewType(Ji.Artificial),this.E.emitArtificialPageViewEnd(),mt(t)&&this.A.overridePath(t,e),this.E.emitBeforeArtificialPageView(),this.Yl.send(),this.A.cleanupOverrideLifespan(),this.E.emitAfterArtificialPageView()}D_(){window.addEventListener("pageshow",t=>{this.isStarted&&t.persisted&&this.mf()})}}return s})(),fy=window.navigator.language||window.navigator.userLanguage||window.navigator.browserLanguage||window.navigator.systemLanguage||"unknown";function gy(){return{la:fy}}var my=(()=>{class s{constructor(t,e){this.K=t,this.lt=e,this.Xl=!1}getRequestParameters(){return{dr:this.Kl()}}addUrlMaskingPattern(t){this.lt.addUrlMaskingPattern(t)}enableRemoveQueryString(){this.Xl=!0}disableRemoveQueryString(){this.Xl=!1}Kl(){let t=this.Xl?this.K.removeQueryString(this.yf()):this.yf();return this.K.anonymizeUrl(t,{maskingPatterns:this.lt.getUrlMaskingPatterns()})}yf(){let t="";try{t=window.top.document.referrer}catch{if(window.parent)try{t=window.parent.document.referrer}catch{t=""}}return t===""&&(t=document.referrer),typeof t!="string"&&(t=""),t}}return s})(),yy=99999,Ey=(()=>{class s{constructor(t){this.w=t,this.x_=this.U_()&&window.CSCurrentScript}V_(){let t=window.CSCurrentScript;if(!t)return null;let e=window.performance.getEntriesByName(t.src,"resource")[0];return!e||this.j_(e)?null:Math.round(e.responseEnd-e.fetchStart)}j_(t){let e=t.transferSize;return e!==void 0?e===0||e===300||e<t.encodedBodySize:t.connectStart===t.domainLookupEnd}getRequestParameters(){if(!this.x_||this.H_()!==1)return{};let t=this.V_();return t===null?{}:{dt:`${Math.min(t,yy)}`}}H_(){var t;return((t=this.w.getSession())===null||t===void 0?void 0:t.pageNumber)||null}U_(){return typeof window.performance=="object"&&typeof window.performance.getEntriesByName=="function"}}return s})(),vl=":";function Ha(s){let n=[],t=Sy(s),e=csString.prototype.split.call(t,"/");for(let i of e)Oe(i,vl)?csArray.prototype.push.call(n,{key:i,value:`CS_ANONYMIZED_${csString.prototype.toUpperCase.call(csString.prototype.slice.call(i,1))}`}):csArray.prototype.push.call(n,{key:i,value:null});return n}function Sy(s){let n=s;return Oe(s,"/")&&(n=csString.prototype.substring.call(n,1)),$s(s,"/")&&(n=csString.prototype.slice.call(n,0,-1)),n}var _l=(()=>{class s{constructor(){this.Ef=new Set,this.Sf=[],this.Jl=new Set,this.Ql=[]}addUrlMaskingPattern(t){if(this.Ef.has(t))return;this.Ef.add(t);let e=Ha(t);csArray.prototype.push.call(this.Sf,e)}getUrlMaskingPatterns(){return this.Sf}resetPartialUrlMaskingPatterns(){this.Jl.clear(),this.Ql=[]}addPartialUrlMaskingPattern(t){if(this.Jl.has(t))return;this.Jl.add(t);let e=Ha(t);csArray.prototype.push.call(this.Ql,e)}getPartialUrlMaskingPatterns(){return this.Ql}}return s})(),wl=["trackPageview"],Ar=["setPath"],Tr=["setQuery"],Ba=["referrer:maskUrl"],vy=["referrer:removeQueryString"],_y=["referrer:keepQueryString"],wy=(()=>{class s{constructor(t,e,i,r,o,c,l,h,g,d,E,y,S,R,O){this.h=t,this.f=e,this.E=i,this.Me=r,this.C=o,this.w=c,this.pe=l,this._t=h,this.K=g,this.A=d,this.te=E,this.Ke=y,this.Q=S,this.Gs=R,this.tn=O}init(){var t;let e=new js(this.h.getTrackerUri(),"pageview");this.nn=new py(this.E,this.Q,e,this.A,this.Ke);let i=new my(this.K,new _l);this.nn.init();let r=new Si(this.Me,this.C,Tt,i,this.A,this.pe,Or,this._t,this.Ke,new Ey(this.w),this.te);this.Gs&&r.addProvider(this.Gs),this.tn&&r.addProvider(this.tn);let o=this.h.isCsCrosswritingHeap();if(o||this.h.isCsSideloadingHeap()||this.h.isHeapSideloadsCs()){let c=(t=this.h.heapEnvironment)===null||t===void 0?void 0:t.env_id;r.addProvider({getRequestParameters(){let l={cw:o?"1":"2"};return c&&(l.happid=c),l}})}e.setRequestParametersProviders(r),this.f.register(wl,(c,l)=>{if(!T(c)){this.nn.triggerArtificialPageView();return}this.Zl(l)?this.nn.triggerArtificialPageView(c,l):this.nn.triggerArtificialPageView(c)}),this.f.register(Ar,(c,l)=>{if(!T(c))throw new Error(`Command misuse: ${Ar[0]}`);this.Zl(l)?this.A.overridePath(c,l):this.A.overridePath(c)}),this.f.register(Tr,(c,l)=>{if(!T(c))throw new Error(`Command misuse: ${Tr[0]}`);this.Zl(l)?this.A.overrideQuery(c,l):this.A.overrideQuery(c)}),this.f.register(Ba,c=>{if(!T(c))throw new Error(`Command misuse: ${Ba[0]}`);i.addUrlMaskingPattern(c)}),this.f.register(vy,()=>i.enableRemoveQueryString()),this.f.register(_y,()=>i.disableRemoveQueryString())}start(t){this.nn.start(t)}onBeforeSessionRenewal(){this.nn.stop()}Zl(t){return ss(t)&&t!==null}}return s})(),by=(()=>{class s{constructor(t){this.ut=t}on(t,e){return i=>{this.ut.hasValidEventTarget(i)&&this.B_(i,t)&&e(i)}}B_(t,e){let i=Rt(t);return Wt.call(i,e)}isMatchesSelectorSupported(){return!!Wt}}return s})(),Ay=(()=>{class s{constructor(){}onLoad(t){this.Ui=t}onLoadCallbackExecute(){this.Ui()}start(){let t=this.onLoadCallbackExecute.bind(this);this.F_(t)}F_(t){document.readyState==="complete"||document.readyState!=="loading"&&!document.documentElement.doScroll?csSetTimeout(t):(document.addEventListener("DOMContentLoaded",e),window.addEventListener("load",e));function e(){document.removeEventListener("DOMContentLoaded",e),window.removeEventListener("load",e),t()}}}return j([P("onLoad")],s.prototype,"onLoadCallbackExecute",null),s})(),Ty=(()=>{class s{constructor(t,e,i){this.h=t,this.C=e,this.w=i,this.es=M.now()}resetStartTime(){this.es=M.now()}getSessionData(){let{projectId:t}=this.h,e=this.C.getVisitor();e==null&&B.warn("Visitor is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{id:i,visitsCount:r}=e!=null?e:{},o=this.w.getSession();o===null&&B.warn("Session is null. This happens when a snippet tries to get Session Data before the tag was initialized.");let{pageNumber:c}=o!=null?o:{};return{projectId:t,userId:i,sessionNumber:r,pageNumber:c,relativeTimestamp:M.now()-this.es}}}return s})(),Ry=["clearSession"],Cy=["extendSession"];var Iy=["getSessionData"],Py=["session:start:newVisitor"],Oy=["session:clear:visitor"],Ny=(()=>{class s{constructor(t,e,i,r){this.h=t,this.C=e,this.w=i,this.f=r}init(){this.th=new Ty(this.h,this.C,this.w),this.f.register(Ry,()=>this.w.removeSession()),this.f.register(Cy,()=>this.w.extendSessionPeriodically(),{disableApplyPending:!0}),this.f.register(Iy,()=>this.th.getSessionData(),{disableApplyPending:!0}),this.f.register(Py,()=>this.C.renewVisitor()),this.f.register(Oy,()=>{this.C.resetVisitor()},{disableApplyImmediate:!0})}onBeforeNaturalPageView(){this.C.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onBeforeArtificialPageView(){this.C.createOrUpdateVisitor(),this.w.createOrUpdateSession()}onAfterNaturalPageView(){this.th.resetStartTime()}onAfterArtificialPageView(){this.th.resetStartTime()}onOptout(){this.C.removeVisitor(),this.w.removeSession()}onCollectStateChange(t){this.w.updateCollectState(t)}}return s})(),My=60*1e3,Dy=30*1e3,ky=(()=>{class s{constructor(t,e){this.w=t,this.C=e,this.eh=!1,this.z_=En(()=>this.w.refreshSession(),Dy)}onSessionExpired(t){this.$_=t}isSessionValid(){return this.eh?!0:!(!this.w.hasValidSession()||this.w.pollCacheRefreshEvent()&&this.C.isSessionRenewed())}isCurrentPageviewValid(){let t=this.w.hasValidSession();return this.w.pollCacheRefreshEvent(!1)?!this.C.isSessionRenewed():t}refreshSession(){this.isSessionValid()?this.z_():this.G_()&&(this.vf=M.now(),this.renewSession())}renewSession(){this.eh=!0,this.$_(),this.eh=!1}G_(){return!W(this.vf)||M.now()-this.vf>My}}return s})();var Ss;(function(s){s.ContentSquare="CONTENTSQUARE",s.LoadedByClicktale="LOADED_BY_CLICKTALE",s.LoadClicktalePtc="LOAD_CLICKTALE_PTC",s.DualCollectionReview="DUAL_COLLECTION_REVIEW",s.DualCollection="DUAL_COLLECTION",s.ContentSquareTagClickTaleEndpoints="CONTENTSQUARE_TAG_CLICKTALE_ENDPOINTS"})(Ss||(Ss={}));function bl(s){return s.tagDeploymentMode===Ss.DualCollectionReview||s.tagDeploymentMode===Ss.DualCollection}function Ly(s){return bl(s)||s.tagDeploymentMode===Ss.LoadClicktalePtc}var Fa=(()=>{let s;return function(n){function t(){return window.ClickTaleIsRecording&&window.ClickTaleIsRecording()}n.isRecording=t;function e(){window.ClickTaleStop&&window.ClickTaleStop()}n.stopRecording=e;function i(c){window.ClickTaleLogicalWithUploadPage&&window.ClickTaleLogicalWithUploadPage(c)}n.triggerLogicalPageView=i;function r(c){window.ClickTaleEvent&&window.ClickTaleEvent(c)}n.sendPageEvent=r;function o(c){window.ClickTaleEventTrigger&&window.ClickTaleEventTrigger(c)}n.sendEventTriggerRecording=o}(s||(s={})),s})();var xy="@ETP@",za="@user-identifier@",Uy=(()=>{class s extends xt{constructor(t,e,i,r){super(),this.h=t,this.Dw=e,this.le=i,this.Q=r,this.nh=[],this.fi=[]}onStart(){csArray.prototype.forEach.call(this.nh,t=>this.kf(t)),this.nh=[],csArray.prototype.forEach.call(this.fi,t=>this.Lf(t)),this.fi=[]}onStop(){}kf(t){this.kw(t)?ci.isSupported()&&this.Lw(t):this.xw(t)}trackPageEvent(t){if(!s.xf(t))throw new Error(`Command misuse: ${ro[0]}`);this.isStarted?this.kf(t):csArray.prototype.push.call(this.nh,t)}kw(t){return Oe(t,za)}async Lw(t){if(!this.h.customHashIdEnabled)return;let e=csString.prototype.slice.call(t,za.length);if(e.length>ci.MAX_DIGEST_INPUT_SIZE){B.warn("UserIdentifier event: invalid user identifier");return}let i=await ci.digest(e);i?(this.En={eventName:i,isETR:!1,isCustomHashId:!0},this.ha()):B.warn("Page event: unable to compute customHashId"),this.h.encryptionEnabled&&this.Q.emitUserIdentifierEvent(e)}xw(t){this.Q.emitPageEvent(t),this.En={eventName:t,isETR:!1,isCustomHashId:!1},this.ha(),this.h.tagDeploymentMode===Ss.LoadClicktalePtc&&Fa.sendPageEvent(t)}Lf(t){this.h.malkaEtrEnabled?this.Uw(t):this.Vw(t)}trackEventTriggerRecording(t){if(!s.xf(t))throw new Error(`Command misuse: ${Ri[0]}`);this.isStarted?this.Lf(t):csArray.prototype.push.call(this.fi,t)}Uw(t){Oe(t,xy)?this.Q.emitEventTriggerRecording(t,es.ETR_PAGE):this.Q.emitEventTriggerRecording(t,es.ETR_SESSION),this.En={eventName:t,isETR:!0,isCustomHashId:!1},this.ha()}Vw(t){Ly(this.h)&&(this.Q.emitEventTriggerRecording(t,es.ETR_LEGACY),this.En={eventName:t,isETR:!0,isCustomHashId:!1},this.ha(),this.h.tagDeploymentMode===Ss.LoadClicktalePtc&&Fa.sendEventTriggerRecording(t))}getRequestParameters(){return{value:this.le.compressSync(this.En.eventName,"base64"),ct:this.le.algorithm,isETR:`${this.En.isETR}`,isCustomHashId:`${this.En.isCustomHashId}`}}ha(){this.Dw.send()}static xf(t){return T(t)&&!!csString.prototype.trim.call(t)}}return s})(),ro=["trackPageEvent"],Ri=["trackEventTriggerRecording"],Vy=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.f=e,this.le=i,this.Me=r,this.Q=o}init(){let t=new js(this.h.getTrackerUri(),"pageEvent");this.ua=new Uy(this.h,t,this.le,this.Q),t.setRequestParametersProviders(this.ua,this.Me),this.f.register(ro,e=>{this.ua.trackPageEvent(e)}),this.f.register(Ri,e=>{this.ua.trackEventTriggerRecording(e)})}onStartTracking(){this.ua.start()}}return s})(),oo=(()=>{class s{constructor(){this.subscriptions={}}subscribe(t,e){this.subscriptions[t]=e,Object.keys(this.subscriptions).length===1&&this.onStartTracking()}unsubscribe(t){delete this.subscriptions[t],Object.keys(this.subscriptions).length===0&&this.onStopTracking()}}return s})(),jy=(()=>{class s extends oo{constructor(){super(),this.F=new il(t=>this.errorListener(t))}onStartTracking(){this.F.observe()}onStopTracking(){this.F.disconnect()}errorListener(t){let e=this.jw(t);for(let i in this.subscriptions){let r=this.subscriptions[i];r(e)}}Hw(t){return t=t!=null?t:"[NO ERROR MESSAGE]",ct.truncate(t,s.ml,ct.ELLIPSIS)}Bw(t){return!t||Jt(t)?"":ct.truncate(t,s.yl,ct.ELLIPSIS)}jw(t){return{errorType:"jsError",message:this.Hw(t.message),filename:this.Bw(t.filename),lineno:t.lineno,colno:t.colno}}}return s.ml=1024,s.yl=150,j([P("Event handler type: error")],s.prototype,"errorListener",null),s})(),Hy=(()=>{class s{constructor(t){this.f=t}init(){this.Uf(s.Fw,Ic),this.Uf(s.zw,Cc)}Uf(t,e){this.f.register([t],(i,r)=>{!T(i)||!(T(r)||is(r))||B.error(r,`${e}${i}`)})}}return s.zw="logSnippetError",s.Fw="logImplementationSnippetError",s})(),By=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.Y=e,this.Bs=i,this.de=r,this.et=o}init(){this.Y.onChildMessage((t,e,i)=>this.et.emitIframeEvent(t,e,i)),this.Y.setSentiveStatusCallback(()=>this.de.getSensitiveStatus()),this.Y.setRecordingContextCallback(()=>this.Bs.getRecordingContext())}onStartTracking(){this.h.iframesTracking&&this.Y.start()}onOptout(){this.h.iframesTracking&&this.Y.stop()}onSensitiveStatusChange(){if(this.h.iframesTracking){let t=this.de.getSensitiveStatus();this.Y.onSensitiveStatusChange(t)}}onRecordingContextChange(){if(this.h.iframesTracking){let t=this.Bs.getRecordingContext();this.Y.onRecordingContextChange(t)}}}return s})(),Fy=(()=>{class s extends xt{constructor(t){super(),this.h=t,this.rh=0,this.Ce=new Map,this.Vf={boundElement:window,type:"message",listener:e=>this.oh(e)}}onChildMessage(t){this.jf=t}setRecordingContextCallback(t){this.$w=t}setSentiveStatusCallback(t){this.Gw=t}onSensitiveStatusChange(t){let e=bt.buildBaseMessage(Z.SensitiveStatus,he.Parent,this.h.projectId);e.content=t;let i=bt.buildBaseMessage(Z.SensitiveStatus,he.Parent,this.h.projectId);i.content={...t,started:!1,useAnonymization:!0,capturedElementSelector:""},this.Ce.forEach(r=>{if(r.port){let o=this.da(r)?i:e;this.ah(r,o)}})}onRecordingContextChange(t){let e=bt.buildBaseMessage(Z.RecordingContext,he.Parent,this.h.projectId);e.content=t,this.Ce.forEach(i=>{!this.da(i)&&i.port&&this.ah(i,e)})}sendToChildren(t,e){let i=bt.buildBaseMessage(t,he.Parent,this.h.projectId);i.content=e,this.qw(i)}onStart(){ft(this.Vf,!1),this.Hf()}onStop(){this.Ww(),gt(this.Vf,!1),this.Yw()}Hf(){let t=this.Xw();this.Kw(t),csArray.prototype.forEach.call(t,e=>{if(this.Jw(e)===null){let r={iframe:e};this.Ce.set(this.rh,r),this.rh+=1}}),this.Qw()}Xw(){return csArray.prototype.filter.call(rt.findAllElements("iframe"),t=>this.Zw(t))}Kw(t){this.Ce.forEach((e,i)=>{e.iframe&&csArray.prototype.indexOf.call(t,e.iframe)===-1&&this.tb(i,e)})}tb(t,e){e.port&&bt.closeChannelPort(e.port),this.Ce.delete(t)}Yw(){this.Ce.forEach(t=>{t.port&&bt.closeChannelPort(t.port)}),this.Ce.clear()}Jw(t){let e=null;return this.Ce.forEach((i,r)=>{e===null&&i.iframe===t&&(e=r)}),e}Zw(t){return t.id!==oc&&(!t.src||Vt(t.src,"about:")||Fr(Pc(t.src),this.h.hostnames))}qw(t){this.Ce.forEach(e=>{this.ah(e,t)})}ah(t,e){let i=e.type===Z.SensitiveStatus||e.type===Z.RecordingContext;t.port&&(!i||t.initialStatusSent)&&bt.sendChannelMessage(t.port,e)}Qw(){this.Ce.forEach((t,e)=>{if(t.iframe.contentWindow){let i=this.eb(e);bt.sendPostMessage(t.iframe.contentWindow,"*",i)}})}Ww(){let t=this.sb();this.Ce.forEach(e=>{e.port?bt.sendChannelMessage(e.port,t):e.iframe.contentWindow&&bt.sendPostMessage(e.iframe.contentWindow,"*",t)})}eb(t){return bt.buildBaseMessage(Z.Discovery,he.Parent,this.h.projectId,t)}sb(){return bt.buildBaseMessage(Z.Stop,he.Parent,this.h.projectId)}ib(t,e){let i=this.Ce.get(t);if(i===void 0){B.error(`Parent received channel messaging initialization from unknow child id : ${t} (${this.rh})`);return}i.port=e,i.port.onmessage=r=>{this.ch(r,i)}}nb(t){if(!t.port)return;let e=bt.buildBaseMessage(Z.SensitiveStatus,he.Parent,this.h.projectId),i=this.Gw();this.da(t)&&(i.started=!1,i.capturedElementSelector="",i.useAnonymization=!0),e.content=i,bt.sendChannelMessage(t.port,e)}rb(t){if(!t.port)return;let e=bt.buildBaseMessage(Z.RecordingContext,he.Parent,this.h.projectId),i=this.$w();this.da(t)&&(i.isRecording=!1),e.content=i,bt.sendChannelMessage(t.port,e)}ch(t,e){if(e===void 0){B.error(`Parent received channelMessage from unknown child : ${csJSON.stringify(t.data)}`);return}let i=t.data.type,r=t.data.content;i===Z.EndOfBufferedMessages?(this.nb(e),this.rb(e),e.initialStatusSent=!0):this.jf(e.iframe,i,r)}oh(t){if(bt.isMessageValid(t,he.Child,this.h.projectId,this.h.hostnames))switch(t.data.type){case Z.Discovery:if(t.data.id===void 0){this.Hf();return}if(t.ports&&t.ports.length===1&&this.Ce.has(t.data.id)){this.ib(t.data.id,t.ports[0]);return}B.error(`Parent received wrong channelMessage initialization : (${t.origin}) : ${csJSON.stringify(t.data)}`);break;case Z.ChildLogMessage:this.jf(null,Z.ChildLogMessage,t.data.content);break;default:B.warn(`Parent received unexpected postMessage type from child (${t.origin}) : ${csJSON.stringify(t.data)}`)}}da(t){return k.isMaskedElement(t.iframe)||k.isMaskedElementChild(t.iframe)}}return s})(),zy=(()=>{class s{constructor(t){this.ob=t}buildApiErrors(t,e){let i=this.ob.collectDataPoints(t,e);if(i===null)return null;let r=this.ab(t,i);if(e){let o=this.cb(t,i);return{apiError:r,detailedApiError:o}}return{apiError:r}}cb(t,e){let i=this.Bf(t);return e.collectQueryParam&&t.queryParameters&&(i.queryParameters=t.queryParameters),e.collectRequestBody&&t.requestBody&&(i.requestBody=t.requestBody),e.collectResponseBody&&t.responseBody&&(i.responseBody=t.responseBody),Object.keys(e.standardRequestHeaders).length>0&&(i.standardRequestHeaders=e.standardRequestHeaders),Object.keys(e.standardResponseHeaders).length>0&&(i.standardResponseHeaders=e.standardResponseHeaders),Object.keys(e.customRequestHeaders).length>0&&(i.customRequestHeaders=csJSON.stringify(e.customRequestHeaders)),Object.keys(e.customResponseHeaders).length>0&&(i.customResponseHeaders=csJSON.stringify(e.customResponseHeaders)),Object.keys(e.plainCustomRequestHeaders).length>0&&(i.plainCustomRequestHeaders=e.plainCustomRequestHeaders),Object.keys(e.plainCustomResponseHeaders).length>0&&(i.plainCustomResponseHeaders=e.plainCustomResponseHeaders),e.plainResponseBodyAttributes&&Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainResponseBodyAttributes=e.plainResponseBodyAttributes),e.plainRequestBodyAttributes&&Object.keys(e.plainRequestBodyAttributes).length>0&&(i.plainRequestBodyAttributes=e.plainRequestBodyAttributes),Object.keys(e.responseBodyAttributes).length>0&&(i.responseBodyAttributes=csJSON.stringify(e.responseBodyAttributes)),Object.keys(e.requestBodyAttributes).length>0&&(i.requestBodyAttributes=csJSON.stringify(e.requestBodyAttributes)),i}Bf(t){return{errorType:"apiError",url:t.url,method:t.method,requestTime:t.requestTime,responseTime:t.responseTime,statusCode:t.statusCode,library:t.library}}ab(t,e){let i=this.Bf(t);return e.matchingBodyContents.length>0&&(i.matchingBodyContents=e.matchingBodyContents),Object.keys(e.plainResponseBodyAttributes).length>0&&(i.plainBodyResponseAttributes=e.plainResponseBodyAttributes),i}}return s})(),$y=(()=>{class s extends oo{constructor(t,e,i){super(),this.pa=t,this.fa=e,this.lb=i,this.lh=0,this.hb=new zy(i)}subscribe(t,e,i){i!=null&&i.detailedEvent&&(Object.defineProperty(e,"detailedEvent",{value:i.detailedEvent}),this.lh++),super.subscribe(t,e)}unsubscribe(t){var e;!((e=this.subscriptions[t])===null||e===void 0)&&e.hasOwnProperty("detailedEvent")&&this.lh--,super.unsubscribe(t)}init(){let t=this.lb.computeApiErrorCollectionOptions();this.pa.setCollectionOptions(t),this.pa.onEvent(e=>this.Ff(e)),this.fa.setCollectionOptions(t),this.fa.onEvent(e=>this.Ff(e))}onStartTracking(){this.pa.start(),this.fa.start()}onStopTracking(){this.pa.stop(),this.fa.stop()}Ff(t){let e=this.hb.buildApiErrors(t,this.lh!==0);if(e)for(let i in this.subscriptions){let r=this.subscriptions[i];r.hasOwnProperty("detailedEvent")?e.detailedApiError&&r(e.detailedApiError):r(e.apiError)}}}return s})(),Gy=(()=>{class s{constructor(t,e,i=!1){this.lt=t,this.K=e,this.Dr=i}addUrlMaskingPattern(t){this.lt.addUrlMaskingPattern(t)}anonymize(t){let e=this.K.removeQueryString(t.url),i={maskingPatterns:this.lt.getUrlMaskingPatterns(),partialMaskingPatterns:this.lt.getPartialUrlMaskingPatterns(),maskNames:this.Dr};return{...t,url:this.K.anonymizeUrl(e,i),library:t.library?this.K.anonymizeUrl(t.library,i):void 0}}}return s})(),qy="CS_ANONYMIZED_VALUE",Wy=(()=>{class s{constructor(t,e){this.I=t,this.A=e}anonymize(t){return T(t.message)&&(t.message=this.db(t.message),t.message=this.I.anonymizePII(t.message)),T(t.filename)&&(t.filename=this.A.computeOverriddenUrl(t.filename)),t}db(t){return csString.prototype.replace.call(t,/(value\s*=\s*".*"|value\s*=\s*'.*')/,`value='${qy}'`)}}return s})(),Yy=(()=>{class s extends oo{constructor(t){super(),this.pb=t,this.ks=[{boundElement:document,type:"touchstart",listener:e=>this.G(e)},{boundElement:document,type:"touchmove",listener:e=>this.G(e)},{boundElement:document,type:"touchend",listener:e=>this.G(e)}],this.kr=new _r,this.kr.onGesture((e,i)=>this.gl(e,i))}gl(t,e){for(let i in this.subscriptions){let r=this.subscriptions[i];r(t,e)}}onStartTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.ks,t=>ft(t))}onStopTracking(){this.canDetectGesture()&&csArray.prototype.forEach.call(this.ks,t=>gt(t))}canDetectGesture(){return typeof devicePixelRatio!="undefined"}G(t){this.pb.tryToExecute("process gesture event",()=>{if(this.kr.isValidTouchEvent(t))switch(t.type){case"touchstart":this.kr.processActionDown(t);break;case"touchmove":this.kr.processActionMove();break;case"touchend":this.kr.processActionUp(t);break}})()}static isSwipe(t){return t.type===At.FLICK||t.type===At.DRAG}}return s})(),Xy=(()=>{class s extends xt{constructor(t,e){super(),this.U=t,this.hh=e,this.zf=0}onStart(){B.isPerfLoggingActive()&&(this.Or=window.csSetInterval(()=>this.$f(),s.fb))}onStop(){B.isPerfLoggingActive()&&(this.$f(),csClearInterval(this.Or))}$f(){if(Yi.isEmpty||this.zf>=s.gb)return;this.zf++;let t={a:s.mb,l:s.yb,...this.hh.getRequestParameters()},e=[];Yi.forEach(i=>{csArray.prototype.forEach.call(i,r=>{csArray.prototype.push.call(e,{...r,...t})})}),this.U.send(e),Yi.clear()}}return s.mb="uxa",s.yb="perf",s.fb=5e3,s.gb=5,s})(),Ky=(()=>{class s{constructor(t,e,i){this.h=t,this.hh=e,this.St=i}init(){this.Gf=new Xy(this.St.create(this.h.getLoggerUri(),!0),this.hh)}onStartTracking(){this.Gf.start()}onOptout(){this.Gf.stop()}}return s})(),Jy=(()=>{class s{constructor(t,e){this.de=t,this.h=e,this.qf=!1}enableRecordingContext(t,e,i){this.qf=!0,this.Wi=t,this.w=e,this.mr=i}getRecordingContext(){var t,e,i;if(!this.qf)return{isRecording:!1,recordingStartTimestamp:0,etrState:qt.ETR_OFF,etrStatus:Kt.ETR_DISABLED,collectState:U.ANALYTICS_ONLY};let r=this.w.getSession();return{isRecording:this.Wi.isRecording(),useAnonymization:this.de.getSensitiveStatus().useAnonymization,enableOnlineResources:(t=this.Wi.getStaticResourceManagerStatus())===null||t===void 0?void 0:t.onlineAssets.activated,enableOnlineResourcesOnNextPageview:(e=this.Wi.getStaticResourceManagerStatus())===null||e===void 0?void 0:e.onlineAssets.enabledOnNextPageview,recordingStartTimestamp:parseInt(this.Wi.getRecordingStartTimestamp(),10),etrState:this.h.malkaEtrEnabled?qt.ETR_ON:qt.ETR_OFF,etrStatus:this.mr.getEtrStatus(r),collectState:(i=r==null?void 0:r.collectState)!==null&&i!==void 0?i:U.ANALYTICS_ONLY}}}return s})(),vi=(()=>{class s{static isRecordingSupported(){return"MutationObserver"in window&&"visibilityState"in document}static isAsyncSerializationSupported(){return"Promise"in window&&"findIndex"in csArray.prototype}}return s})(),Qy=(()=>{class s extends xt{constructor(t,e,i,r){super(),this.at=t,this.uh=e,this.J=i,this.ce=r,this.ga=[],this.Ms=0}init(){this.at.init()}initStates(){this.ph(),this.ga=[],this.Ms=0,this.Ul()}Ul(){this.es=M.now()}Ci(){return M.now()-this.es}onStart(){this.at.subscribe(s.Mt,t=>this.G(t))}onStop(){this.at.unsubscribe(s.Mt)}onIframeApiError(t){this.G(t)}G(t){this.isStarted&&this.Ms<s.fr&&(t.relativeTime=this.Ci(),csArray.prototype.push.call(this.ga,this.ce.anonymize(t)),this.Lr(),lt.counters.networkRequests.count("collected"))}ph(){this.uh.removeQueryParams(),this.uh.setQueryParams(this.J.getRequestParameters())}Lr(){this.uh.send({errors:this.ga}),this.ga=[],this.Ms+=1}}return s.Mt="ApiErrorsService",s.fr=20,s})(),Zy="api-errors",Rr=["api-errors:maskUrl"],tE=(()=>{class s{constructor(t,e,i,r,o,c,l){this.at=t,this.ce=e,this.h=i,this.J=r,this.et=o,this.f=c,this.St=l}init(){let t=this.St.create(`${this.h.getTrackerUri()}/${Zy}`,!0);this.Pi=new Qy(this.at,t,this.J,this.ce),this.Pi.init(),this.et.addListener(this.Pi),this.ht()}ht(){this.f.register(Rr,t=>{if(!T(t))throw new Error(`Command misuse: ${Rr[0]}`);this.ce.addUrlMaskingPattern(t)})}onStartTracking(){this.Pi.start()}onAfterNaturalPageView(){this.Pi.initStates()}onAfterArtificialPageView(){this.Pi.initStates()}onBeforeSessionRenewal(){this.Pi.stop()}onOptout(){this.Pi.stop()}}return s})(),eE=20,sE="Custom Error:",iE="https://cserror.com/texterror.js",nE=(()=>{class s extends xt{constructor(t,e,i,r,o,c){super(),this.vs=t,this.fh=e,this.J=i,this.ae=r,this.Fs=o,this.A=c,this.ma=[],this.Si=0,this.Oi=[]}initStates(){this.es=M.now(),this.fh.removeQueryParams(),this.fh.setQueryParams(this.J.getRequestParameters()),this.ma=[],this.Si=0}onStart(){this.vs.subscribe(s.Mt,t=>this.G(t)),this.gh()}onStop(){this.vs.unsubscribe(s.Mt)}onIframeJavascriptError(t){this.G(t)}trackCustomError(t){let e={errorType:"jsError",message:`${sE} ${t}`,lineno:1,colno:1,filename:iE};this.xr(e)}xr(t){if(this.isStarted){let e=this.G(t);e&&this.Fs.emitCustomJavaScriptErrorEvent(e)}else csArray.prototype.push.call(this.Oi,t)}gh(){this.isStarted&&(csArray.prototype.forEach.call(this.Oi,t=>this.xr(t)),this.Oi=[])}G(t){if(this.isStarted&&this.Si<eE){let e={...t,pageUrl:this.A.getAnonymizedUrl(),rt:this.Ci()};return this.ae.anonymize(e),csArray.prototype.push.call(this.ma,e),this.Lr(),e}return null}Ci(){return M.now()-this.es}Lr(){this.fh.send({errors:this.ma}),this.ma=[],this.Si+=1}}return s.Mt="JavaScriptErrorsService",s})(),Cn=["trackError"],rE="errors",oE=(()=>{class s{constructor(t,e,i,r,o,c,l,h,g){this.vs=t,this.ae=e,this.h=i,this.J=r,this.et=o,this.f=c,this.Fs=l,this.A=h,this.St=g}init(){let t=this.St.create(`${this.h.getTrackerUri()}/${rE}`,!0);this.Ni=new nE(this.vs,t,this.J,this.ae,this.Fs,this.A),this.et.addListener(this.Ni),this.ht()}ht(){this.h.jsCustomErrorsEnabled&&!this.h.customErrors.enabled&&this.f.register(Cn,t=>{this.Ni.trackCustomError(t)})}onStartTracking(){this.Ni.start()}onAfterNaturalPageView(){this.Ni.initStates()}onAfterArtificialPageView(){this.Ni.initStates()}onBeforeSessionRenewal(){this.Ni.stop()}onOptout(){this.Ni.stop()}}return s})(),aE=(()=>{let s;return function(n){function o(h,g,d=!1){let y={message:ct.truncate(h,300,ct.ELLIPSIS),errorType:"customError"};return(d||l(g))&&(c(g),y.attributes=g),y}n.buildCustomErrorEvent=o;function c(h){for(let g in h){let d=h[g];if(typeof d=="string"&&d.length>30&&(d=ct.truncate(d,30,ct.ELLIPSIS),h[g]=d),g.length>30){let E=ct.truncate(g,30,ct.ELLIPSIS);delete h[g],h[E]=d}}}function l(h){let g=Object.keys(h).length;return g>0&&g<=5}}(s||(s={})),s})(),cE=20,lE=(()=>{class s extends xt{constructor(t,e,i,r,o){super(),this.mh=t,this.J=e,this.Ys=i,this.Q=r,this._s=o,this.ya=[],this.vi=0,this.Oi=[]}initStates(){var t;this.ph(),this.es=M.now(),this.ya=[],this.vi=0,(t=this._s)===null||t===void 0||t.onEvent(e=>this.G(e))}trackCustomError(t,e={}){if(!(T(t)&&ss(e)&&mt(e)))throw new Error(`Command misuse: ${Cn[0]}`);let i=aE.buildCustomErrorEvent(t,e);this.xr(i)}onIframeCustomError(t){this.G(t)}onStart(){var t;this.gh(),(t=this._s)===null||t===void 0||t.start()}onStop(){var t;(t=this._s)===null||t===void 0||t.stop()}gh(){this.isStarted&&(csArray.prototype.forEach.call(this.Oi,t=>this.xr(t)),this.Oi=[])}xr(t){if(this.isStarted){let e=this.G(t);e&&this.Q.emitCustomErrorEvent(e)}else csArray.prototype.push.call(this.Oi,t)}G(t){if(this.isStarted&&this.vi<cE){let e=this.Eb(t);return csArray.prototype.push.call(this.ya,e),this.Lr(),e}return null}Eb(t){let e={...t,rt:this.Ci()};return e.message=this.Ys.anonymize(t.message),e}ph(){this.mh.removeQueryParams(),this.mh.setQueryParams(this.J.getRequestParameters())}Ci(){return M.now()-this.es}Lr(){this.mh.send({errors:this.ya}),this.ya=[],this.vi+=1}}return s})(),hE="custom-errors",uE=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.Ys=t,this.h=e,this.J=i,this.f=r,this.Fs=o,this.St=c,this.et=l,this._s=h}init(){let t=this.St.create(`${this.h.getTrackerUri()}/${hE}`,!0);this.Mi=new lE(t,this.J,this.Ys,this.Fs,this._s),this.et.addListener(this.Mi),this.ht()}ht(){this.f.register(Cn,(t,e)=>{this.Mi.trackCustomError(t,e)})}onStartTracking(){this.Mi.start()}onAfterNaturalPageView(){this.Mi.initStates()}onAfterArtificialPageView(){this.Mi.initStates()}onBeforeSessionRenewal(){this.Mi.stop()}onOptout(){this.Mi.stop()}}return s})(),dE=(()=>{class s{constructor(){this.yh=Ji.Natural}setPageViewType(t){this.yh=t}getPageViewType(){return this.yh}getRequestParameters(){return{pvt:this.yh}}}return s})(),pE=(()=>{class s{constructor(t){this.X=t}onAfterVisitorRenewal(){this.X.renewSession()}}return s})();var fE=(()=>{let s;return function(n){function t(){let i=navigator.userAgent+navigator.language+navigator.platform,r=csString.prototype.slice.call(e(i).toString(16),-4),o=new csDate().getTime(),c="xxxxxxxx-hhhh-axxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,l=>{let h=(o+Math.random()*16)%16|0;return o=Math.floor(o/16),(l==="x"?h:h&7|8).toString(16)});return csString.prototype.replace.call(c,"hhhh",r)}n.generate=t;function e(i){let r=0;for(let o=0;o<i.length;o+=1)r=csString.prototype.charCodeAt.call(i,o)+(r<<6)+(r<<16)-r;return Math.abs(r)}}(s||(s={})),s})();var _e;(function(s){s.replayRecordingUnmaskedUrlRegex="replayRecordingUnmaskedUrlRegex",s.replayRecordingMaskedUrlRegex="replayRecordingMaskedUrlRegex",s.replayRecordingUnmaskedUrlRegexRules="replayRecordingUnmaskedUrlRegexRules",s.replayRecordingMaskedUrlRegexRules="replayRecordingMaskedUrlRegexRules"})(_e||(_e={}));var ue;(function(s){s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(ue||(ue={}));var gE=(()=>{class s{constructor(t,e,i,r){this.pe=t,this.h=e,this.A=i,this.jr=r}init(){this.Lb()}shouldMaskNonTextElements(){if(this.h.anonymisationMethod!==_e.replayRecordingMaskedUrlRegexRules)return!1;if(this.h.isSMB)return this.shouldUseAnonymization();let t=this.jr.getMatchingRules(this.A.getAnonymizedUrl());return csArray.prototype.some.call(t,e=>e.maskMedia)}shouldUseAnonymization(){if(this.pe.isReplayUnanonymizedAllowedByConsent()){switch(this.h.anonymisationMethod){case null:case _e.replayRecordingMaskedUrlRegex:return!!(this.h.replayRecordingMaskedUrlRegex&&this.h.replayRecordingMaskedUrlRegex.test(this.A.getAnonymizedUrl()));case _e.replayRecordingMaskedUrlRegexRules:return this.jr.evaluateUrl(this.A.getAnonymizedUrl())}return!1}else{switch(this.h.anonymisationMethod){case null:case _e.replayRecordingUnmaskedUrlRegex:return!(this.h.replayRecordingUnmaskedUrlRegex&&this.h.replayRecordingUnmaskedUrlRegex.test(this.A.getAnonymizedUrl()));case _e.replayRecordingUnmaskedUrlRegexRules:return!this.jr.evaluateUrl(this.A.getAnonymizedUrl())}return!0}}Lb(){this.h.anonymisationMethod===_e.replayRecordingMaskedUrlRegexRules&&this.h.replayRecordingMaskedUrlRegexRules?this.jr.setRegexRules(this.h.replayRecordingMaskedUrlRegexRules):this.h.anonymisationMethod===_e.replayRecordingUnmaskedUrlRegexRules&&this.h.replayRecordingUnmaskedUrlRegexRules&&this.jr.setRegexRules(this.h.replayRecordingUnmaskedUrlRegexRules)}}return s})(),ne;(function(s){s.REGEX="regex",s.START="start",s.NOT_START="not-start",s.END="end",s.NOT_END="not-end",s.CONTAIN="contain",s.NOT_CONTAIN="not-contain",s.EXACT="exact",s.NOT_EXACT="not-exact"})(ne||(ne={}));var $a;(function(s){s.REGEX="regex",s.OPERATOR="operator",s.TURN_OFF="turn-off"})($a||($a={}));var Al=(()=>{class s{constructor(){this.bh=[]}setRegexRules(t){this.bh=csArray.prototype.filter.call(csArray.prototype.map.call(t,e=>this.xb(e)),e=>e!==null)}evaluateUrl(t){return csArray.prototype.some.call(this.bh,e=>this.Qf(t,e))}getMatchingRules(t){return csArray.prototype.filter.call(this.bh,e=>this.Qf(t,e))}Qf(t,e){var i,r;let o=this.Ub(t,e);return!this.Vb(e)||!this.jb(e)?!1:!!(e!=null&&e.notOperator?!(!((i=e.regex)===null||i===void 0)&&i.test(o)):!((r=e.regex)===null||r===void 0)&&r.test(o))}Vb(t){let e=new csDate,i=t.startDate&&t.startDate>e,r=t.endDate&&t.endDate<e;return!i&&!r}jb(t){let e=t.samplingRate!==100,i=e&&Es.boolean(t.samplingRate);return!e||i}Ea(t){return!Vt(t,"http://")&&!Vt(t,"https://")?`https://${t}`:t}Ub(t,e){let i=zr(this.Ea(t));return i?e.ignoreQueryParams&&e.ignoreURIFragments?`${i.origin}${i.pathname}`:e.ignoreQueryParams?`${i.origin}${i.pathname}${i.hash}`:e.ignoreURIFragments?`${i.origin}${i.pathname}${i.search}`:t:t}Sa(t){return t!=null&&t.ignoreCaseSensitivity?"i":""}xb(t){let e=null,i=!1;switch(t.operator){case ue.NOT_START:case ne.NOT_START:i=!0;case ue.START:case ne.START:e=new csRegExp(`^${t.value}`,this.Sa(t));break;case ue.NOT_END:case ne.NOT_END:i=!0;case ue.END:case ne.END:e=new csRegExp(`${t.value}$`,this.Sa(t));break;case ue.NOT_CONTAIN:case ne.NOT_CONTAIN:i=!0;case ue.CONTAIN:case ne.CONTAIN:case ne.REGEX:e=new csRegExp(`${t.value}`,this.Sa(t));break;case ue.NOT_EXACT:case ne.NOT_EXACT:i=!0;case ue.EXACT:case ne.EXACT:e=new csRegExp(`^${t.value}$`,this.Sa(t));break;default:B.warn(`compileRegexRule, unknown operator: ${t.operator}`)}if(e===null)return null;let r=t.startDate?this.Zf(t.startDate):void 0,o=t.endDate?this.Zf(t.endDate):void 0;return{regex:e,ignoreQueryParams:t.ignoreQueryParams,ignoreURIFragments:t.ignoreURIFragments,notOperator:i,maskMedia:t.maskMedia,samplingRate:t.samplingRate!==void 0?t.samplingRate:100,startDate:r,endDate:o}}Zf(t){let e=new csDate(t);return isNaN(e.getTime())?void 0:e}}return s})(),Tl=(()=>{class s{constructor(){this.Hb=["application/json","application/graphql","application/xml","text/plain","text/csv","text/html","text/xml","text/javascript"]}setCollectionOptions(t){this.Ah=t}isValidBodyType(t){let e=t["content-type"];if(!e)return!1;let i=csString.prototype.toLocaleLowerCase.call(e);return on(this.Hb,r=>Oe(i,r))}canCollect(t,e){return this.Bb(t,e)&&this.Fb(e)}Bb(t,e){return t>=400||t>=200&&t<300&&this.Ah.statusCodes.has(t)&&this.Th(e)}Th(t){return on(this.Ah.urls,e=>csString.prototype.indexOf.call(t,e)!==-1)}Fb(t){return Vr(this.Ah.excludedDomains,e=>csString.prototype.indexOf.call(t,e)===-1)}}return s})(),mE=0,yE=(()=>{class s extends Tl{constructor(){super(),this.zt=csSymbol("ApiCall"),this.N=!1,this._n=null,this.wn=null,this.va=null,this.zb=({context:t,args:e,callerName:i})=>this.interceptOpen(t,e,i),this.$b=({context:t,args:e})=>this.interceptSetRequestHeader(t,e),this.Gb=({context:t,args:e})=>this.interceptSend(t,e)}onEvent(t){this.O=t}start(){this.N||(this.Rh(),this._n&&this._n.activate(),this.wn&&this.wn.activate(),this.va&&this.va.activate(),this.N=!0)}stop(){this.N&&(this._n&&this._n.deactivate(),this.wn&&this.wn.deactivate(),this.N=!1)}Rh(){this._n||(this._n=Gt({target:XMLHttpRequest.prototype,methodName:"open",hook:this.zb,options:{withCallerName:!0}})),this.wn||(this.wn=Gt({target:XMLHttpRequest.prototype,methodName:"setRequestHeader",hook:this.$b})),this.va||(this.va=Gt({target:XMLHttpRequest.prototype,methodName:"send",hook:this.Gb}))}interceptOpen(t,e,i){if(!e[1]||!T(e[1]))return;let[r,o]=csString.prototype.split.call(e[1],"?");t[this.zt]={library:i,requestTime:M.now(),method:e[0],url:ge(r),queryParameters:o,statusCode:mE,responseHeaders:{},requestHeaders:{},responseBody:"",requestBody:""},t.addEventListener("readystatechange",()=>this.readyStateChangeListener(t))}readyStateChangeListener(t){t[this.zt]&&t.readyState===XMLHttpRequest.DONE&&this.canCollect(t.status,t[this.zt].url)&&(t[this.zt].responseTime=M.now(),t[this.zt].statusCode=t.status,t[this.zt].responseHeaders=this.qb(t.getAllResponseHeaders()),super.isValidBodyType(t[this.zt].responseHeaders)&&(t.responseType===""||t.responseType==="text")&&(t[this.zt].responseBody=t.responseText),this.O(t[this.zt]))}interceptSetRequestHeader(t,e){if(!t[this.zt])return;let i=e[0],r=csString.prototype.valueOf.call(new csString(e[1]));typeof i!="string"||r.length===0||(i=csString.prototype.toLowerCase.call(csString.prototype.trim.call(i)),r=csString.prototype.trim.call(r),t[this.zt].requestHeaders[i]?t[this.zt].requestHeaders[i]+=`, ${r}`:t[this.zt].requestHeaders[i]=r)}interceptSend(t,e){t[this.zt]&&super.isValidBodyType(t[this.zt].requestHeaders)&&typeof e[0]=="string"&&(t[this.zt].requestBody=e[0])}qb(t){let e={};return csArray.prototype.forEach.call(csString.prototype.split.call(t,/[\r\n]+/),i=>{let[r,o]=csString.prototype.split.call(i,/:\s*/);o&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(o))}),e}}return j([P("XhrRequestTracker.interceptOpen")],s.prototype,"interceptOpen",null),j([P("XhrRequestTracker.readyStateChangeListener")],s.prototype,"readyStateChangeListener",null),j([P("XhrRequestTracker.interceptSetRequestHeader")],s.prototype,"interceptSetRequestHeader",null),j([P("XhrRequestTracker.interceptSend")],s.prototype,"interceptSend",null),s})(),EE=(()=>{class s extends Tl{constructor(){super(),this.N=!1,this.bn=null,this.Wb=({result:t,args:e,callerName:i})=>{this.interceptFetch(t,e,i)}}onEvent(t){this.O=t}start(){this.N||this.Yb()&&(this.Xb(),this.bn&&this.bn.activate(),this.N=!0)}stop(){this.N&&(this.bn&&this.bn.deactivate(),this.N=!1)}Yb(){return!!window.fetch&&typeof window.fetch=="function"}Kb(t){if(t[0]&&typeof t[0].clone=="function"){let e=Us(t);return e[0]=t[0].clone(),e}return t}Xb(){this.bn||(this.bn=Gt({target:window,methodName:"fetch",hook:this.Wb,hookPrepareArgs:this.Kb,options:{withCallerName:!0}}))}async interceptFetch(t,e,i){let r=e[0],o=e[1],c=new Request(r,o);if(!T(c.url))return;let l=M.now(),h;try{h=await t}catch(y){if(this.Jb(y)||this.tg(y)||this.Qb(y)||this.Zb(y))return;throw y}let[g,d]=csString.prototype.split.call(c.url,"?"),E=ge(g);if(h&&super.canCollect(h.status,E)){let y={library:i,method:c.method,url:E,queryParameters:d,requestTime:l,responseTime:M.now(),statusCode:h.status,requestBody:"",responseBody:"",requestHeaders:this.eg(c.headers),responseHeaders:this.eg(h.headers)};if(!h.bodyUsed&&super.isValidBodyType(y.responseHeaders))try{y.responseBody=await h.clone().text()}catch(S){if(this.tg(S))return}super.isValidBodyType(y.requestHeaders)&&(y.requestBody=await c.text()),this.O(y)}}Jb(t){return t instanceof TypeError}tg(t){return t instanceof DOMException&&t.name==="AbortError"}Zb(t){return t instanceof DOMException&&t.name==="TimeoutError"}Qb(t){return t instanceof DOMException&&csArray.prototype.some.call(s.tA,e=>e===t.name)}eg(t){let e={};return t.forEach((i,r)=>{i&&(e[csString.prototype.toLowerCase.call(r)]=csString.prototype.trim.call(i))}),e}}return s.tA=["NoModificationAllowedError","InvalidStateError","OperationError"],j([P("FetchRequestTracker.interceptFetch")],s.prototype,"interceptFetch",null),s})(),SE=(()=>{class s{constructor(){this.eA=64e3,this.sA=5e3,this.iA=2e3,this.sg=8e3,this.fs=!!self.TextEncoder,this.fs&&(this.nA=new TextEncoder)}Hr(t){return this.nA.encode(t).byteLength}ig(t,e,i){let r=0;t[e]&&(r+=this.Hr(t[e]),r>this.sg&&(r=0,t[e]=ct.ELLIPSIS)),t[i]&&(r+=this.Hr(csJSON.stringify(t[i])),r>this.sg&&(t[i]=s.truncatedObjectMarker))}rA(t){t.queryParameters&&this.Hr(t.queryParameters)>this.iA&&(t.queryParameters=ct.ELLIPSIS)}oA(t){t.requestBody&&this.Hr(t.requestBody)>this.eA&&(t.requestBody=ct.ELLIPSIS),t.responseBody&&this.Hr(t.responseBody)>this.sA&&(t.responseBody=ct.ELLIPSIS)}truncate(t){this.fs?(this.rA(t),this.oA(t),this.ig(t,"customResponseHeaders","plainCustomResponseHeaders"),this.ig(t,"customRequestHeaders","plainCustomRequestHeaders")):(t.queryParameters="",t.requestBody="",t.responseBody="",t.customResponseHeaders="",t.customRequestHeaders="",t.plainCustomResponseHeaders={},t.plainCustomRequestHeaders={})}}return s.truncatedObjectMarker={[ct.ELLIPSIS]:ct.ELLIPSIS},s})(),vE=(()=>{let s;return function(n){function t(r){let o="[",c="]",l=[];for(let h=0;h<r.length;++h)if(r[h]===o)csArray.prototype.push.call(l,r[h]);else if(r[h]===c)if(csString.prototype.indexOf.call(r,o)>-1)csArray.prototype.pop.call(l);else return!1;return l.length===0}function e(r){if(!r)return!0;if(!t(r))return!1;let o=csString.prototype.split.call(r,/[\[\]]/);return csArray.prototype.every.call(o,c=>{let l=c[0],h=c[c.length-1];if((l==="'"||l==='"')&&l!==h)return!1;let g=csString.prototype.split.call(c,".");return g[0].length===0&&csArray.prototype.shift.call(g),csArray.prototype.every.call(g,d=>{let E=/^\-?\d+$/.exec(d);return E?parseInt(E[0],10)>=0:d==="$"||/\w+/.test(d)})})}n.isValidJSONPath=e;function i(r,o){if(!r)return;let c=csString.prototype.split.call(r,/[\$\[\]]/),l=[];csArray.prototype.forEach.call(c,g=>{if(g[0]==="'"||g[0]==='"'){csArray.prototype.push.call(l,csString.prototype.substring.call(g,1,g.length-1));return}csArray.prototype.push.call(l,...csArray.prototype.filter.call(csString.prototype.split.call(g,"."),d=>d.length>0))}),l[0]==="$"&&csArray.prototype.shift.call(l);let h=o;for(let g of l)if(h[g]!==void 0)h=h[g];else return;return h}n.getJSONPathValue=i}(s||(s={})),s})(),_E=(()=>{class s{constructor(){this.aA=new Set(["age","cache-control","clear-site-data","expires","pragma","warning","downlink","ect","rtt","last-modified","connection","keep-alive","accept","accept-encoding","accept-language","expect","access-control-allow-origin","access-control-allow-credentials","access-control-allow-headers","access-control-allow-methods","access-control-expose-headers","access-control-max-age","access-control-request-headers","access-control-request-method","origin","timing-allow-origin","content-length","content-type","content-encoding","content-language","via","host","referrer-policy","user-agent","allow","server","accept-ranges","range","if-range","content-range","cross-origin-embedder-policy","cross-origin-opener-policy","cross-origin-resource-policy","content-security-policy","content-security-policy-report-only","expect-ct","feature-policy","strict-transport-security","upgrade-insecure-requests","x-content-type-options","x-download-options","x-frame-options","x-permitted-cross-domain-policies","x-powered-by","x-xss-protection","sec-fetch-site","sec-fetch-mode","sec-fetch-user","sec-fetch-dest"])}isValidStandardHeader(t){return this.aA.has(t)}}return s})(),Rl=(()=>{class s{constructor(){this.cA=64e3,this.lA=100,this.L={collectQueryParam:!1,collectRequestBody:!1,collectResponseBody:!1,matchingBodyContents:[],plainResponseBodyAttributes:{},plainRequestBodyAttributes:{},requestBodyAttributes:{},responseBodyAttributes:{},standardRequestHeaders:{},standardResponseHeaders:{},customRequestHeaders:{},customResponseHeaders:{},plainCustomRequestHeaders:{},plainCustomResponseHeaders:{}},this.ng=new _E}hA(t){return t.length<=this.cA}uA(t){let e=t["content-type"];return e!==void 0&&(Vt(e,"application/json")||Vt(e,"application/graphql"))}dA(t,e){return t&&this.hA(t)&&this.uA(e)}_a(t,e,i,r){let o=r==="request"?this.pA:this.fA;if(o!==void 0||this.dA(e,i)){if(o===void 0)try{o=csJSON.parse(e),r==="request"?this.pA=o:this.fA=o}catch{return}let c=vE.getJSONPathValue(t,o);if(c!==void 0&&(c===null||!ss(c))){let l=T(c)?c:csJSON.stringify(c);return ct.truncate(l,this.lA,ct.ELLIPSIS)}}}isBodyAttributeValueFound(t,e){let i,r;return(e.type==="request-response"||e.type==="response")&&(i=this._a(e.path,t.responseBody,t.responseHeaders,"response")),(e.type==="request-response"||e.type==="request")&&(r=this._a(e.path,t.requestBody,t.requestHeaders,"request")),W(i)||W(r)}collectBodyAttribute(t,e,i){let r;(e.type==="request-response"||e.type==="response")&&(r=this._a(e.path,t.responseBody,t.responseHeaders,"response"),r&&(e.encrypted?this.L.responseBodyAttributes[e.path]=r:(r=i(r),this.L.plainResponseBodyAttributes[e.path]=r))),(e.type==="request-response"||e.type==="request")&&(r=this._a(e.path,t.requestBody,t.requestHeaders,"request"),r&&(e.encrypted?r&&(this.L.requestBodyAttributes[e.path]=r):(r=i(r),this.L.plainRequestBodyAttributes[e.path]=r)))}isBodyContentMatching(t,e){return t.responseBody?!!new csRegExp(e,"i").test(t.responseBody):!1}collectBodyContent(t){csArray.prototype.indexOf.call(this.L.matchingBodyContents,t)===-1&&csArray.prototype.push.call(this.L.matchingBodyContents,t)}collectCustomHeaders(t,e,i){let r=csString.prototype.toLocaleLowerCase.call(e.headerName);t.responseHeaders[r]&&(e.type==="request-response"||e.type==="response")&&(e.encrypted?this.L.customResponseHeaders[r]=t.responseHeaders[r]:this.L.plainCustomResponseHeaders[r]=i(t.responseHeaders[r])),t.requestHeaders[r]&&(e.type==="request-response"||e.type==="request")&&(e.encrypted?this.L.customRequestHeaders[r]=t.requestHeaders[r]:this.L.plainCustomRequestHeaders[r]=i(t.requestHeaders[r]))}collectStandardHeaders(t){if(!(Object.keys(this.L.standardRequestHeaders).length>0||Object.keys(this.L.standardResponseHeaders).length>0)){for(let[e,i]of Object.entries(t.requestHeaders))this.ng.isValidStandardHeader(e)&&(this.L.standardRequestHeaders[e]=i);for(let[e,i]of Object.entries(t.responseHeaders))this.ng.isValidStandardHeader(e)&&(this.L.standardResponseHeaders[e]=i)}}setCollectQueryParam(t){t&&(this.L.collectQueryParam=!0)}setCollectResponseBody(t){t&&(this.L.collectResponseBody=!0)}setCollectRequestBody(t){t&&(this.L.collectRequestBody=!0)}getCollectedDataPoints(){return this.L}}return s})(),Ce=(()=>{let s;return function(n){n.CONTENTSQUARE="contentsquare.net",n.CLICKTALE="clicktale.net",n.FAKE_TRACKER="fake-tracker.content-square.fr"}(s||(s={})),s})(),Cl=(()=>{class s{computeApiErrorCollectionOptions(){let t=new Set,e=[];if(this.rules)for(let r of this.rules)r.statusCode!==void 0&&t.add(r.statusCode),r.url!==void 0&&csArray.prototype.indexOf.call(e,r.url)===-1&&csArray.prototype.push.call(e,r.url);let i=[Ce.CONTENTSQUARE,Ce.CLICKTALE];return csArray.prototype.push.call(i,Ce.FAKE_TRACKER),{statusCodes:t,urls:e,excludedDomains:i}}}return s})(),wE=(()=>{class s extends Cl{constructor(t,e){super(),this.Tt=t,this.I=e,this.rules=t.collectionRules}collectDataPoints(t,e){this.L=new Rl;let i=!1;if(this.Tt.collectionRules)for(let r of this.Tt.collectionRules)this.gA(r,t)&&this.mA(r,t)&&this.yA(r,t)&&(i=!0,this.EA(t,r,e));return i||(i=this.SA(t)),i&&e&&this.Tt.collectStandardHeaders&&this.L.collectStandardHeaders(t),i?this.L.getCollectedDataPoints():null}computeApiErrorCollectionOptions(){let t=this.Tt.collectionRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[Ce.CONTENTSQUARE,Ce.CLICKTALE];return csArray.prototype.push.call(r,Ce.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}gA(t,e){return(!t.statusCode&&e.statusCode>=400||t.statusCode!==void 0&&t.statusCode===e.statusCode)&&(!t.url||csString.prototype.indexOf.call(e.url,t.url)!==-1)}mA(t,e){return t.bodyContent?this.L.isBodyContentMatching(e,t.bodyContent):!0}yA(t,e){let i=csArray.prototype.find.call(t.bodyAttributePaths,r=>r.primary);return i===void 0?!0:this.L.isBodyAttributeValueFound(e,i)}SA(t){return t.statusCode>=400}EA(t,e,i){e.bodyContent&&this.L.collectBodyContent(e.bodyContent);let r=pe(e.bodyAttributePaths,o=>o.primary===1);if(r&&this.L.collectBodyAttribute(t,r,o=>this.I.anonymizePII(o)),i){this.L.setCollectQueryParam(e.collectQueryParam),this.L.setCollectResponseBody(e.collectResponseBody),this.L.setCollectRequestBody(e.collectRequestBody);for(let c of e.customHeaders)this.L.collectCustomHeaders(t,c,l=>this.I.anonymizePII(l));let o=yi(e.bodyAttributePaths,c=>!c.primary);for(let c of o)this.L.collectBodyAttribute(t,c,l=>this.I.anonymizePII(l))}}}return s})(),bE=(()=>{class s extends Cl{constructor(t,e){super(),this.Tt=t,this.I=e,this.rules=t.configurableApiErrorRules}collectDataPoints(t,e){this.L=new Rl;let i=this.vA(t,this.Tt.configurableApiErrorRules);return i.isMatching?(i.matchingBodyContents.length>0&&this.L.collectBodyContent(i.matchingBodyContents[0]),e&&this._A(t),this.L.getCollectedDataPoints()):null}computeApiErrorCollectionOptions(){let t=this.Tt.configurableApiErrorRules||[],e=new Set,i=[];for(let o of t)o.statusCode!==void 0&&e.add(o.statusCode),o.url!==void 0&&csArray.prototype.indexOf.call(i,o.url)===-1&&csArray.prototype.push.call(i,o.url);let r=[Ce.CONTENTSQUARE,Ce.CLICKTALE];return csArray.prototype.push.call(r,Ce.FAKE_TRACKER),{statusCodes:e,urls:i,excludedDomains:r}}vA(t,e){if(t.statusCode>=400)return{isMatching:!0,matchingBodyContents:[]};if(e){for(let i of e)if(this.wA(t,i))return{isMatching:!0,matchingBodyContents:i.bodyContent?[i.bodyContent]:[]}}return{isMatching:!1,matchingBodyContents:[]}}wA(t,e){return!!(t.statusCode===e.statusCode&&csString.prototype.indexOf.call(t.url,e.url)!==-1&&(!e.bodyContent||this.L.isBodyContentMatching(t,e.bodyContent)))}_A(t){this.Tt.collectStandardHeaders&&this.L.collectStandardHeaders(t),this.Tt.validCustomHeaders&&this.rg(t,this.Tt.validCustomHeaders,1),this.Tt.plainCustomHeaders&&this.rg(t,this.Tt.plainCustomHeaders,0),this.Th(t.url,this.Tt.validUrls)&&(this.Tt.collectQueryParam&&this.L.setCollectQueryParam(Number(this.Tt.collectQueryParam)),this.Tt.collectResponseBody&&this.L.setCollectResponseBody(Number(this.Tt.collectResponseBody)),this.Tt.collectRequestBody&&this.L.setCollectRequestBody(Number(this.Tt.collectRequestBody)))}rg(t,e,i){for(let r of e)this.L.collectCustomHeaders(t,{headerName:r,encrypted:i,type:"request-response"},o=>this.I.anonymizePII(o))}Th(t,e){return e?csArray.prototype.some.call(e,i=>csString.prototype.indexOf.call(t,i)!==-1):!1}}return s})();var AE=(()=>{class s extends Ee{constructor(t){super(),this.V=null,this.wa=null,this.P=null,this.Vs=null,this.og=["value","checked","src","data","alt"],this.ba={state:k.MaskedElementState.Child},this.AA=e=>{for(let i of e){if(k.isMaskedElement(i.target)||k.isMaskedElementChild(i.target))for(let r=0;r<i.addedNodes.length;r+=1){let o=i.addedNodes[r];k.isMaskedElement(o)||k.isMaskedElementChild(o)||dt(o)&&this.ag(o)}for(let r=0;r<i.removedNodes.length;r+=1){let o=i.removedNodes[r];rt.isConnected(o)||this.cg(o)}}},this.TA=t}setMaskedElementSettings(t){this.ws=t}startIdentifier(){this.isStarted||(this.isStarted=!0,this.onStart())}stopIdentifier(){return this.isStarted=!1,this.onStop()}start(){}stop(){}onStart(){var t,e,i,r;this.ws||(pt.error("maskedElementSettings not initialized","MaskedElementIdentifier.start"),this.ws={elementSelector:"",attrSelector:"",attrSelectors:[]});let{elementSelector:o,attrSelector:c,attrSelectors:l}=this.ws;(t=this.Vs)!==null&&t!==void 0||(this.Vs=this.RA()),o.length!==0&&((e=this.V)!==null&&e!==void 0||(this.V=this.CA()),this.V.observe(o)),c.length!==0&&((i=this.wa)!==null&&i!==void 0||(this.wa=this.IA(l)),this.wa.observe(c)),(r=this.P)!==null&&r!==void 0||(this.P=new ye(this.AA,(h,g)=>g==="added"&&this.PA(h))),this.P.observe(),csSetTimeout(this.TA)}onStop(){var t,e,i;this.V&&(this.cg(document),this.V.disconnect()),(t=this.wa)===null||t===void 0||t.disconnect(),(e=this.P)===null||e===void 0||e.disconnect(),(i=this.Vs)===null||i===void 0||i.disconnect()}RA(){return window.ResizeObserver?new ResizeObserver(t=>{csArray.prototype.forEach.call(t,e=>{this.resizeObserverCallback(e)})}):null}CA(){return new oe(t=>{csArray.prototype.forEach.call(t,e=>{this.OA(e)?this.ag(e):(this.NA(e),this.MA(e))})})}IA(t){return new oe(e=>{csArray.prototype.forEach.call(e,i=>this.DA(i,t))})}resizeObserverCallback(t){let e=t.target.getBoundingClientRect(),i=k.getMaskedElementDetails(t.target);if(i.state!==k.MaskedElementState.Parent||e.width===i.width&&e.height===i.height)return;let r={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t.target,r),this.produceEvent({type:"ResizeMaskedElement",target:nt(t.target),width:e.width,height:e.height})}MA(t){!this.Vs||!dt(t)||gn(t)||this.Vs.observe(t)}OA(t){let e=csNodeparentNode.apply(t);return e?k.isMaskedElement(e)||k.isMaskedElementChild(e):mi(t)?k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host):!1}PA(t){(k.isMaskedElement(t.host)||k.isMaskedElementChild(t.host))&&k.setMaskedElementProperty(t,this.ba)}cg(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{k.unsetMaskedElementProperty(i)})}NA(t){let e=t.getBoundingClientRect(),i={state:k.MaskedElementState.Parent,width:e.width,height:e.height};k.setMaskedElementProperty(t,i),this.kA(t),Zt(t).visitAll(r=>r!=t&&k.setMaskedElementProperty(r,this.ba))}ag(t){k.setMaskedElementProperty(t,this.ba),Zt(t).visitAll(e=>e!=t&&k.setMaskedElementProperty(e,this.ba))}kA(t){var e;let i=(e=Y.getProperty(t,k.maskedAttributeProp))!==null&&e!==void 0?e:{attributes:[]};for(let r=0;r<this.og.length;r+=1){let o=this.og[r];csArray.prototype.indexOf.call(i.attributes,o)===-1&&csArray.prototype.push.call(i.attributes,o)}i.attributes.length!==0&&k.setMaskedAttributeProperty(t,i)}DA(t,e){var i;let r=(i=Y.getProperty(t,k.maskedAttributeProp))!==null&&i!==void 0?i:{attributes:[]};for(let o=0;o<t.attributes.length;o+=1){let c=t.attributes[o].name;csArray.prototype.indexOf.call(r.attributes,c)===-1&&csArray.prototype.some.call(e,l=>csString.prototype.indexOf.call(l.attrName,c)>-1&&Wt.call(t,l.selector))&&csArray.prototype.push.call(r.attributes,c)}r.attributes.length!==0&&k.setMaskedAttributeProperty(t,r)}}return Ne([P()],s.prototype,"resizeObserverCallback",null),s})(),TE=(()=>{class s{constructor(){this.Ch=0,this.N=!1,this.lg="data-cs-capture",this.Ws=t=>{for(let e of t){if(Ae.isWhitelistedElement(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];Ae.isWhitelistedElement(r)||dt(r)&&this.hg(r)}for(let i=0;i<e.removedNodes.length;i+=1){let r=e.removedNodes[i];rt.isConnected(r)||this.ug(r)}}}}start(){this.Ch++,!this.N&&(this.N=!0,this.LA())}LA(){this.V||(this.V=new oe(e=>X(e,i=>this.hg(i))));let t=this.Ih?`[${this.lg}], ${this.Ih}`:`[${this.lg}]`;this.V.observe(t),this.P||(this.P=new ye(this.Ws,(e,i)=>i==="added"&&this.xA(e))),this.P.observe()}stop(){this.N&&(this.Ch--,this.Ch===0&&(this.N=!1,this.UA()))}UA(){this.V&&(this.ug(document),this.V.disconnect()),this.P&&this.P.disconnect()}setWhitelistedElementsSelector(t,e=!0){if(Dt(t))this.Ih=t;else if(e)throw new Error("Command misuse: setCapturedElementsSelector")}getWhitelistedElementsSelector(){return this.Ih}hg(t){Zt(t).visitAll(e=>{Ae.whitelistElement(e)})}xA(t){Ae.isWhitelistedElement(t.host)&&Ae.whitelistElement(t)}ug(t){Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{Ae.removeWhitelistElement(i)})}}return s})(),RE=(()=>{class s{constructor(){this.V=null,this.P=null,this.N=!1,this.Ws=t=>{for(let e of t)if(Ke.isEditableNode(e.target))for(let i=0;i<e.addedNodes.length;i+=1){let r=e.addedNodes[i];if(!Ke.isEditableNode(r)){if(tn(r)||Au(r)){Ke.markEditableNode(r);continue}dt(r)&&this.dg(r)}}}}start(){this.N||(this.N=!0,this.V=new oe(t=>X(t,e=>{this.dg(e)})),this.V.observe("[contenteditable]"),this.P=new ye(this.Ws,(t,e)=>e==="added"&&this.VA(t)),this.P.observe())}stop(){var t,e;this.N&&(this.N=!1,(t=this.V)===null||t===void 0||t.disconnect(),this.V=null,(e=this.P)===null||e===void 0||e.disconnect(),this.P=null)}dg(t){Zt(t).visitAll(e=>{Ke.markEditableNode(e)})}VA(t){Ke.isEditableNode(t.host)&&Ke.markEditableNode(t)}}return s})();var CE=s=>{let n=s*60*1e3;return`${Math.floor(csDate.now()/n)}`},IE=5e3,PE=(()=>{class s extends _c{constructor(t,e,i){super(t,e),this.An=null,this.HA=(i==null?void 0:i.type)||"json",this.fg=i==null?void 0:i.cacheMinutes,this.Bn=i==null?void 0:i.timeout}onLoad(t){this.Ui=t}onError(t){this.Hn=t}onTimeout(t,e){this.oi=t,this.Bn=e}send(){csArray.prototype.forEach.call(this.beforeRequestCallbacks,r=>r());let t=this.retrieveParameters();this.Qa(t);let e=Ei.toQuery(t),i=`${this.domainUri}${this.path?`/${this.path}`:""}?${e}`;this.Kl(i,this.HA)}abort(){this.An&&(this.An.abort(),this.An=null)}isInProgress(){return this.An!==null}Kl(t,e){var i;let r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType=e,r.onerror=()=>{var o;return(o=this.Hn)===null||o===void 0?void 0:o.call(this,r)},r.ontimeout=()=>{var o;return(o=this.oi)===null||o===void 0?void 0:o.call(this,r)},r.onload=()=>{var o,c;r.status>=200&&r.status<400?((o=this.Ui)===null||o===void 0||o.call(this,this.BA(r,e)?r.response:r.responseText),csArray.prototype.forEach.call(this.afterRequestCallbacks,l=>l())):(c=this.Hn)===null||c===void 0||c.call(this,r)},r.onloadend=()=>{this.An=null},r.timeout=(i=this.Bn)!==null&&i!==void 0?i:IE,this.An=r,r.send()}BA(t,e){let i=t.getResponseHeader("Content-Type");return i===null?e==="json":csString.prototype.indexOf.call(csString.prototype.toLowerCase.call(i),"json")>0}Qa(t){let e;this.fg?e=`${CE(this.fg)}`:e=csString.prototype.slice.call(`${Math.random()}`,2,8),t.r=e}}return s})();var OE=(()=>{class s{constructor(t,e,i,r,o){this.nt=t,this.gt=e,this.ge=i,this.Ot=r,this.tt=o}getSensitiveStatus(){var t,e;return{started:this.ge.isStarted,useAnonymization:this.nt.shouldUseAnonymization(),capturedElementSelector:this.Ot.getWhitelistedElementsSelector(),maskedElementSettings:this.gt.getMaskedElementSettings((t=this.nt)===null||t===void 0?void 0:t.shouldMaskNonTextElements()),encryptionSelectors:(e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors()}}getElementSensitiveStatus(t){let e=this.ge.isStarted,i=this.nt.shouldUseAnonymization();return e?k.isMaskedElement(t)||k.isMaskedElementChild(t)?Xe.MASKED:ug.shouldEncrypt(t)?Xe.ENCRYPTED:Ke.isEditableNode(t)?Xe.ANONYMIZED:i?Ae.isWhitelistedElement(t)?Xe.CAPTURED:Xe.ANONYMIZED:Xe.CAPTURED:Xe.ANONYMIZED}}return s})(),Il=["setEncryptionSelectors"],ao=["setPIISelectors"],Pl=["setCapturedElementsSelector"],NE=(()=>{class s{constructor(t,e,i,r,o,c,l){this.E=t,this.f=e,this.gt=i,this.ge=r,this.Ot=o,this.tt=c,this.Cn=l}init(){var t,e;this.Cn&&this.tt&&((t=this.Cn)===null||t===void 0||t.addSelector((e=this.tt)===null||e===void 0?void 0:e.getEncryptionSelectors())),this.ht()}onStartTracking(t){this.ge.start(),this.E.emitSensitiveStatusChange()}onBeforeArtificialPageView(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onAfterArtificialPageView(){this.ge.start(),this.E.emitSensitiveStatusChange()}onBeforeSessionRenewal(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onOptout(){this.ge.stop(),this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentGranted(){this.E.emitSensitiveStatusChange()}onReplayUnanonymizationConsentWithdrawn(){this.E.emitSensitiveStatusChange()}ht(){this.f.register(ao,t=>{this.gt.setMaskedElementSettingsFromCommand(t),this.E.emitSensitiveStatusChange()}),this.f.register(Pl,t=>{this.Ot.setWhitelistedElementsSelector(t),this.E.emitSensitiveStatusChange()}),this.f.register(Il,t=>{var e,i;(e=this.tt)===null||e===void 0||e.setEncryptionSelectors(t),(i=this.Cn)===null||i===void 0||i.addSelector(t)})}}return s})(),ME=(()=>{class s extends xt{constructor(t,e,i,r,o,c){super(),this.Ht=t,this.gt=e,this.Ot=i,this.Cn=r,this.In=o,this.nt=c}onStart(){var t,e,i;this.Ot.start(),this.Ht.setMaskedElementSettings(this.gt.getMaskedElementSettings((t=this.nt)===null||t===void 0?void 0:t.shouldMaskNonTextElements())),this.Ht.startIdentifier(),(e=this.Cn)===null||e===void 0||e.start(),(i=this.In)===null||i===void 0||i.start()}onStop(){var t,e;this.Ot.stop(),this.Ht.stopIdentifier(),(t=this.Cn)===null||t===void 0||t.stop(),(e=this.In)===null||e===void 0||e.stop()}}return s})(),Ol=["networkRequest:maskUrls"],DE=["networkRequest:maskUrls:reset"],kE=(()=>{class s{constructor(t,e){this.Eg=t,this.lt=e}init(){this.Eg.register(Ol,t=>{if(T(t)){this.lt.addPartialUrlMaskingPattern(t);return}if(csArray.isArray(t))for(let e of t)T(e)&&this.lt.addPartialUrlMaskingPattern(e)}),this.Eg.register(DE,()=>this.lt.resetPartialUrlMaskingPatterns())}}return s})(),LE=/(\b["']?key["']?\s*[=:]\s*["'](?:first|last|user|profile|primary|primary[ _-]?last)[ _-]?name["']\s*,?\s*["']?value["']?\s*[=:]\s*["'])(.+?)(["']|$)|(\b["']?(?:first|last|user|profile|primary|primary[ _-]?last)[\s_-]?name["']?\s*[=:]\s*["'])(.+?)(["']|$)/gi,xE="$1$4CS_ANONYMIZED_NAME$3$6",UE=/(?:\(\d{3}\) \d{3}[- ]\d{4}\b)|(?:\b\d{3}([-\. ])\d{3}\1\d{4}\b)|(?:\b\d{2} \d{2} \d{2} \d{2} \d{2}\b)|(?:\b\d{4} \d{3} \d{3}\b)|(?:\b\d{2}([-\. ])\d{4}\2\d{4}\b)|(?:\b\d{3}([- ])\d{4}\3\d{4}\b)|(?:\+\d{1,3} \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \(\d{3}\) \d{3}-\d{4}\b)|(?:\+\d{1,3}([- ])\d{4}\4\d{3}\4\d{3}\b)|(?:\+\d{1,3} \d \d{4} \d{4}\b)|(?:\+\d{1,3} \d \d{3} \d{3} \d{4}\b)|(?:\+\d{1,3} \d \d{2} \d{2} \d{2} \d{2}\b)|(?:\+\d{7,15}\b)|(?:\+\d{1,3} \d{6,12}\b)|(?:\+\d{1,3}([- ])\d{4}\5\d{3}\5\d{3}\b)/g,VE="CS_ANONYMIZED_PHONE",jE=(()=>{class s{constructor(t,e){this.I=t,this.K=e}anonymize(t){return this.K?csArray.prototype.join.call(csArray.prototype.map.call(Jp(t),({content:e,isUrl:i})=>{var r;return i?(r=this.K)===null||r===void 0?void 0:r.anonymizeUrl(e,{maskNames:!0}):this.Sg(e)}),""):this.Sg(t)}Sg(t){t=this.I.anonymizePII(t);let e=t;t=this.Dr(t),t!==e&&(lt.counters.redactedPII.count("name"),lt.counters.redactedPII.count("name-in-custom-error"));let i=t;return t=this.tT(t),t!==i&&(lt.counters.redactedPII.count("phone"),lt.counters.redactedPII.count("phone-in-custom-error")),t}Dr(t){return csString.prototype.replace.call(t,LE,xE)}tT(t){return csString.prototype.replace.call(t,UE,VE)}}return s})(),Ga=(()=>{let s;return function(n){function t(d,E){for(let y of d)if(i(y,E))return!0;return!1}n.isUrlMatching=t;function e(d,E){if(T(E)){for(let y of d)if(i(y,E))return!0}else if(jo(E)){for(let y of d)if(i(y,csString(E)))return!0}return!1}n.isMatching=e;function i(d,E){let y=r(d,E);return d.negate?!y:y}function r(d,E){switch(d.rule_type==="date"&&(d.match_operation==="less_than"||d.match_operation==="greater_than")&&(E=(new csDate(E).valueOf()/1e3).toFixed(0)),d.match_operation){case"exact":switch(d.rule_type){case"string":return T(d.pattern)?csString.prototype.toLowerCase.call(E)===csString.prototype.toLowerCase.call(d.pattern):!1;case"boolean":return E===d.pattern||E===csString(d.pattern);case"number":return mt(E)?Number(E)===Number(d.pattern):!1;default:return E===d.pattern}case"starts_with":return T(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)===0:!1;case"ends_with":return T(d.pattern)?$s(E,d.pattern):!1;case"contains":return T(d.pattern)?csString.prototype.indexOf.call(E,d.pattern)!==-1:!1;case"regex":if(!T(d.pattern))return!1;try{return new csRegExp(d.pattern).test(E)}catch(y){return B.warn(`targeting.matchOperation.regex invalid ${y==null?void 0:y.message}`),!1}case"simple":return T(d.pattern)?g(E)===g(d.pattern):!1;case"greater_than":return Number(E)>Number(d.pattern);case"less_than":return Number(E)<Number(d.pattern);case"exact_date":{let y=Number(d.pattern);if(!Ct(y))return!1;let S=new csDate(y*1e3);return new csDate(E).toDateString()===S.toDateString()}case"exact_days_ago":return o(d,E);case"more_than_days_ago":return c(d,E);case"less_than_days_ago":return l(d,E);case"unknown":return h(E);default:return B.warn(`targeting.matchOperation.regex not managed operation ${d.match_operation}`),!1}}function o(d,E){let y=new csDate,S=y.setDate(y.getDate()-Number(d.pattern)),R=new csDate(S);return new csDate(E).toDateString()===R.toDateString()}function c(d,E){let y=Number(d.pattern);if(!Ct(y))return!1;let S=Number(y)+1,R=new csDate,O=new csDate(R);return O.setDate(R.getDate()-S),new csDate(E).getTime()<=O.getTime()}function l(d,E){let y=Number(d.pattern);if(!Ct(y))return!1;if(y===0)return o(d,E);let S=new csDate,R=new csDate(S);return R.setDate(S.getDate()-y),new csDate(E).getTime()>=R.getTime()}function h(d){return mt(d)?T(d)?csString.prototype.trim.call(d)==="":jo(d)?d===!0:Ct(d)?d!==0:!1:!0}function g(d){let E=Vt(d,"http://")||Vt(d,"https://")?d:`https://${d}`,y=zr(E);return y!==null?csString.prototype.replace.call(y.host,/^www./,""):d}}(s||(s={})),s})(),HE=(()=>{class s{constructor(){this.vg=[],this._g=[]}setTargetingRules(t){for(let e of t)e.component==="url"?csArray.prototype.push.call(this.vg,e):e.component==="trigger"&&csArray.prototype.push.call(this._g,e)}matchUrl(t){return Ga.isUrlMatching(this.vg,t)}matchTrigger(t){return Ga.isMatching(this._g,t)}}return s})(),BE=(()=>{class s extends xt{constructor(t,e,i){super(),this.Ta=t,this.Lh=e,this.A=i}init(){this.xh=new HE,this.Ta&&this.xh.setTargetingRules(this.Ta)}onStart(){}checkInitialUrlTargetingRules(){let t=this.A.getAnonymizedUrl();this.Uh(t,"url")&&this.Lh()}onStop(){}onTargetingRulesArtificialPageview(t){this.isStarted&&this.Uh(t,"url")&&this.Lh()}onExternalEvent(t){this.isStarted&&this.Uh(t.name,"trigger")&&this.Lh()}Uh(t,e){var i,r;return e==="url"&&T(t)&&(!((i=this.xh)===null||i===void 0)&&i.matchUrl(t))?!0:!!(e==="trigger"&&(!((r=this.xh)===null||r===void 0)&&r.matchTrigger(t)))}}return s})(),FE=(()=>{class s{constructor(t,e,i,r,o,c){this.Ta=t,this.eT=e,this.E=i,this.ot=r,this.Q=o,this.A=c}init(){this.Br=new BE(this.Ta,this.eT,this.A),this.Q.addListener(this.Br),this.Br.init()}start(){this.Br.start()}stop(){this.Br.stop()}checkInitialUrlTargetingRules(){this.Br.checkInitialUrlTargetingRules()}emitTargetingCollectState(){let t=this.ot.getInitialCollectState();t===U.ANALYTICS_ONLY?this.E.emitCollectStateChange(U.ANALYTICS_ONLY_RULES_TARGETING,qt.ETR_OFF):t===U.RECORDING_GLOBAL_SAMPLING&&this.E.emitCollectStateChange(U.RECORDING_RULES_TARGETING,qt.ETR_OFF)}}return s})();var zE=(()=>{let s;return function(n){n.COMPRESSION_DISABLED="compressionDisabled"}(s||(s={})),s})(),$E=(()=>{class s{constructor(){}static init(t){(!this.Vh||t!==void 0)&&this.initFlags(t)}static initFlags(t=document.cookie){var e;let i=(e=/_cs_debug=((\w|\.|\:|=)+)/g.exec(t))===null||e===void 0?void 0:e[1];if(this.Vh=new Map,i){let r=csString.prototype.split.call(i,".");for(let o=0;o<r.length;o++){let[c,l]=csString.prototype.split.call(r[o],"=");this.Vh.set(c,l||"true")}}}static getBoolean(t){let e=this.getString(t);return e!=null&&e!=="false"&&parseInt(e)!==0}static getString(t){var e;return this.init(),(e=this.Vh)===null||e===void 0?void 0:e.get(t)}static isCompressionEnabled(){return!this.getBoolean(zE.COMPRESSION_DISABLED)}static Log(t){return(e,i,r)=>{var o;let c=i.toString(),l=`${(o=e.constructor)===null||o===void 0?void 0:o.name}.${c}`,h=r.value;GE(s.getString("debugLog"),t)&&(r.value=function(...g){return console.log(l,...g),h.bind(this)(...g)})}}}return s})();function GE(s,n){var t;return s==null?!1:s===n||!!(!((t=csString.prototype.match.call(s,new csRegExp("(^|,)("+n+")(,|$)")))===null||t===void 0)&&t.length)}function qa(){function i(a){let p=a.length;for(;--p>=0;)a[p]=0}let r=0,o=1,c=2,l=3,h=258,g=29,d=256,E=d+1+g,y=30,S=19,R=2*E+1,O=15,b=16,w=7,x=256,N=16,C=17,H=18,$=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),it=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),St=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v=512,D=new Array((E+2)*2);i(D);let V=new Array(y*2);i(V);let F=new Array(v);i(F);let st=new Array(h-l+1);i(st);let yt=new Array(g);i(yt);let kt=new Array(y);i(kt);function Me(a,p,f,m,u){this.static_tree=a,this.extra_bits=p,this.extra_base=f,this.elems=m,this.max_length=u,this.has_stree=a&&a.length}let os,bs,as;function As(a,p){this.dyn_tree=a,this.max_code=0,this.stat_desc=p}let Ys=a=>a<256?F[a]:F[256+(a>>>7)],Se=(a,p)=>{a.pending_buf[a.pending++]=p&255,a.pending_buf[a.pending++]=p>>>8&255},Pt=(a,p,f)=>{a.bi_valid>b-f?(a.bi_buf|=p<<a.bi_valid&65535,Se(a,a.bi_buf),a.bi_buf=p>>b-a.bi_valid,a.bi_valid+=f-b):(a.bi_buf|=p<<a.bi_valid&65535,a.bi_valid+=f)},jt=(a,p,f)=>{Pt(a,f[p*2],f[p*2+1])},Xs=(a,p)=>{let f=0;do f|=a&1,a>>>=1,f<<=1;while(--p>0);return f>>>1},In=a=>{a.bi_valid===16?(Se(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=a.bi_buf&255,a.bi_buf>>=8,a.bi_valid-=8)},Pn=(a,p)=>{let f=p.dyn_tree,m=p.max_code,u=p.stat_desc.static_tree,A=p.stat_desc.has_stree,_=p.stat_desc.extra_bits,I=p.stat_desc.extra_base,Q=p.stat_desc.max_length,z,$t,Be,ot,ds,Cs,Ui=0;for(ot=0;ot<=O;ot++)a.bl_count[ot]=0;for(f[a.heap[a.heap_max]*2+1]=0,z=a.heap_max+1;z<R;z++)$t=a.heap[z],ot=f[f[$t*2+1]*2+1]+1,ot>Q&&(ot=Q,Ui++),f[$t*2+1]=ot,!($t>m)&&(a.bl_count[ot]++,ds=0,$t>=I&&(ds=_[$t-I]),Cs=f[$t*2],a.opt_len+=Cs*(ot+ds),A&&(a.static_len+=Cs*(u[$t*2+1]+ds)));if(Ui!==0){do{for(ot=Q-1;a.bl_count[ot]===0;)ot--;a.bl_count[ot]--,a.bl_count[ot+1]+=2,a.bl_count[Q]--,Ui-=2}while(Ui>0);for(ot=Q;ot!==0;ot--)for($t=a.bl_count[ot];$t!==0;)Be=a.heap[--z],!(Be>m)&&(f[Be*2+1]!==ot&&(a.opt_len+=(ot-f[Be*2+1])*f[Be*2],f[Be*2+1]=ot),$t--)}},Ks=(a,p,f)=>{let m=new Array(O+1),u=0,A,_;for(A=1;A<=O;A++)m[A]=u=u+f[A-1]<<1;for(_=0;_<=p;_++){let I=a[_*2+1];I!==0&&(a[_*2]=Xs(m[I]++,I))}},mo=()=>{let a,p,f,m,u,A=new Array(O+1);for(f=0,m=0;m<g-1;m++)for(yt[m]=f,a=0;a<1<<$[m];a++)st[f++]=m;for(st[f-1]=m,u=0,m=0;m<16;m++)for(kt[m]=u,a=0;a<1<<it[m];a++)F[u++]=m;for(u>>=7;m<y;m++)for(kt[m]=u<<7,a=0;a<1<<it[m]-7;a++)F[256+u++]=m;for(p=0;p<=O;p++)A[p]=0;for(a=0;a<=143;)D[a*2+1]=8,a++,A[8]++;for(;a<=255;)D[a*2+1]=9,a++,A[9]++;for(;a<=279;)D[a*2+1]=7,a++,A[7]++;for(;a<=287;)D[a*2+1]=8,a++,A[8]++;for(Ks(D,E+1,A),a=0;a<y;a++)V[a*2+1]=5,V[a*2]=Xs(a,5);os=new Me(D,$,d+1,E,O),bs=new Me(V,it,0,y,O),as=new Me(new Array(0),Et,0,S,w)},yo=a=>{let p;for(p=0;p<E;p++)a.dyn_ltree[p*2]=0;for(p=0;p<y;p++)a.dyn_dtree[p*2]=0;for(p=0;p<S;p++)a.bl_tree[p*2]=0;a.dyn_ltree[x*2]=1,a.opt_len=a.static_len=0,a.last_lit=a.matches=0},Eo=a=>{a.bi_valid>8?Se(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},Gl=(a,p,f,m)=>{Eo(a),m&&(Se(a,f),Se(a,~f)),a.pending_buf.set(a.window.subarray(p,p+f),a.pending),a.pending+=f},So=(a,p,f,m)=>{let u=p*2,A=f*2;return a[u]<a[A]||a[u]===a[A]&&m[p]<=m[f]},On=(a,p,f)=>{let m=a.heap[f],u=f<<1;for(;u<=a.heap_len&&(u<a.heap_len&&So(p,a.heap[u+1],a.heap[u],a.depth)&&u++,!So(p,m,a.heap[u],a.depth));)a.heap[f]=a.heap[u],f=u,u<<=1;a.heap[f]=m},vo=(a,p,f)=>{let m,u,A=0,_,I;if(a.last_lit!==0)do m=a.pending_buf[a.d_buf+A*2]<<8|a.pending_buf[a.d_buf+A*2+1],u=a.pending_buf[a.l_buf+A],A++,m===0?jt(a,u,p):(_=st[u],jt(a,_+d+1,p),I=$[_],I!==0&&(u-=yt[_],Pt(a,u,I)),m--,_=Ys(m),jt(a,_,f),I=it[_],I!==0&&(m-=kt[_],Pt(a,m,I)));while(A<a.last_lit);jt(a,x,p)},Nn=(a,p)=>{let f=p.dyn_tree,m=p.stat_desc.static_tree,u=p.stat_desc.has_stree,A=p.stat_desc.elems,_,I,Q=-1,z;for(a.heap_len=0,a.heap_max=R,_=0;_<A;_++)f[_*2]!==0?(a.heap[++a.heap_len]=Q=_,a.depth[_]=0):f[_*2+1]=0;for(;a.heap_len<2;)z=a.heap[++a.heap_len]=Q<2?++Q:0,f[z*2]=1,a.depth[z]=0,a.opt_len--,u&&(a.static_len-=m[z*2+1]);for(p.max_code=Q,_=a.heap_len>>1;_>=1;_--)On(a,f,_);z=A;do _=a.heap[1],a.heap[1]=a.heap[a.heap_len--],On(a,f,1),I=a.heap[1],a.heap[--a.heap_max]=_,a.heap[--a.heap_max]=I,f[z*2]=f[_*2]+f[I*2],a.depth[z]=(a.depth[_]>=a.depth[I]?a.depth[_]:a.depth[I])+1,f[_*2+1]=f[I*2+1]=z,a.heap[1]=z++,On(a,f,1);while(a.heap_len>=2);a.heap[--a.heap_max]=a.heap[1],Pn(a,p),Ks(f,Q,a.bl_count)},_o=(a,p,f)=>{let m,u=-1,A,_=p[0*2+1],I=0,Q=7,z=4;for(_===0&&(Q=138,z=3),p[(f+1)*2+1]=65535,m=0;m<=f;m++)A=_,_=p[(m+1)*2+1],!(++I<Q&&A===_)&&(I<z?a.bl_tree[A*2]+=I:A!==0?(A!==u&&a.bl_tree[A*2]++,a.bl_tree[N*2]++):I<=10?a.bl_tree[C*2]++:a.bl_tree[H*2]++,I=0,u=A,_===0?(Q=138,z=3):A===_?(Q=6,z=3):(Q=7,z=4))},wo=(a,p,f)=>{let m,u=-1,A,_=p[0*2+1],I=0,Q=7,z=4;for(_===0&&(Q=138,z=3),m=0;m<=f;m++)if(A=_,_=p[(m+1)*2+1],!(++I<Q&&A===_)){if(I<z)do jt(a,A,a.bl_tree);while(--I!==0);else A!==0?(A!==u&&(jt(a,A,a.bl_tree),I--),jt(a,N,a.bl_tree),Pt(a,I-3,2)):I<=10?(jt(a,C,a.bl_tree),Pt(a,I-3,3)):(jt(a,H,a.bl_tree),Pt(a,I-11,7));I=0,u=A,_===0?(Q=138,z=3):A===_?(Q=6,z=3):(Q=7,z=4)}},ql=a=>{let p;for(_o(a,a.dyn_ltree,a.l_desc.max_code),_o(a,a.dyn_dtree,a.d_desc.max_code),Nn(a,a.bl_desc),p=S-1;p>=3&&a.bl_tree[St[p]*2+1]===0;p--);return a.opt_len+=3*(p+1)+5+5+4,p},Wl=(a,p,f,m)=>{let u;for(Pt(a,p-257,5),Pt(a,f-1,5),Pt(a,m-4,4),u=0;u<m;u++)Pt(a,a.bl_tree[St[u]*2+1],3);wo(a,a.dyn_ltree,p-1),wo(a,a.dyn_dtree,f-1)},Yl=a=>{let p=4093624447,f;for(f=0;f<=31;f++,p>>>=1)if(p&1&&a.dyn_ltree[f*2]!==0)return 0;if(a.dyn_ltree[9*2]!==0||a.dyn_ltree[10*2]!==0||a.dyn_ltree[13*2]!==0)return 1;for(f=32;f<d;f++)if(a.dyn_ltree[f*2]!==0)return 1;return 0},bo=!1,Xl=a=>{bo||(mo(),bo=!0),a.l_desc=new As(a.dyn_ltree,os),a.d_desc=new As(a.dyn_dtree,bs),a.bl_desc=new As(a.bl_tree,as),a.bi_buf=0,a.bi_valid=0,yo(a)},Ao=(a,p,f,m)=>{Pt(a,(r<<1)+(m?1:0),3),Gl(a,p,f,!0)},Kl=a=>{Pt(a,o<<1,3),jt(a,x,D),In(a)},Jl=(a,p,f,m)=>{let u,A,_=0;a.level>0?(a.strm.data_type===2&&(a.strm.data_type=Yl(a)),Nn(a,a.l_desc),Nn(a,a.d_desc),_=ql(a),u=a.opt_len+3+7>>>3,A=a.static_len+3+7>>>3,A<=u&&(u=A)):u=A=f+5,f+4<=u&&p!==-1?Ao(a,p,f,m):a.strategy===4||A===u?(Pt(a,(o<<1)+(m?1:0),3),vo(a,D,V)):(Pt(a,(c<<1)+(m?1:0),3),Wl(a,a.l_desc.max_code+1,a.d_desc.max_code+1,_+1),vo(a,a.dyn_ltree,a.dyn_dtree)),yo(a),m&&Eo(a)},Ql=(a,p,f)=>(a.pending_buf[a.d_buf+a.last_lit*2]=p>>>8&255,a.pending_buf[a.d_buf+a.last_lit*2+1]=p&255,a.pending_buf[a.l_buf+a.last_lit]=f&255,a.last_lit++,p===0?a.dyn_ltree[f*2]++:(a.matches++,p--,a.dyn_ltree[(st[f]+d+1)*2]++,a.dyn_dtree[Ys(p)*2]++),a.last_lit===a.lit_bufsize-1);var Zl=Xl,th=Ao,eh=Jl,sh=Ql,ih=Kl,nh={_tr_init:Zl,_tr_stored_block:th,_tr_flush_block:eh,_tr_tally:sh,_tr_align:ih},To=(a,p,f,m)=>{let u=a&65535|0,A=a>>>16&65535|0,_=0;for(;f!==0;){_=f>2e3?2e3:f,f-=_;do u=u+p[m++]|0,A=A+u|0;while(--_);u%=65521,A%=65521}return u|A<<16|0};let rh=()=>{let a,p=[];for(var f=0;f<256;f++){a=f;for(var m=0;m<8;m++)a=a&1?3988292384^a>>>1:a>>>1;p[f]=a}return p},oh=new Uint32Array(rh());var De=(a,p,f,m)=>{let u=oh,A=m+f;a^=-1;for(let _=m;_<A;_++)a=a>>>8^u[(a^p[_])&255];return a^-1},Ii={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ro={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:ah,_tr_stored_block:ch,_tr_flush_block:lh,_tr_tally:ke,_tr_align:hh}=nh,{Z_NO_FLUSH:cs,Z_PARTIAL_FLUSH:uh,Z_FULL_FLUSH:dh,Z_FINISH:Le,Z_BLOCK:Co,Z_OK:ae,Z_STREAM_END:Io,Z_STREAM_ERROR:Xt,Z_DATA_ERROR:ph,Z_BUF_ERROR:Mn,Z_DEFAULT_COMPRESSION:fh,Z_FILTERED:gh,Z_HUFFMAN_ONLY:Pi,Z_RLE:mh,Z_FIXED:yh,Z_DEFAULT_STRATEGY:Eh,Z_UNKNOWN:Sh,Z_DEFLATED:Oi}=Ro,vh=9,_h=15,wh=8,Dn=256+1+29,bh=30,Ah=19,Th=2*Dn+1,Rh=15,J=3,xe=258,se=xe+J+1,Ch=32,Ni=42,kn=69,Mi=73,Di=91,ki=103,ls=113,Js=666,wt=1,Qs=2,hs=3,Ts=4,Ih=3,Ue=(a,p)=>(a.msg=Ii[p],p),Po=a=>(a<<1)-(a>4?9:0),Ve=a=>{let p=a.length;for(;--p>=0;)a[p]=0},je=(a,p,f)=>(p<<a.hash_shift^f)&a.hash_mask,He=a=>{let p=a.state,f=p.pending;f>a.avail_out&&(f=a.avail_out),f!==0&&(a.output.set(p.pending_buf.subarray(p.pending_out,p.pending_out+f),a.next_out),a.next_out+=f,p.pending_out+=f,a.total_out+=f,a.avail_out-=f,p.pending-=f,p.pending===0&&(p.pending_out=0))},Ot=(a,p)=>{lh(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,p),a.block_start=a.strstart,He(a.strm)},et=(a,p)=>{a.pending_buf[a.pending++]=p},Zs=(a,p)=>{a.pending_buf[a.pending++]=p>>>8&255,a.pending_buf[a.pending++]=p&255},Ph=(a,p,f,m)=>{let u=a.avail_in;return u>m&&(u=m),u===0?0:(a.avail_in-=u,p.set(a.input.subarray(a.next_in,a.next_in+u),f),a.state.wrap===1?a.adler=To(a.adler,p,u,f):a.state.wrap===2&&(a.adler=De(a.adler,p,u,f)),a.next_in+=u,a.total_in+=u,u)},Oo=(a,p)=>{let f=a.max_chain_length,m=a.strstart,u,A,_=a.prev_length,I=a.nice_match,Q=a.strstart>a.w_size-se?a.strstart-(a.w_size-se):0,z=a.window,$t=a.w_mask,Be=a.prev,ot=a.strstart+xe,ds=z[m+_-1],Cs=z[m+_];a.prev_length>=a.good_match&&(f>>=2),I>a.lookahead&&(I=a.lookahead);do if(u=p,!(z[u+_]!==Cs||z[u+_-1]!==ds||z[u]!==z[m]||z[++u]!==z[m+1])){m+=2,u++;do;while(z[++m]===z[++u]&&z[++m]===z[++u]&&z[++m]===z[++u]&&z[++m]===z[++u]&&z[++m]===z[++u]&&z[++m]===z[++u]&&z[++m]===z[++u]&&z[++m]===z[++u]&&m<ot);if(A=xe-(ot-m),m=ot-xe,A>_){if(a.match_start=p,_=A,A>=I)break;ds=z[m+_-1],Cs=z[m+_]}}while((p=Be[p&$t])>Q&&--f!==0);return _<=a.lookahead?_:a.lookahead},us=a=>{let p=a.w_size,f,m,u,A,_;do{if(A=a.window_size-a.lookahead-a.strstart,a.strstart>=p+(p-se)){a.window.set(a.window.subarray(p,p+p),0),a.match_start-=p,a.strstart-=p,a.block_start-=p,m=a.hash_size,f=m;do u=a.head[--f],a.head[f]=u>=p?u-p:0;while(--m);m=p,f=m;do u=a.prev[--f],a.prev[f]=u>=p?u-p:0;while(--m);A+=p}if(a.strm.avail_in===0)break;if(m=Ph(a.strm,a.window,a.strstart+a.lookahead,A),a.lookahead+=m,a.lookahead+a.insert>=J)for(_=a.strstart-a.insert,a.ins_h=a.window[_],a.ins_h=je(a,a.ins_h,a.window[_+1]);a.insert&&(a.ins_h=je(a,a.ins_h,a.window[_+J-1]),a.prev[_&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=_,_++,a.insert--,!(a.lookahead+a.insert<J)););}while(a.lookahead<se&&a.strm.avail_in!==0)},Oh=(a,p)=>{let f=65535;for(f>a.pending_buf_size-5&&(f=a.pending_buf_size-5);;){if(a.lookahead<=1){if(us(a),a.lookahead===0&&p===cs)return wt;if(a.lookahead===0)break}a.strstart+=a.lookahead,a.lookahead=0;let m=a.block_start+f;if((a.strstart===0||a.strstart>=m)&&(a.lookahead=a.strstart-m,a.strstart=m,Ot(a,!1),a.strm.avail_out===0)||a.strstart-a.block_start>=a.w_size-se&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=0,p===Le?(Ot(a,!0),a.strm.avail_out===0?hs:Ts):(a.strstart>a.block_start&&(Ot(a,!1),a.strm.avail_out===0),wt)},Ln=(a,p)=>{let f,m;for(;;){if(a.lookahead<se){if(us(a),a.lookahead<se&&p===cs)return wt;if(a.lookahead===0)break}if(f=0,a.lookahead>=J&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),f!==0&&a.strstart-f<=a.w_size-se&&(a.match_length=Oo(a,f)),a.match_length>=J)if(m=ke(a,a.strstart-a.match_start,a.match_length-J),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=J){a.match_length--;do a.strstart++,a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(--a.match_length!==0);a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=je(a,a.ins_h,a.window[a.strstart+1]);else m=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(m&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=a.strstart<J-1?a.strstart:J-1,p===Le?(Ot(a,!0),a.strm.avail_out===0?hs:Ts):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:Qs},Rs=(a,p)=>{let f,m,u;for(;;){if(a.lookahead<se){if(us(a),a.lookahead<se&&p===cs)return wt;if(a.lookahead===0)break}if(f=0,a.lookahead>=J&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=J-1,f!==0&&a.prev_length<a.max_lazy_match&&a.strstart-f<=a.w_size-se&&(a.match_length=Oo(a,f),a.match_length<=5&&(a.strategy===gh||a.match_length===J&&a.strstart-a.match_start>4096)&&(a.match_length=J-1)),a.prev_length>=J&&a.match_length<=a.prev_length){u=a.strstart+a.lookahead-J,m=ke(a,a.strstart-1-a.prev_match,a.prev_length-J),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=u&&(a.ins_h=je(a,a.ins_h,a.window[a.strstart+J-1]),f=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(--a.prev_length!==0);if(a.match_available=0,a.match_length=J-1,a.strstart++,m&&(Ot(a,!1),a.strm.avail_out===0))return wt}else if(a.match_available){if(m=ke(a,0,a.window[a.strstart-1]),m&&Ot(a,!1),a.strstart++,a.lookahead--,a.strm.avail_out===0)return wt}else a.match_available=1,a.strstart++,a.lookahead--}return a.match_available&&(m=ke(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<J-1?a.strstart:J-1,p===Le?(Ot(a,!0),a.strm.avail_out===0?hs:Ts):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:Qs},Nh=(a,p)=>{let f,m,u,A,_=a.window;for(;;){if(a.lookahead<=xe){if(us(a),a.lookahead<=xe&&p===cs)return wt;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=J&&a.strstart>0&&(u=a.strstart-1,m=_[u],m===_[++u]&&m===_[++u]&&m===_[++u])){A=a.strstart+xe;do;while(m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&m===_[++u]&&u<A);a.match_length=xe-(A-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=J?(f=ke(a,1,a.match_length-J),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(f=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),f&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=0,p===Le?(Ot(a,!0),a.strm.avail_out===0?hs:Ts):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:Qs},Mh=(a,p)=>{let f;for(;;){if(a.lookahead===0&&(us(a),a.lookahead===0)){if(p===cs)return wt;break}if(a.match_length=0,f=ke(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,f&&(Ot(a,!1),a.strm.avail_out===0))return wt}return a.insert=0,p===Le?(Ot(a,!0),a.strm.avail_out===0?hs:Ts):a.last_lit&&(Ot(a,!1),a.strm.avail_out===0)?wt:Qs};function ce(a,p,f,m,u){this.good_length=a,this.max_lazy=p,this.nice_length=f,this.max_chain=m,this.func=u}let ti=[new ce(0,0,0,0,Oh),new ce(4,4,8,4,Ln),new ce(4,5,16,8,Ln),new ce(4,6,32,32,Ln),new ce(4,4,16,16,Rs),new ce(8,16,32,32,Rs),new ce(8,16,128,128,Rs),new ce(8,32,128,256,Rs),new ce(32,128,258,1024,Rs),new ce(32,258,258,4096,Rs)],Dh=a=>{a.window_size=2*a.w_size,Ve(a.head),a.max_lazy_match=ti[a.level].max_lazy,a.good_match=ti[a.level].good_length,a.nice_match=ti[a.level].nice_length,a.max_chain_length=ti[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=J-1,a.match_available=0,a.ins_h=0};function kh(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Oi,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(Th*2),this.dyn_dtree=new Uint16Array((2*bh+1)*2),this.bl_tree=new Uint16Array((2*Ah+1)*2),Ve(this.dyn_ltree),Ve(this.dyn_dtree),Ve(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(Rh+1),this.heap=new Uint16Array(2*Dn+1),Ve(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*Dn+1),Ve(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let No=a=>{if(!a||!a.state)return Ue(a,Xt);a.total_in=a.total_out=0,a.data_type=Sh;let p=a.state;return p.pending=0,p.pending_out=0,p.wrap<0&&(p.wrap=-p.wrap),p.status=p.wrap?Ni:ls,a.adler=p.wrap===2?0:1,p.last_flush=cs,ah(p),ae},Mo=a=>{let p=No(a);return p===ae&&Dh(a.state),p},Lh=(a,p)=>!a||!a.state||a.state.wrap!==2?Xt:(a.state.gzhead=p,ae),Do=(a,p,f,m,u,A)=>{if(!a)return Xt;let _=1;if(p===fh&&(p=6),m<0?(_=0,m=-m):m>15&&(_=2,m-=16),u<1||u>vh||f!==Oi||m<8||m>15||p<0||p>9||A<0||A>yh)return Ue(a,Xt);m===8&&(m=9);let I=new kh;return a.state=I,I.strm=a,I.wrap=_,I.gzhead=null,I.w_bits=m,I.w_size=1<<I.w_bits,I.w_mask=I.w_size-1,I.hash_bits=u+7,I.hash_size=1<<I.hash_bits,I.hash_mask=I.hash_size-1,I.hash_shift=~~((I.hash_bits+J-1)/J),I.window=new Uint8Array(I.w_size*2),I.head=new Uint16Array(I.hash_size),I.prev=new Uint16Array(I.w_size),I.lit_bufsize=1<<u+6,I.pending_buf_size=I.lit_bufsize*4,I.pending_buf=new Uint8Array(I.pending_buf_size),I.d_buf=1*I.lit_bufsize,I.l_buf=3*I.lit_bufsize,I.level=p,I.strategy=A,I.method=f,Mo(a)},xh=(a,p)=>Do(a,p,Oi,_h,wh,Eh),Uh=(a,p)=>{let f,m;if(!a||!a.state||p>Co||p<0)return a?Ue(a,Xt):Xt;let u=a.state;if(!a.output||!a.input&&a.avail_in!==0||u.status===Js&&p!==Le)return Ue(a,a.avail_out===0?Mn:Xt);u.strm=a;let A=u.last_flush;if(u.last_flush=p,u.status===Ni)if(u.wrap===2)a.adler=0,et(u,31),et(u,139),et(u,8),u.gzhead?(et(u,(u.gzhead.text?1:0)+(u.gzhead.hcrc?2:0)+(u.gzhead.extra?4:0)+(u.gzhead.name?8:0)+(u.gzhead.comment?16:0)),et(u,u.gzhead.time&255),et(u,u.gzhead.time>>8&255),et(u,u.gzhead.time>>16&255),et(u,u.gzhead.time>>24&255),et(u,u.level===9?2:u.strategy>=Pi||u.level<2?4:0),et(u,u.gzhead.os&255),u.gzhead.extra&&u.gzhead.extra.length&&(et(u,u.gzhead.extra.length&255),et(u,u.gzhead.extra.length>>8&255)),u.gzhead.hcrc&&(a.adler=De(a.adler,u.pending_buf,u.pending,0)),u.gzindex=0,u.status=kn):(et(u,0),et(u,0),et(u,0),et(u,0),et(u,0),et(u,u.level===9?2:u.strategy>=Pi||u.level<2?4:0),et(u,Ih),u.status=ls);else{let _=Oi+(u.w_bits-8<<4)<<8,I=-1;u.strategy>=Pi||u.level<2?I=0:u.level<6?I=1:u.level===6?I=2:I=3,_|=I<<6,u.strstart!==0&&(_|=Ch),_+=31-_%31,u.status=ls,Zs(u,_),u.strstart!==0&&(Zs(u,a.adler>>>16),Zs(u,a.adler&65535)),a.adler=1}if(u.status===kn)if(u.gzhead.extra){for(f=u.pending;u.gzindex<(u.gzhead.extra.length&65535)&&!(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>f&&(a.adler=De(a.adler,u.pending_buf,u.pending-f,f)),He(a),f=u.pending,u.pending===u.pending_buf_size));)et(u,u.gzhead.extra[u.gzindex]&255),u.gzindex++;u.gzhead.hcrc&&u.pending>f&&(a.adler=De(a.adler,u.pending_buf,u.pending-f,f)),u.gzindex===u.gzhead.extra.length&&(u.gzindex=0,u.status=Mi)}else u.status=Mi;if(u.status===Mi)if(u.gzhead.name){f=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>f&&(a.adler=De(a.adler,u.pending_buf,u.pending-f,f)),He(a),f=u.pending,u.pending===u.pending_buf_size)){m=1;break}u.gzindex<u.gzhead.name.length?m=u.gzhead.name.charCodeAt(u.gzindex++)&255:m=0,et(u,m)}while(m!==0);u.gzhead.hcrc&&u.pending>f&&(a.adler=De(a.adler,u.pending_buf,u.pending-f,f)),m===0&&(u.gzindex=0,u.status=Di)}else u.status=Di;if(u.status===Di)if(u.gzhead.comment){f=u.pending;do{if(u.pending===u.pending_buf_size&&(u.gzhead.hcrc&&u.pending>f&&(a.adler=De(a.adler,u.pending_buf,u.pending-f,f)),He(a),f=u.pending,u.pending===u.pending_buf_size)){m=1;break}u.gzindex<u.gzhead.comment.length?m=u.gzhead.comment.charCodeAt(u.gzindex++)&255:m=0,et(u,m)}while(m!==0);u.gzhead.hcrc&&u.pending>f&&(a.adler=De(a.adler,u.pending_buf,u.pending-f,f)),m===0&&(u.status=ki)}else u.status=ki;if(u.status===ki&&(u.gzhead.hcrc?(u.pending+2>u.pending_buf_size&&He(a),u.pending+2<=u.pending_buf_size&&(et(u,a.adler&255),et(u,a.adler>>8&255),a.adler=0,u.status=ls)):u.status=ls),u.pending!==0){if(He(a),a.avail_out===0)return u.last_flush=-1,ae}else if(a.avail_in===0&&Po(p)<=Po(A)&&p!==Le)return Ue(a,Mn);if(u.status===Js&&a.avail_in!==0)return Ue(a,Mn);if(a.avail_in!==0||u.lookahead!==0||p!==cs&&u.status!==Js){let _=u.strategy===Pi?Mh(u,p):u.strategy===mh?Nh(u,p):ti[u.level].func(u,p);if((_===hs||_===Ts)&&(u.status=Js),_===wt||_===hs)return a.avail_out===0&&(u.last_flush=-1),ae;if(_===Qs&&(p===uh?hh(u):p!==Co&&(ch(u,0,0,!1),p===dh&&(Ve(u.head),u.lookahead===0&&(u.strstart=0,u.block_start=0,u.insert=0))),He(a),a.avail_out===0))return u.last_flush=-1,ae}return p!==Le?ae:u.wrap<=0?Io:(u.wrap===2?(et(u,a.adler&255),et(u,a.adler>>8&255),et(u,a.adler>>16&255),et(u,a.adler>>24&255),et(u,a.total_in&255),et(u,a.total_in>>8&255),et(u,a.total_in>>16&255),et(u,a.total_in>>24&255)):(Zs(u,a.adler>>>16),Zs(u,a.adler&65535)),He(a),u.wrap>0&&(u.wrap=-u.wrap),u.pending!==0?ae:Io)},Vh=a=>{if(!a||!a.state)return Xt;let p=a.state.status;return p!==Ni&&p!==kn&&p!==Mi&&p!==Di&&p!==ki&&p!==ls&&p!==Js?Ue(a,Xt):(a.state=null,p===ls?Ue(a,ph):ae)},jh=(a,p)=>{let f=p.length;if(!a||!a.state)return Xt;let m=a.state,u=m.wrap;if(u===2||u===1&&m.status!==Ni||m.lookahead)return Xt;if(u===1&&(a.adler=To(a.adler,p,f,0)),m.wrap=0,f>=m.w_size){u===0&&(Ve(m.head),m.strstart=0,m.block_start=0,m.insert=0);let Q=new Uint8Array(m.w_size);Q.set(p.subarray(f-m.w_size,f),0),p=Q,f=m.w_size}let A=a.avail_in,_=a.next_in,I=a.input;for(a.avail_in=f,a.next_in=0,a.input=p,us(m);m.lookahead>=J;){let Q=m.strstart,z=m.lookahead-(J-1);do m.ins_h=je(m,m.ins_h,m.window[Q+J-1]),m.prev[Q&m.w_mask]=m.head[m.ins_h],m.head[m.ins_h]=Q,Q++;while(--z);m.strstart=Q,m.lookahead=J-1,us(m)}return m.strstart+=m.lookahead,m.block_start=m.strstart,m.insert=m.lookahead,m.lookahead=0,m.match_length=m.prev_length=J-1,m.match_available=0,a.next_in=_,a.input=I,a.avail_in=A,m.wrap=u,ae};var Hh=xh,Bh=Do,Fh=Mo,zh=No,$h=Lh,Gh=Uh,qh=Vh,Wh=jh,Yh="pako deflate (from Nodeca project)",ei={deflateInit:Hh,deflateInit2:Bh,deflateReset:Fh,deflateResetKeep:zh,deflateSetHeader:$h,deflate:Gh,deflateEnd:qh,deflateSetDictionary:Wh,deflateInfo:Yh};let Xh=(a,p)=>Object.prototype.hasOwnProperty.call(a,p);var Kh=function(a){let p=Array.prototype.slice.call(arguments,1);for(;p.length;){let f=p.shift();if(f){if(typeof f!="object")throw new TypeError(f+"must be non-object");for(let m in f)Xh(f,m)&&(a[m]=f[m])}}return a},Jh=a=>{let p=0;for(let m=0,u=a.length;m<u;m++)p+=a[m].length;let f=new Uint8Array(p);for(let m=0,u=0,A=a.length;m<A;m++){let _=a[m];f.set(_,u),u+=_.length}return f},ko={assign:Kh,flattenChunks:Jh};let Lo=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Lo=!1}let si=new Uint8Array(256);for(let a=0;a<256;a++)si[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;si[254]=si[254]=1;var Qh=a=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let p,f,m,u,A,_=a.length,I=0;for(u=0;u<_;u++)f=a.charCodeAt(u),(f&64512)===55296&&u+1<_&&(m=a.charCodeAt(u+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),u++)),I+=f<128?1:f<2048?2:f<65536?3:4;for(p=new Uint8Array(I),A=0,u=0;A<I;u++)f=a.charCodeAt(u),(f&64512)===55296&&u+1<_&&(m=a.charCodeAt(u+1),(m&64512)===56320&&(f=65536+(f-55296<<10)+(m-56320),u++)),f<128?p[A++]=f:f<2048?(p[A++]=192|f>>>6,p[A++]=128|f&63):f<65536?(p[A++]=224|f>>>12,p[A++]=128|f>>>6&63,p[A++]=128|f&63):(p[A++]=240|f>>>18,p[A++]=128|f>>>12&63,p[A++]=128|f>>>6&63,p[A++]=128|f&63);return p};let xo=(a,p=a.length)=>{if(p<65534&&a.subarray&&Lo)return String.fromCharCode.apply(null,a.length===p?a:a.subarray(0,p));let f="";for(let m=0;m<p;m++)f+=String.fromCharCode(a[m]);return f};var Zh=(a,p)=>{let f=p||a.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,p));let m,u,A=new Array(f*2);for(u=0,m=0;m<f;){let _=a[m++];if(_<128){A[u++]=_;continue}let I=si[_];if(I>4){A[u++]=65533,m+=I-1;continue}for(_&=I===2?31:I===3?15:7;I>1&&m<f;)_=_<<6|a[m++]&63,I--;if(I>1){A[u++]=65533;continue}_<65536?A[u++]=_:(_-=65536,A[u++]=55296|_>>10&1023,A[u++]=56320|_&1023)}return xo(A,u)},tu=(a,p)=>{p=p||a.length,p>a.length&&(p=a.length);let f=p-1;for(;f>=0&&(a[f]&192)===128;)f--;return f<0||f===0?p:f+si[a[f]]>p?f:p},Uo={string2buf:Qh,buf2string:Zh,utf8border:tu};function eu(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var su=eu;let Vo=Object.prototype.toString,{Z_NO_FLUSH:iu,Z_SYNC_FLUSH:nu,Z_FULL_FLUSH:ru,Z_FINISH:ou,Z_OK:Li,Z_STREAM_END:au,Z_DEFAULT_COMPRESSION:cu,Z_DEFAULT_STRATEGY:lu,Z_DEFLATED:hu}=Ro;function xi(a){this.options=ko.assign({level:cu,method:hu,chunkSize:16384,windowBits:15,memLevel:8,strategy:lu},a||{});let p=this.options;p.raw&&p.windowBits>0?p.windowBits=-p.windowBits:p.gzip&&p.windowBits>0&&p.windowBits<16&&(p.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new su,this.strm.avail_out=0;let f=ei.deflateInit2(this.strm,p.level,p.method,p.windowBits,p.memLevel,p.strategy);if(f!==Li)throw new Error(Ii[f]);if(p.header&&ei.deflateSetHeader(this.strm,p.header),p.dictionary){let m;if(typeof p.dictionary=="string"?m=Uo.string2buf(p.dictionary):Vo.call(p.dictionary)==="[object ArrayBuffer]"?m=new Uint8Array(p.dictionary):m=p.dictionary,f=ei.deflateSetDictionary(this.strm,m),f!==Li)throw new Error(Ii[f]);this._dict_set=!0}}xi.prototype.push=function(a,p){let f=this.strm,m=this.options.chunkSize,u,A;if(this.ended)return!1;for(p===~~p?A=p:A=p===!0?ou:iu,typeof a=="string"?f.input=Uo.string2buf(a):Vo.call(a)==="[object ArrayBuffer]"?f.input=new Uint8Array(a):f.input=a,f.next_in=0,f.avail_in=f.input.length;;){if(f.avail_out===0&&(f.output=new Uint8Array(m),f.next_out=0,f.avail_out=m),(A===nu||A===ru)&&f.avail_out<=6){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(u=ei.deflate(f,A),u===au)return f.next_out>0&&this.onData(f.output.subarray(0,f.next_out)),u=ei.deflateEnd(this.strm),this.onEnd(u),this.ended=!0,u===Li;if(f.avail_out===0){this.onData(f.output);continue}if(A>0&&f.next_out>0){this.onData(f.output.subarray(0,f.next_out)),f.avail_out=0;continue}if(f.avail_in===0)break}return!0},xi.prototype.onData=function(a){this.chunks.push(a)},xi.prototype.onEnd=function(a){a===Li&&(this.result=ko.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};function uu(a,p){p=p||{};let f=new xi(p);if(f.push(a,!0),f.err)throw f.msg||Ii[f.err];return f.result}function du(a,p){return p=p||{},p.gzip=!0,uu(a,p)}return(a,p,f)=>{let m=du(a);return p==="base64"?m=btoa(xo(m)):m=m.buffer,f&&f(m),m}}var qE=(()=>{class s extends Oc{constructor(t){super(t),this.algorithm=yn.GZIP,this.Ag=qa(),this.iT=(i,r,o)=>{let c=this.Ag(i,r);o(c)},this.compress=Wa(),typeof CompressionStream!="undefined"&&Lp||(this.compress=this.iT,this.getCompressorSourceCode=()=>qa.toString())}compressSync(t,e){return this.Ag(t,e)}getCompressorSourceCode(){return Wa.toString()}}return s})();function Wa(){let s=n=>new Promise(t=>{let e=new FileReader;e.onload=i=>t(i.target.result.split(",")[1]),e.readAsDataURL(new Blob([n]))});return(n,t,e)=>{let i=new Response(n).body.pipeThrough(new CompressionStream("gzip")),r=new Response(i).arrayBuffer();if(t==="base64"){r.then(o=>s(o)).then(o=>e(o));return}r.then(o=>e(o))}}var WE=(()=>{class s extends Oc{constructor(){super(...arguments),this.algorithm=yn.UNCOMPRESSED}compress(t,e,i){i(this.compressSync(t,e))}compressSync(t,e){return t}getCompressorSourceCode(){return function(){return(t,e,i)=>i(t)}.toString()}}return s})(),Nl=(()=>{class s{static create(t,e=!0){return this.instance?this.instance:e&&!$E.isCompressionEnabled()?new WE(t):this.instance=new qE(t)}}return s})();var YE=(()=>{class s{constructor(t,e,i,r,o,c,l,h,g,d,E,y,S,R,O,b,w,x,N,C,H,$,it,Et,St,v,D,V,F){this.J=t,this.le=e,this.C=i,this.w=r,this.E=o,this.f=c,this.Hh=l,this.h=h,this.Bh=g,this.Ks=d,this.zr=E,this.pe=y,this.I=S,this.W=R,this.K=O,this.A=b,this.lT=w,this.Q=x,this.et=N,this._t=C,this.Rg=H,this.te=$,this.hT=it,this.R=Et,this.St=St,this.M=v,this.Ft=D,this.ot=V,this.gt=F,this.uT=(st=!1)=>{let yt=this.w.getSession();yt===null?(this.Pn=new FE(this.h.recordTargetingRules,this.Cg,this.E,this.ot,this.Q,this.A),this.Pn.init(),this.Pn.start()):(yt.collectState===U.RECORDING_RULES_TARGETING||yt.collectState===U.ANALYTICS_ONLY_RULES_TARGETING)&&this.Cg(st)},this.Cg=(st=!1)=>{this.On.onLoad(()=>{var yt,kt;(yt=this.Pn)===null||yt===void 0||yt.emitTargetingCollectState(),(kt=this.Pn)===null||kt===void 0||kt.stop(),this.E.emitStartTracking(st)}),this.Pa(st)},this.Pa=(st=!1)=>{this.Ks.isActive()||(this.gt.init(),this.Fh.start(st),this.On.start())},this.dT=()=>{this.E.emitBeforeSessionRenewal(),this.Nn(!0),this.E.emitAfterSessionRenewal()},this.pT=()=>{this.E.emitBeforeSessionRenewal(),this.ot.refreshQuota(),this.ot.onQuotaReady(st=>{st!==U.QUOTA_REACHED&&(this.Nn(!0),this.E.emitAfterSessionRenewal())})}}start(){var t;if(this.Bh.init(),this.Ks.init(),this.Ks.isActive())return;let e,i,r,o,c,l,h,g,d,E,y,S,R,O,b,w,x,N,C,H;this.R.schedule(()=>{R=new ky(this.w,this.C),w=new pE(R),S=new by(this.W),O=new AE(()=>{}),x=new TE,H=new RE;let $=new ME(O,this.gt,x,C,H,this.zh());b=new OE(this.zh(),this.gt,$,x,N);let it=new NE(this.E,this.f,this.gt,$,x,N,C);it.init(),this.E.addListener(it),e=new dy(this.h,this.J,this.C,this.W,S,this.f,R,new Yy(B),this.et,this.St,this.Q,b),i=new Cm(this.f,this.w,this.h,this.J,this.le,this.I),y=new Jy(b,this.h);let Et=new Fy(this.h);E=new By(this.h,Et,y,b,this.et),E.init();let St=new dE;r=new _m(this.C,this.w,this.f,this.et,Et,this.h,St,y),o=new Dm(this.h,this.J,this.C,this.f,this.I,R,this.A);let v;this.Fh=new wy(this.h,this.f,this.E,this.J,this.C,this.w,this.pe,this._t,this.K,this.A,this.te,St,this.Q,this.Gs,v),this.Ig=new Ny(this.h,this.C,this.w,this.f),h=new Vy(this.h,this.f,this.le,this.J,this.Q),g=new Hy(this.f),d=new Ky(this.h,new Rc(this.h,this.I),this.St),this.On=new Ay}),this.h.apiErrors.enabled&&this.R.schedule(()=>{this.lt=new _l,this.fT=new kE(this.f,this.lt),this.fT.init()}),this.h.apiErrors.enabled&&this.R.schedule(()=>{var $,it,Et;let St;!(($=this.h.apiErrors.collectionRules)===null||$===void 0)&&$.length?St=new wE(this.h.apiErrors,this.I):St=new bE(this.h.apiErrors,this.I),this.at=new $y(new yE,new EE,St),this.ce=new Gy(this.lt,this.K,!!(!((Et=(it=this.h)===null||it===void 0?void 0:it.experimental)===null||Et===void 0)&&Et.anonymizeNameInUrls)),this.Hi=new SE;let v=new tE(this.at,this.ce,this.h,this.J,this.et,this.f,this.St);v.init(),this.E.addListener(v)}),this.h.customErrors.enabled&&this.R.schedule(()=>{var $,it,Et;let St;this.Ys=new jE(this.I,!((Et=(it=this.h)===null||it===void 0?void 0:it.experimental)===null||Et===void 0)&&Et.anonymizeNameInUrls?this.K:void 0);let v=new uE(this.Ys,this.h,this.J,this.f,this.Q,this.St,this.et,St);v.init(),this.E.addListener(v)}),this.h.jsErrorsEnabled&&this.R.schedule(()=>{this.vs=new jy,this.ae=new Wy(this.I,this.A);let $=new oE(this.vs,this.ae,this.h,this.J,this.et,this.f,this.Q,this.A,this.St);$.init(),this.E.addListener($)}),this.R.schedule(()=>{this.zr.init()}),this.R.schedule(()=>{r.init()}),this.R.schedule(()=>{i.init()}),this.R.schedule(()=>{o.init()}),this.R.schedule(()=>{this.Rg.init()}),this.R.schedule(()=>{this.Fh.init()}),this.R.schedule(()=>{this.Ig.init()}),this.R.schedule(()=>{h.init()}),this.R.schedule(()=>{this.lT.init()}),this.R.schedule(()=>{g.init()}),this.R.schedule(()=>{d.init()}),this.R.schedule(()=>{this.hT.init()}),this.R.schedule(()=>{this.E.addListener(this.Ig),this.E.addListener(this.Hh),this.E.addListener(e),this.E.addListener(this.zr),this.E.addListener(r),this.E.addListener(o),this.E.addListener(this.Rg),this.E.addListener(this.Fh),this.E.addListener(h),this.E.addListener(i),this.E.addListener(E),this.E.addListener(d),this.E.addListener(w)}),vi.isRecordingSupported()&&this.R.schedule(()=>{let $=new hm(y,this.w,this.h,this.J,this.f,this.I,R,O,this.ae,this.at,this.ce,this.lt,this.E,this.Q,this.et,this.te,this.St,this.K,this.Hi,this.zh(),this.Ys,N);$.init(),this.E.addListener($),r.setRecordingService($.recordingService)}),this.R.schedule(()=>{e.init()}),this.R.schedule(()=>{this.h.isQuotaEnabled()?R.onSessionExpired(()=>{this.pT()}):R.onSessionExpired(()=>{this.dT()}),this.Nn()})}Nn(t=!1){var e;if(this.h.hasTargetingRules()){this.uT(t),this.f.start(),this.Pn&&this.Pn.checkInitialUrlTargetingRules();return}this.f.start(),this.On.onLoad(()=>{this.E.emitStartTracking(t)}),(!bl(this.h)||t)&&this.Pa(t)}zh(){if(this.nt)return this.nt;let t=new Al;return this.nt=new gE(this.pe,this.h,this.A,t),this.nt.init(),this.nt.shouldUseAnonymization()&&lt.counters.pageAnonymisation.count("anonymized-on-start"),this.nt}}return s})(),XE=(()=>{class s{constructor(t,e,i,r,o,c,l,h){this.h=t,this.C=e,this.Ge=i,this.Pg=r,this.gT=o,this.mT=c,this.yT=l,this.$h=h}compute(t){var e,i;this.h.crossDomainTracking&&!this.h.cookielessTrackingEnabled?this.h.crossDomainSingleIframeTracking?(e=this.yT)===null||e===void 0||e.start(()=>this.Gh(t)):(i=this.mT)===null||i===void 0||i.applyUpToDate(()=>this.Gh(t)):this.Gh(t)}Gh(t){this.gT.handle(),this.Pg.clear(),this.ET()?(this.Pg.restoreClearedVisitor(),t(!0)):(this.Ge.exclude(this.h),t(!1))}ET(){let t=Es.boolean(this.h.sampleRate);return this.$h.isForceIncluded()||!this.Ge.isExcluded()&&this.C.doesVisitorExist()||!this.Ge.isExcluded()&&t}}return s})(),KE=(()=>{class s{constructor(t,e,i,r){this.h=t,this.it=e,this.E=i,this.w=r,this.ST=10*1e3}createOrUpdateVisitor(){var t;let e=this.getVisitor();e===null&&(e=this.vT(),(t=this.w)===null||t===void 0||t.removeSession()),this._T(e),this.setVisitor(e)}vT(){return{id:fE.generate(),visitsCount:0,appliedTrackingDraw:this.h.lastTrackingDraw,creationTimestamp:Yo(),lastVisitTimestamp:0,hitTimestamp:0,expires:M.now()+this.h.visitorCookieTimeout,allowSubdomains:this.h.allowSubdomains,identityPrint:null}}_T(t){let e=Yo();this.w&&!this.w.doesSessionExist()&&(t.visitsCount+=1,t.lastVisitTimestamp=e),t.hitTimestamp=e,t.appliedTrackingDraw=this.h.lastTrackingDraw,this.Og=t.visitsCount}getRequestParameters(){let t=this.getVisitor();return t?{uu:t.id,sn:`${t.visitsCount}`,hd:`${t.hitTimestamp}`}:{}}getVisitor(){return this.it.get()}setVisitor(t){this.it.set(t)}doesVisitorExist(){return this.it.get()!==null}resetVisitor(){this.Ng(),this.E.emitAfterVisitorCleared()}removeVisitor(){this.it.remove()}hasAllowSubdomainsChanged(){let t=this.getVisitor();return t?t.allowSubdomains!==this.h.allowSubdomains:!1}handleSubdomainChange(){this.it.handleSubdomainChange()}isSessionRenewed(){let t=this.getVisitor();return t===null||this.Og===void 0?!1:t.visitsCount!==this.Og}wT(){return!W(this.Mg)||M.now()-this.Mg>this.ST}renewVisitor(){this.wT()?(this.Mg=M.now(),this.Ng(),this.E.emitAfterVisitorRenewal()):B.warn("session:start:newVisitor is trying to renew visitor under time limit")}Ng(){this.E.emitBeforeVisitorRenewal(),this.removeVisitor()}}return s})(),ie="_cs_s",Qi=18e5,er=".",JE=13,Gi=(()=>{let s;return function(n){n[n.NOT_FOUND=0]="NOT_FOUND",n[n.EXPIRED=1]="EXPIRED",n[n.FOUND=2]="FOUND"}(s||(s={})),s})(),QE=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i,this.Qt=null,this.qh=!1}get(t){let e=this.getRawSession(t);return this.isValid(e)?Lc(e):null}getRawSession(t){if(t){let g=this.Wh();return gr(g)}let{sessionString:e,status:i}=this.bT(),r=gr(e);if(i!==Gi.EXPIRED)return r;if(this.h.cookielessTrackingEnabled)return null;let o=this.Wh();if(!o)return null;let c=csString.prototype.split.call(o,er);if(!s.Dg(c))return o;let l=c[c.length-1],h=parseInt(l,10);return isNaN(h)||this.AT(h),r}onCookieToSet(t){this.ai=t}onCookieToRemove(t){this.ci=t}set(t,e=Qi){var i;let r=M.now()+e,o=dp(t);o+=`${er}${r}`,this.TT(o,r),this.h.cookielessTrackingEnabled?this.Xt.setItem(ie,o):(this.M.set(ie,o,e),(i=this.ai)===null||i===void 0||i.call(this,ie,o,e))}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(ie):(this.M.delete(ie),(t=this.ci)===null||t===void 0||t.call(this,ie)),this.RT()}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get(!0);t&&(this.h.allowSubdomains?this.M.delete(ie,mn.CURRENT_DOMAIN):this.M.delete(ie,this.M.getRootDomain()),this.set(t))}isValid(t){return t!==null&&Gr(t)}TT(t,e){this.Qt={sessionString:t,expires:e}}bT(){return this.Qt?this.Qt&&M.now()<=this.Qt.expires?{sessionString:this.Qt.sessionString,status:Gi.FOUND}:{sessionString:this.Qt.sessionString,status:Gi.EXPIRED}:{sessionString:this.Wh(),status:Gi.NOT_FOUND}}RT(){this.Qt=null}AT(t){this.Qt&&(this.Qt.expires=t,this.qh=!0)}isCacheRefreshed(){return this.qh}resetCacheRefreshed(){this.qh=!1}Wh(){if(this.h.cookielessTrackingEnabled){let e=this.Xt.getItem(ie);return!e||this.kg(e)?null:e}let t=this.M.get(ie);return!t||this.kg(t)?null:t}kg(t){let e=csString.prototype.split.call(t,er);if(!s.Dg(e))return!1;let i=parseInt(e[e.length-1],10);return!isNaN(i)&&M.now()>i}static Dg(t){return t[t.length-1].length===JE}}return s})(),co=60*1e3,ZE=60*co,tS=4*ZE-co,Os=(()=>{let s;return function(n){n[n.NO=0]="NO",n[n.WITHDRAWN=1]="WITHDRAWN",n[n.GRANTED=2]="GRANTED"}(s||(s={})),s})(),eS=(()=>{class s{constructor(t,e,i,r){this.ye=t,this.ot=e,this.CT=i,this.IT=r,this.$r=null,this.Yh=0,this.Gr=Os.NO}setDynamicVariablesService(t){this.PT=t}createOrUpdateSession(){this.Xh(),this.OT=M.now(),this.Yh=0;let t=this.Lg();t===null?(t=this.NT(),this.xg(t),this.Oa(t)):(t=this.ot.sanitizeSessionCollectState(t),this.xg(t),t.collectState=this.ot.getEligibleCollectState(t)),this.setSession(t)}grantReplayRecording(t){t.collectState=this.ot.getInitialCollectState(),t.collectState=this.ot.computeInitialCollectStateFromRecordingConsentGranted(t),this.setSession(t)}grantReplayRecordingBeforeSessionStart(){this.Gr=Os.GRANTED}withdrawnReplayRecording(t){t.collectState=this.ot.getRecordingConsentWithdrawn(),this.setSession(t)}withdrawnReplayRecordingBeforeSessionStart(){this.Gr=Os.WITHDRAWN}Oa(t){this.Gr===Os.WITHDRAWN?(t.collectState=this.ot.getRecordingConsentWithdrawn(),this.setSession(t)):this.Gr===Os.GRANTED?t.collectState=this.ot.computeInitialCollectStateFromRecordingConsentGranted(t):t.collectState=this.ot.computeInitialCollectState(t),this.Gr=Os.NO}NT(){return{pageNumber:0,collectState:this.ot.getInitialCollectState(),replayConsent:this.CT?fr.NOT_EXPRESSED:fr.UNNECESSARY,etrStatus:Kt.ETR_NOT_SAVED_SESSION}}xg(t){t.pageNumber+=1}isReplayRecorded(){let t=this.getSession();return!!t&&this.ot.isReplayRecorded(t)}isTemporarilyRecorded(){let t=this.getSession();return(t==null?void 0:t.collectState)===U.RECORDING_TEMPORARILY}getRequestParameters(){let t={},e=this.getSession();return e!==null&&(t.pn=`${e.pageNumber}`),t}getSession(){return this.ye.get()}Lg(){return this.ye.get(!0)}doesSessionExist(){return this.ye.get()!==null}setSession(t){this.ye.set(t)}refreshSession(){let t=this.Lg();t&&this.setSession(t)}removeSession(){this.ye.remove()}getCollectStates(){let t=this.getSession(),e=[];return t&&(t.collectState!==U.ANALYTICS_ONLY&&csArray.prototype.push.call(e,t.collectState===U.RECORDING_RULES_TARGETING?U.RECORDING_GLOBAL_SAMPLING:t.collectState),this.IT&&csArray.prototype.push.call(e,U.RECORDING_ETR_SAMPLING)),e}updateCollectState(t){let e=this.getSession();e!==null&&(e.collectState=t,this.setSession(e))}hasValidSession(){let t=this.ye.getRawSession();return this.ye.isValid(t)}handleSubdomainChange(){this.ye.handleSubdomainChange()}pollCacheRefreshEvent(t=!0){let e=this.ye.isCacheRefreshed();return e&&t&&this.ye.resetCacheRefreshed(),e}extendSessionPeriodically(){this.$r||this.Ug()}extendSession(){let t=this.getSession();return t===null?(B.warn("extendSession is trying to extend an expired session"),this.Xh(),!1):(this.ye.set(t,Qi),!0)}Ug(){if(this.MT()){this.Xh();return}this.extendSession()&&(this.DT(),this.kT())}kT(){this.$r=window.csSetTimeout(()=>{this.Ug()},Qi-co)}MT(){return tS-(M.now()+Qi-this.OT)<0}Xh(){this.$r&&(window.csClearTimeout(this.$r),this.$r=null)}DT(){this.Yh+=1,this.PT.trackDynamicVariable("session_expiry_update",this.Yh)}}return s})(),sS=(()=>{class s{constructor(t,e,i){this.h=t,this.C=e,this.Ge=i}clear(){this.LT()&&(this.Vg=this.C.getVisitor(),this.C.removeVisitor()),this.xT()&&this.Ge.removeExclusion()}LT(){return this.C.doesVisitorExist()&&this.C.getVisitor().appliedTrackingDraw!==this.h.lastTrackingDraw}xT(){return this.Ge.getAppliedTrackingDraw()!==this.h.lastTrackingDraw}restoreClearedVisitor(){this.Vg&&this.C.setVisitor(this.Vg)}}return s})(),iS=(()=>{class s{constructor(t,e,i){this.C=t,this.w=e,this.UT=i}handle(){this.C.hasAllowSubdomainsChanged()&&(this.C.handleSubdomainChange(),this.w.handleSubdomainChange(),this.UT.handleSubdomainChange())}}return s})(),We="_cs_c",fs=(()=>{let s;return function(n){n[n.NOT_REQUIRED=0]="NOT_REQUIRED",n[n.NOT_EXPRESSED=1]="NOT_EXPRESSED",n[n.GRANTED=2]="GRANTED",n[n.WITHDRAWN=3]="WITHDRAWN"}(s||(s={})),s})(),nS=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Ft=i}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Ft.getItem(We):t=this.M.get(We),t===null?t:Number(t)}set(t){this.h.cookielessTrackingEnabled?this.Ft.setItem(We,csString(t)):this.M.set(We,csString(t),jr)}remove(){this.h.cookielessTrackingEnabled?this.Ft.removeItem(We):this.M.delete(We)}handleSubdomainChange(){this.h.cookielessTrackingEnabled||(this.h.allowSubdomains?this.M.delete(We,mn.CURRENT_DOMAIN):this.M.delete(We,this.M.getRootDomain()))}}return s})(),rS=(()=>{class s{constructor(t,e,i){this.h=t,this.w=e,this.E=i}grantReplayConsent(){if(!ts.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.grantReplayRecordingBeforeSessionStart();return}ts.isRecordingBlockedByConsent(t)&&(this.w.grantReplayRecording(t),this.E.emitAfterReplayRecordingConsentGranted())}withdrawReplayConsent(){if(!ts.isReplayConsentNeeded(this.h))return;let t=this.w.getSession();if(!t){this.w.withdrawnReplayRecordingBeforeSessionStart();return}ts.isRecordingWithDrawn(t)||(this.w.withdrawnReplayRecording(t),this.E.emitAfterReplayRecordingConsentWithdrawn())}}return s})(),oS=["replay:consent:unanonymized:granted","trackConsentGranted"],aS=["replay:consent:unanonymized:withdrawn","trackConsentWithdrawn"],cS=["replay:consent:startForSession:granted"],lS=["replay:consent:startForSession:withdrawn"],hS=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.f=e,this.pe=i,this.w=r,this.E=o}init(){this.jg=new rS(this.h,this.w,this.E),this.pe.setInitialConsent(),this.ht()}ht(){this.f.register(oS,()=>{this.pe.grantReplayAnonymizationConsent()}),this.f.register(aS,()=>{this.pe.withdrawReplayAnonymizationConsent()}),this.f.register(cS,()=>{this.jg.grantReplayConsent()}),this.f.register(lS,()=>{this.jg.withdrawReplayConsent()})}onOptout(){this.pe.removeAllConsents()}onBeforeVisitorRenewal(){this.pe.removeAllConsents()}onAfterVisitorRenewal(){this.pe.setInitialConsent()}onAfterVisitorCleared(){this.pe.setInitialConsent()}}return s})(),uS=(()=>{class s{constructor(t,e,i){this.h=t,this.it=e,this.E=i}setInitialConsent(){let t=this.it.get();(t===null||this.hasConsentRequiredChanged(t))&&this.setDefaultReplayAnonymization()}hasConsentRequiredChanged(t){let e=this.h.consentRequired;return e&&t===fs.NOT_REQUIRED||!e&&t!==fs.NOT_REQUIRED}handleSubdomainChange(){this.it.handleSubdomainChange()}setDefaultReplayAnonymization(){let t=this.h.consentRequired?fs.NOT_EXPRESSED:fs.NOT_REQUIRED;this.it.set(t)}grantReplayAnonymizationConsent(){this.h.consentRequired&&(this.it.set(fs.GRANTED),this.E.emitReplayUnanonymizationConsentGranted())}withdrawReplayAnonymizationConsent(){this.h.consentRequired&&(this.it.set(fs.WITHDRAWN),this.E.emitReplayUnanonymizationConsentWithdrawn())}removeAllConsents(){this.it.remove()}isReplayUnanonymizedAllowedByConsent(){return!this.h.consentRequired||this.it.get()===fs.GRANTED}getRequestParameters(){return{uc:`${this.it.get()}`}}}return s})(),dS=(()=>{class s{constructor(t,e,i,r,o,c,l){this.E=t,this.f=e,this.Hh=i,this.Bh=r,this.Ks=o,this.VT=c,this.zr=l}start(){this.E.addListener(this.VT),this.E.addListener(this.zr),this.E.addListener(this.Hh),this.zr.init(),this.Bh.init(),this.Ks.init(),!this.Ks.isActive()&&this.f.start()}}return s})(),pS=(()=>{class s{constructor(t,e){this.Rt=t,this.it=e}exclude(t){this.it.set(csString(t.lastTrackingDraw))}removeExclusion(){this.it.remove()}isExcluded(){return this.jT()||this.HT()}jT(){return this.getAppliedTrackingDraw()!==0}getAppliedTrackingDraw(){return this.it.get()}HT(){return csString.prototype.indexOf.call(this.Rt.href,ve)>0}}return s})(),fS=(()=>{class s{constructor(t){this.Je=t}onOptout(){this.Je.removeExclusion()}}return s})(),sr=(()=>{let s;return function(n){n.SessionReplay="SR",n.None=""}(s||(s={})),s})(),gS=".^",Ml=".*",mS=(()=>{class s{constructor(t){this.A=t,this.Kh=new csRegExp(`${gS}`)}setExcludeUrlForSessionReplay(t){try{this.Kh=new csRegExp(t)}catch{B.warn(`excludeURLforReplay - invalid regex '${t}'`),this.Kh=new csRegExp(`${Ml}`)}}Hg(){return this.Kh.test(this.A.getAnonymizedUrl())?sr.SessionReplay:sr.None}isUrlExcludedForSessionReplay(){return this.Hg()===sr.SessionReplay}getRequestParameters(){return{ex:this.Hg()}}}return s})(),Dl=["excludeURLforReplay"],yS=(()=>{class s{constructor(t,e){this.Je=t,this.f=e}init(){this.f.register(Dl,t=>{if(T(t))this.Je.setExcludeUrlForSessionReplay(t);else throw new Error("Command misuse: excludeURLforReplay")})}}return s})(),ir="_cs_inc",ES=(()=>{class s{constructor(t,e){this.Rt=t,this.M=e}isForceIncluded(){return this.BT()||this.FT()}isForceReplayRecorded(){return this.zT(U.RECORDING_GLOBAL_SAMPLING)}BT(){return this.M.get(ir)!==null}zT(t){return this.M.get(ir)===t}FT(){return csString.prototype.indexOf.call(this.Rt.href,ir)>0}}return s})(),ai="_cs_optout",SS=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Ft=i}get(){return this.h.cookielessTrackingEnabled?this.Ft.getItem(ai):this.M.get(ai)}set(t){this.h.cookielessTrackingEnabled?this.Ft.setItem(ai,t):this.M.set(ai,t,jr)}}return s})(),Ya="1",vS=(()=>{class s{constructor(t,e,i){this.E=t,this.Rt=e,this.it=i}init(){!this.isActive()&&this.$T()&&this.activate()}isActive(){return this.it.get()===Ya}activate(){this.E.emitOptout(),this.it.set(Ya)}$T(){return csString.prototype.indexOf.call(this.Rt.href,ai)>0}}return s})(),_S=["optout"];var wS=(()=>{class s{constructor(t,e){this.f=t,this.Ks=e}init(){this.f.register(_S,()=>{this.Ks.activate()})}}return s})();var bS=(()=>{class s{constructor(t,e){this.f=t,this.et=e}init(){this.et.addListener(this.f)}onOptout(){this.f.stop()}onBeforeSessionRenewal(){this.f.stop()}}return s})();var AS=(()=>{let s;return function(n){n.UXA="_uxa",n.WVT="cs_wvt"}(s||(s={})),s})(),TS=(()=>{class s extends xt{constructor(t){super(),this.Jh=t,this.as={}}register(t,e,i){for(let r of t){let o=(...c)=>{try{let l=e(...c);return lt.counters.commandApplied.count(r),l}catch(l){lt.counters.commandMisuse.count(r),B.warn(`Misused Command: ${r}; Args: ${csJSON.stringify(c)}; Error: ${is(l)?l.stack:l}`)}};this.as[r]={callback:o,configuration:i},this.as}}onStart(){this.qT(),this.WT()}onStop(){for(let t of this.Jh)window[t]=[]}applyFromIntegration(t,e,i){this.Bg(t,e,`Commands.apply.from.integration: ${i}`),lt.counters.commandsFromIntegrations.count(t)}applyFromImplementation(t,e,i){this.Bg(t,e,`Commands.apply.from.implementation: ${i}`),lt.counters.commandsFromCSTC.count(t)}onIframeCommands(t){for(let e of t.commands)this.YT(e.name,e.params,t.iframePath),lt.counters.commandsFromIframe.count(e.name)}Bg(t,e,i){if(!this.isStarted){window._uxa.push([t,...e]);return}B.tryToExecute(i,()=>{if(this.as[t])return this.as[t].callback(...e)})()}YT(t,e,i){B.tryToExecute(`Commands.apply.from.iframe: ${i}`,()=>{if(this.as[t])return this.as[t].callback(...e)})()}qT(){for(let t of this.Jh)window[t].forEach(([e,...i])=>this.Fg(e,i,!1))}WT(){for(let t of this.Jh)window[t]={push:([e,...i])=>this.Fg(e,i,!0)}}Fg(t,e,i){var r,o;if(this.as[t]){if(((r=this.as[t].configuration)===null||r===void 0?void 0:r.disableApplyPending)&&!i||((o=this.as[t].configuration)===null||o===void 0?void 0:o.disableApplyImmediate)&&i)return;try{return this.as[t].callback(...e)}catch(l){lt.counters.commandError.count(t),B.error(`Command ${t} failed - params: ${csJSON.stringify(e)}`,l)}}}}return s})();var RS=(()=>{class s{constructor(t,e,i,r){this.h=t,this.C=e,this.w=i,this.Qg=r}getRequestParameters(){var t;let e={...Hr(),...this.h.getRequestParameters()},i=this.w.getSession();i&&(e.pn=`${i.pageNumber}`);let r=this.C.getVisitor();if(r&&(e.sn=`${r.visitsCount}`,e.uu=`${r.id}`),!((t=this.Qg)===null||t===void 0)&&t.hasSubProjectId()&&(e.subProjectID=`${this.Qg.getSubProjectId()}`),window.heap)try{e.happid=window.heap.appid,window.heap.getSessionId&&(e.hsid=window.heap.getSessionId()),window.heap.getUserId?e.huu=window.heap.getUserId():window.heap.userId&&(e.huu=window.heap.userId),window.heap.getPageviewMetadata&&(e.hpvid=window.heap.getPageviewMetadata().pageviewId)}catch{delete e.happid,delete e.hsid,delete e.huu,delete e.hpvid}return e}}return s})(),CS=(()=>{class s{constructor(t,e){this.f=t,this.Is=e}init(){this.f.register(["debugEvents"],t=>{typeof t=="boolean"&&this.Is.updateDynamicFields("emitDebugEvents",t)})}}return s})();function Xa(s,n,t){if(!W(n)&&!W(t))return s.href;let e=W(n)?kl(n):s.pathname,i=W(t)?Ll(t):s.search;return`${s.protocol}//${s.host}${e}${i}`}function kl(s){return Oe(s,"/")?s:`/${s}`}function Ll(s){return Oe(s,"?")||s===""?s:`?${s}`}var nr=(()=>{let s;return function(n){n[n.page=1]="page",n[n.onNextPageviewOnly=2]="onNextPageviewOnly"}(s||(s={})),s})(),IS=(()=>{class s{constructor(t,e){this.Rt=t,this.K=e,this.t0=10}overridePath(t,e){if(t===""){this.Mn=void 0;return}let i=this.Zg(e);i&&(this.tu=i),this.Mn=e?this.tm(t,e):t}overrideQuery(t,e){let i=this.Zg(e);i&&(this.eu=i),this.Wr=e?this.tm(t,e):t}computeOverriddenUrl(t){return this.e0(t)?this.getAnonymizedUrl():t}s0(t){return(typeof t=="string"||typeof t=="number")&&t in nr}e0(t){let e=this.Ea(this.Rt.href);return this.Ea(t)===e}Ea(t){return hd(t,"/")?csString.prototype.slice.call(t,0,-1):t}Zg(t){return W(t==null?void 0:t.lifespan)&&this.s0(t==null?void 0:t.lifespan)?t==null?void 0:t.lifespan:null}i0(){return this.tu&&this.tu in nr}n0(){return this.eu&&this.eu in nr}cleanupOverrideLifespan(){this.i0()&&(this.Mn=void 0,this.tu=void 0),this.n0()&&(this.Wr=void 0,this.eu=void 0)}getAnonymizedUrl(){let t=Xa(this.Rt,this.Mn,this.Wr);return this.K.anonymizeUrl(t)}getUrl(){return Xa(this.Rt,this.Mn,this.Wr)}getAnonymizedPathAndQuery(){let t=W(this.Mn)?kl(this.Mn):this.Rt.pathname,e=W(this.Wr)?Ll(this.Wr):this.Rt.search;return this.K.anonymizeUrl(t+e)}getUrlProtocol(){return this.Rt.protocol}getRequestParameters(){return{url:this.getAnonymizedUrl()}}tm(t,e){return this.r0(e)?this.o0(t):this.a0(e)?this.c0(t):t}a0(t){return!!t.decodeURI}c0(t){return this.em(t,1,!1)}r0(t){return!!t.decodeURIDeep}o0(t){return this.em(t,this.t0,!0)}em(t,e,i){let r=t;for(let o=0;o<e;o++)try{let c=window.decodeURI(r);if(c===r)return r;r=c}catch{return r}return i&&B.warn(`decodeURIDeep limit reached: ${r}`),r}}return s})(),lo=(()=>{class s{constructor(){this.listeners=[]}addListener(t){csArray.prototype.push.call(this.listeners,t)}}return s})(),PS=(()=>{class s extends lo{emitPageEvent(t){for(let e of this.listeners)e.onPageEvent&&e.onPageEvent(t)}emitEventTriggerRecording(t,e){for(let i of this.listeners)i.onEventTriggerRecording&&i.onEventTriggerRecording(t,e)}emitCustomJavaScriptErrorEvent(t){for(let e of this.listeners)e.onCustomJavaScriptErrorEvent&&e.onCustomJavaScriptErrorEvent(t)}emitCustomErrorEvent(t){for(let e of this.listeners)e.onCustomErrorEvent&&e.onCustomErrorEvent(t)}emitUserIdentifierEvent(t){for(let e of this.listeners)e.onUserIdentifierEvent&&e.onUserIdentifierEvent(t)}emitExternalEvent(t){for(let e of this.listeners)e.onExternalEvent&&e.onExternalEvent({type:G.EXTERNAL_EVENT,name:t,ts:0})}emitTargetingRulesArtificialPageview(t){for(let e of this.listeners)e.onTargetingRulesArtificialPageview&&e.onTargetingRulesArtificialPageview(t)}}return s})(),gi="|iframe|",OS=(()=>{class s extends lo{constructor(t,e,i,r){super(),this.l0=t,this.h0=e,this.u0=i,this.d0=r}emitIframeEvent(t,e,i){if(this.p0(e)&&t===null){B.error(`iframeEventEmitter received event ${e} with null iframe, content:${csJSON.stringify(i)}`);return}switch(e){case Z.ChildLogMessage:this.f0(i);break;case Z.AnalysisEvent:{let r=i,o=this.l0.transformEvent(t,r);o.isUserEvent?this.g0(o.event):this.m0(o.event);break}case Z.RecordingEvent:{let r=i,o=this.d0.transformEvents(t,r);if(o.events.length===0)return;o.containsUserEvent?this.y0(o.events):this.E0(o.events);break}case Z.JavascriptError:this.S0(i);break;case Z.ApiError:this.v0(i);break;case Z.DetailedApiError:this._0(i);break;case Z.CustomError:this.w0(i);break;case Z.EmerchandisingMessage:{let r=this.u0.transformEvent(t,i);this.b0(r);break}case Z.Commands:{let r=this.h0.transformEvent(t,i);this.A0(r);break}case Z.IntegrationCallback:this.T0(i);break;case Z.StaticResource:this.R0(i);break;case Z.TrackingContextRequestMessage:this.C0(i);break;default:B.error(`Parent received unknown data type from iframe : ${csJSON.stringify(i)}`)}}p0(t){let e=[Z.AnalysisEvent,Z.RecordingEvent,Z.EmerchandisingMessage,Z.Commands];return csArray.prototype.indexOf.call(e,t)!==-1}f0(t){let{message:e,errorCode:i,level:r}=t;switch(r){case ht.debug:B.debug(e,i);break;case ht.warn:B.warn(e,!0,i);break;case ht.implementation:B.implementation(e,i);break;case ht.error:B.error(e,i);break;case ht.critical:B.critical(e,i);break}}g0(t){for(let e of this.listeners)e.onIframeAnalysisUserEvent&&e.onIframeAnalysisUserEvent(t)}m0(t){for(let e of this.listeners)e.onIframeAnalysisBrowserEvent&&e.onIframeAnalysisBrowserEvent(t)}y0(t){for(let e of this.listeners)e.onIframeRecordingUserEvent&&e.onIframeRecordingUserEvent(t)}E0(t){for(let e of this.listeners)e.onIframeRecordingBrowserEvent&&e.onIframeRecordingBrowserEvent(t)}S0(t){for(let e of this.listeners)e.onIframeJavascriptError&&e.onIframeJavascriptError(t)}v0(t){for(let e of this.listeners)e.onIframeApiError&&e.onIframeApiError(t)}_0(t){for(let e of this.listeners)e.onIframeDetailedApiError&&e.onIframeDetailedApiError(t)}b0(t){for(let e of this.listeners)e.onIframeEmerchandisingMessage&&e.onIframeEmerchandisingMessage(t)}A0(t){for(let e of this.listeners)e.onIframeCommands&&e.onIframeCommands(t)}T0(t){for(let e of this.listeners)e.onIframeIntegrationCallback&&e.onIframeIntegrationCallback(t)}R0(t){for(let e of this.listeners)e.onIframeStaticResource&&e.onIframeStaticResource(t)}C0(t){for(let e of this.listeners)e.onTrackingContextRequestCallback&&e.onTrackingContextRequestCallback(t)}w0(t){for(let e of this.listeners)e.onIframeCustomError&&e.onIframeCustomError(t)}}return s})(),NS=(()=>{class s{setItem(t,e){window.sessionStorage.setItem(t,e)}getItem(t){return window.sessionStorage.getItem(t)}removeItem(t){window.sessionStorage.removeItem(t)}}return s})(),MS=(()=>{class s{setItem(t,e){window.localStorage.setItem(t,e)}getItem(t){return window.localStorage.getItem(t)}removeItem(t){window.localStorage.removeItem(t)}}return s})(),ho=["setCustomVariable"],DS=(()=>{class s{constructor(t,e){this.f=t,this._t=e}init(){this.f.register(ho,(t,e,i,r)=>{this._t.set(t,e,i,r)})}onAfterArtificialPageView(){this._t.deleteNextPageOnlyCustomVariables()}onAfterNaturalPageView(){this._t.deleteNextPageOnlyCustomVariables()}onOptout(){this._t.removeCustomVariablesSession()}onBeforeVisitorRenewal(){this._t.removeCustomVariablesSession(),this._t.removeCustomVariablesPage()}}return s})(),Ka=512,Ja=255,rr={SESSION:["visit",2],PAGE:["page",3],NEXT_PAGE_ONLY:["nextPageOnly",4]},kS=(()=>{class s{constructor(t,e){this.I=t,this.it=e,this.$t={},this.ke={}}set(t,e,i,r){let o,c;if((Ct(t)||T(t))&&Number(t)>0&&mt(e)&&mt(i)&&!me(e)&&!me(i)&&this.I0(r)){let l=this.I.anonymizePII(csString(e)),h=this.I.anonymizePII(csString(i));if(o=[csString.prototype.slice.call(l,0,Ka),csString.prototype.slice.call(h,0,Ja)],c=i!=="",!W(r)||csArray.prototype.indexOf.call(rr.SESSION,r)>=0){let g=this.getCustomVariablesSession();c?g[t]=o:delete g[t],this.setCustomVariableSession(g)}(!W(r)||csArray.prototype.indexOf.call(rr.PAGE,r)>=0)&&(c?this.$t[t]=o:delete this.$t[t]),W(r)&&csArray.prototype.indexOf.call(rr.NEXT_PAGE_ONLY,r)>=0&&(c?this.ke[t]=o:delete this.ke[t])}else throw new Error(`Command misuse: ${ho[0]}`)}getCustomVariablesSession(){let t=this.it.get();if(!t)return{};let e=window.csJSON.parse(t);return e!==null&&ss(e)?e:{}}setCustomVariableSession(t){this.it.set(window.csJSON.stringify(t))}removeCustomVariablesSession(){this.it.remove()}removeCustomVariablesPage(){this.$t={}}getRequestParameters(){let t=this.getCustomVariablesSession();for(let i in this.ke)this.ke.hasOwnProperty(i)&&(this.$t[i]=this.ke[i]);for(let i in this.$t)this.$t.hasOwnProperty(i)&&(t[i]=this.$t[i]);if(window.csJSON.stringify(t).length<=2)return{};let e={cvars:this.sm(t)};return this.$t&&window.csJSON.stringify(this.$t).length>2&&(e.cvarp=this.sm(this.$t)),e}deleteNextPageOnlyCustomVariables(){if(Object.keys(this.ke).length>0)for(let t in this.ke)this.ke[t]===this.$t[t]&&(delete this.$t[t],delete this.ke[t])}im(t){for(let e in t)if(t.hasOwnProperty(e)){let i=parseInt(e,10),r=t[e],o=r[0],c=r[1];(!_u(i,1,20)||o.length>Ka||c.length>Ja)&&delete t[e]}}sm(t){this.im(t);let e=wu(t)?[]:t;return window.csJSON.stringify(e)}I0(t){return!W(t)||T(t)||Ct(t)}getAllValidCustomVars(){let t=this.getCustomVariablesSession();for(let e in this.ke)this.ke.hasOwnProperty(e)&&(this.$t[e]=this.ke[e]);for(let e in this.$t)this.$t.hasOwnProperty(e)&&(t[e]=this.$t[e]);return this.im(t),t}}return s})(),le="_cs_id",LS=(()=>{class s{constructor(t,e,i){this.h=t,this.M=e,this.Xt=i}onCookieToSet(t){this.ai=t}onCookieToRemove(t){this.ci=t}get(){let t;return this.h.cookielessTrackingEnabled?t=this.Xt.getItem(le):t=this.M.get(le),t?(ap(t)||B.warn(`Invalid visitor string: ${t}`),rp(t)):null}set(t){var e;let i=op(t);if(this.h.cookielessTrackingEnabled)this.Xt.setItem(le,i);else{let r=new csDate(t.expires);this.M.set(le,i,r),(e=this.ai)===null||e===void 0||e.call(this,le,i,r)}}remove(){var t;this.h.cookielessTrackingEnabled?this.Xt.removeItem(le):(this.M.delete(le),(t=this.ci)===null||t===void 0||t.call(this,le))}handleSubdomainChange(){if(this.h.cookielessTrackingEnabled)return;let t=this.get();t&&(t.allowSubdomains=this.h.allowSubdomains,this.h.allowSubdomains?this.M.delete(le,mn.CURRENT_DOMAIN):this.M.delete(le,this.M.getRootDomain()),this.set(t))}}return s})(),xS=/\b((?:profile|user|last|first|primary|primary(?:[/_+-]|%20)?last)(?:[/_+-]|%20)?(?:name)[/=])[^#;?&/]+/gi,US="$1CS_ANONYMIZED_NAME",VS=(()=>{class s{constructor(t){this.I=t}anonymizeUrl(t,e={}){let i=e.maskingPatterns||[],r=e.partialMaskingPatterns||[],o=this.I.anonymizePII(t);if(o=this.I.anonymizeJwt(o),e.maskNames){let h=o;o=this.Dr(o),o!==h&&(lt.counters.redactedPII.count("name"),lt.counters.redactedPII.count("name-in-url"))}let c=this.P0(o,i);if(c!==o)return lt.counters.redactedPII.count("url"),c;let l=this.O0(o,r);return l!==o&&lt.counters.redactedPII.count("url"),l}removeQueryString(t){let{path:e,queryString:i}=this.su(t);return i!==""?`${e}?`:e}su(t){let e=csString.prototype.indexOf.call(t,"?"),i,r="";return e!==-1?(i=csString.prototype.slice.call(t,0,e),r=csString.prototype.slice.call(t,e,t.length)):i=t,{path:i,queryString:r}}P0(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.su(t),o=csString.prototype.split.call(i,"/");for(let c of e){let l=this.N0(o,c);if(l!==null)return`${l}${r}`}return t}N0(t,e){if(t.length<e.length)return null;let i=[];for(let r=0;r<t.length;r++){let o=t[r];if(r>=e.length){csArray.prototype.push.call(i,o);continue}let c=e[r].key;if(this.nm(c)){let l=e[r].value;csArray.prototype.push.call(i,l);continue}if(o===c){csArray.prototype.push.call(i,o);continue}return null}return csArray.prototype.join.call(i,"/")}O0(t,e){if(e.length===0)return t;let{path:i,queryString:r}=this.su(t),o=csString.prototype.split.call(i,"/");for(let c of e)o=this.M0(o,c);return`${csArray.prototype.join.call(o,"/")}${r}`}M0(t,e){let i=[],r=0,c=t[0]==="http:"||t[0]==="https:"?2:0;for(let l=0;l<t.length;l++){let h=t[l],g=e[r].key;if(this.nm(g)&&l>=c){let d=e[r].value;csArray.prototype.push.call(i,h.length>0?d:""),r++,r===e.length&&(r=0);continue}if(h===g){csArray.prototype.push.call(i,h),r++,r===e.length&&(r=0);continue}for(let d=0;d<r;d++){let E=l-r+d;i[E]=t[E]}r=0,csArray.prototype.push.call(i,h)}for(let l=0;l<r;l++){let h=t.length-r+l;i[h]=t[h]}return i}nm(t){return Oe(t,vl)}Dr(t){return csString.prototype.replace.call(t,xS,US)}}return s})(),jS=["class","data-com.agilebits.onepassword.initial-value","data-com.onepassword.iv","data-ember-action","data-initial-value","data-previous-value","data-react-checksum","data-reactid","id","maxlength","onclick","onsubmit","style"],HS=1024,BS=1024,FS=(()=>{class s{constructor(t,e){this.ut=t,this.h=e}getEventTargetPathAndHierarchy(t,e){let i=Rt(t),r={isNodeSensitive(o){return k.isMaskedElement(o)||k.isMaskedElementChild(o)},isAttributeSensitive(o,c){return k.isMaskedAttribute(o,c)},allWhitelistedAttributes:Jc(this.h.whitelistedAttributes),attributeIgnoreTokens:jS,useAnonymization:e,attrMaxLength:BS,hierarchyMaxLength:HS};return this.ut.getElementPathAndHierarchy(i,r,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPath(t){let e=Rt(t);return this.ut.getElementPath(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}getEventTargetPathAndTargetLink(t){let e=Rt(t),{path:i,firstAnchorParent:r}=this.ut.getElementPathAndFirstAnchorParent(e,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules}),o=this.D0(r)?r.href:"";return{path:i,targetLink:o}}hasValidEventTarget(t){let e=Rt(t);return this.ut.isValidElement(e)}getElementPath(t){return this.ut.getElementPath(t,{dynamicIdRegex:this.h.dynamicIdRegex,...this.h.pathComputationRules})}D0(t){var e;return t!==null&&t.hasAttribute("href")&&!Oe((e=t.getAttribute("href"))!==null&&e!==void 0?e:"","#")}}return s})(),zS=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){this.k0(t,e.event);let i=this.W.getElementPath(t);return this.L0(i,e.event),e}k0(t,e){if(Um(e)){let i=t.getBoundingClientRect();e.x=Math.round(i.left+e.x+Tt.windowOffsetX()),e.y=Math.round(i.top+e.y+Tt.windowOffsetY())}}L0(t,e){ll(e)&&(e.tgt=`${t}${gi}${e.tgt}`),Lm(e)&&(e.tgtHM=`${t}${gi}${e.tgtHM}`),xm(e)&&(e.tgtLk=`${t}${gi}${e.tgtLk}`)}}return s})(),$S=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){let i=this.W.getElementPath(t);return{iframePath:e.iframePath?`${i}${gi}${e.iframePath}`:i,commands:e.commands}}}return s})(),GS=(()=>{class s{constructor(t){this.W=t}transformEvent(t,e){if(e.products.length===0)return e;let i=this.W.getElementPath(t),r=csArray.prototype.map.call(e.products,o=>({...o,targetPath:`${i}${gi}${o.targetPath}`}));return{...e,products:r}}}return s})(),qS=(()=>{class s{constructor(){this.x0={clientX:2,clientY:3},this.U0={clientX:1,clientY:2},this.V0=[L.POINTER_DOWN,L.POINTER_MOVE,L.POINTER_UP],this.j0=[L.TOUCH_START,L.TOUCH_MOVE,L.TOUCH_END]}transformEvents(t,e){if(!rt.isConnected(t))return e.events=csArray.prototype.filter.call(e.events,c=>c.type!==L.VISIBILITY_CHANGE),e.events.length===0||(B.warn(`IframeRecordingEventsTransformer received event ${Z.RecordingEvent}
        from disconnected iframe, content:${csJSON.stringify(e.events)}`),e.events=[]),e;let i=nt(t),r=null;csArray.prototype.some.call(e.events,c=>this.rm(c)||this.om(c))&&(r=t.getBoundingClientRect());for(let c of e.events)this.rm(c)?this.H0(r,c):this.om(c)&&this.B0(r,c),c.context=c.context&&c.context.length>0?`${i}/${c.context}`:`${i}`;return e}B0(t,e){this.am(this.U0,t,e)}H0(t,e){this.am(this.x0,t,e)}am(t,e,i){i.args&&(i.args[t.clientX]=Math.round(e.left+i.args[t.clientX]),i.args[t.clientY]=Math.round(e.top+i.args[t.clientY]))}rm(t){return csArray.prototype.indexOf.call(this.V0,t.type)!==-1}om(t){return csArray.prototype.indexOf.call(this.j0,t.type)!==-1}}return s})(),WS=(()=>{class s{constructor(t){this.iu=t}start(){this.iu.onEvent(t=>this.G(t)),this.iu.start()}stop(){this.iu.stop()}G(t){let e=`Content Security Policy error. Violated directive: ${t.violatedDirective} - Source file: ${t.sourceFile}`;B.warn(e)}}return s})(),YS=(()=>{class s{constructor(){this.Vt={boundElement:document,type:"securitypolicyviolation",listener:t=>this.securityPolicyViolationListener(t)},csArray.prototype.push.call(s.nu,"localhost"),csArray.prototype.push.call(s.nu,"fake-tracker.content-square.fr")}start(){ft(this.Vt)}stop(){gt(this.Vt)}onEvent(t){this.O=t}F0(t){if(!t)return!1;let e=t.disposition;return T(t.sourceFile)&&csArray.prototype.some.call(s.nu,i=>csString.prototype.indexOf.call(t.sourceFile,i)>0)&&e!=="report"}securityPolicyViolationListener(t){this.F0(t)&&this.O({violatedDirective:t.violatedDirective,sourceFile:t.sourceFile})}}return s.nu=["contentsquare","cdnssl.clicktale.net"],j([P("Event handler type: securitypolicyviolation")],s.prototype,"securityPolicyViolationListener",null),s})(),XS=(()=>{class s{init(){this.cm=new WS(new YS),this.cm.start()}onOptout(){this.cm.stop()}}return s})();var Qa=1/0,{toString:KS}=Object.prototype;function JS(s){return s==null?s===void 0?"[object Undefined]":"[object Null]":KS.call(s)}var uo=s=>typeof s=="symbol"||typeof s=="object"&&s!=null&&JS(s)==="[object Symbol]";function xl(s){if(typeof s=="string"||uo(s))return s;let n=`${s}`;return typeof s=="number"?n==="0"&&1/s===-Qa?"-0":n:s instanceof Number&&n==="0"&&1/s.valueOf()===-Qa?"-0":n}var QS=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ZS=/^\w*$/;function tv(s,n){return csArray.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||uo(s)?!0:ZS.test(s)||!QS.test(s)||n!=null&&s in Object(n)}function po(s,n){if(typeof s!="function"||n!=null&&typeof n!="function")throw new TypeError("Expected a function");let t=function(...e){let i=n?n.apply(this,e):e[0],{cache:r}=t;if(r.has(i))return r.get(i);let o=s.apply(this,e);return t.cache=r.set(i,o)||r,o};return t.cache=new(po.Cache||Map),t}po.Cache=Map;var ev=500;function sv(s){let n=po(s,t=>{let{cache:e}=n;return e.size===ev&&e.clear(),t});return n}var iv=46,nv=/\\(\\)?/g,rv=csRegExp(`[^.[\\]]+|\\[(?:([^"'][^[]*)|(["'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))`,"g"),Ul=sv(s=>{let n=[];return csString.prototype.charCodeAt.call(s,0)===iv&&csArray.prototype.push.call(n,""),csString.prototype.replace.call(s,rv,(t,e,i,r)=>{let o=t;return i?o=csString.prototype.replace.call(r,nv,"$1"):e&&(o=csString.prototype.trim.call(e)),csArray.prototype.push.call(n,o),t}),n});function ov(s,n){return csArray.isArray(s)?s:tv(s,n)?[s]:Ul(s)}function av(s,n){let t=ov(n,s),e=s,i=0,{length:r}=t;for(;e!=null&&i<r;){let o=xl(t[i]);e=e[o],i+=1}return i&&i===r?e:void 0}function cv(s){return"iterable"in s}function Vl(s){return W(s.iterable)?T(s.iterable)||s.iterable===null:!0}function jl(s,n,t){let e=s==null?void 0:av(s,n);return e===void 0?t:e}var lv=/\b__p \+= '';/g,hv=/\b(__p \+=) '' \+/g,uv=/(__e\(.*?\)|\b__t\)) \+\n'';/g,dv=/['\n\r\u2028\u2029\\]/g,Hl=/[&<>"']/g,pv=csRegExp(Hl.source),fv=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qi=/($^)/,gv={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},mv=/[()=,{}[\]/\s]/,yv=/<%-([\s\S]+?)%>/g,Ev=/<%([\s\S]+?)%>/g,Bl=/<%=([\s\S]+?)%>/g,{hasOwnProperty:Za}=Object.prototype,Sv="Invalid `variable` option passed into `_.template`";function vv(s){return`\\${gv[s]}`}var _v={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},wv={escape:yv,evaluate:Ev,interpolate:Bl,variable:"",imports:{_:{template:Zi,escape(s){return s&&pv.test(s)?csString.prototype.replace.call(s,Hl,n=>_v[n]):s!=null?s:""}}}};function Zi(s,n){let t={...wv,...n},e=Object.keys(t.imports||{}),i=csArray.prototype.map.call(e,S=>t==null?void 0:t.imports[S]),r,o,c=0,l=t.interpolate||qi,h="__p += '",g=csRegExp(`${(t.escape||qi).source}|${l.source}|${(l===Bl?fv:qi).source}|${(t.evaluate||qi).source}|$`,"g"),d=`//# sourceURL=${Za.call(t,"sourceURL")?csString.prototype.replace.call(`${t.sourceURL}`,/\s/g," "):void 0}
`;s==null||csString.prototype.replace.call(s,g,(S,R,O,b,w,x)=>{let N=O||b;return h+=csString.prototype.replace.call(csString.prototype.slice.call(s,c,x),dv,vv),R&&(r=!0,h+=`' +
__e(${R}) +
'`),w&&(o=!0,h+=`';
${w};
__p += '`),N&&(h+=`' +
((__t = (${N})) == null ? '' : __t) +
'`),c=x+S.length,S}),h+=`';
`;let E=Za.call(t,"variable")&&t.variable;if(!E)h=`with (obj) {
${h}
}
`;else if(mv.test(E))throw new Error(Sv);h=csString.prototype.replace.call(csString.prototype.replace.call(o?csString.prototype.replace.call(h,lv,""):h,hv,"$1"),uv,"$1;"),h=`function(${E||"obj"}) {
${E?"":`obj || (obj = {});
`}var __t, __p = ''${r?", __e = _.escape":""}${o?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`}${h}return __p
}`;let y;try{y=Function(...e,`${d}return ${h}`)(...i)}catch(S){y=S}if(y.source=h,y instanceof Error)throw y;return y}var bv=/^(\s*("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\s*,?)+$/,Av=/<%[\s\S]+?%>|<%-[\s\S]+?%>|<%=[\s\S]+?%>|\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/,Tv=/^document\.querySelector\(("(?:[^"\\]|\\.)*"|'(?:[^'\\]|\\.)*')\)\.(textContent|value)$/;function tc(s){if(!bv.test(s)||Av.test(s))throw new Error("whitelisted function is wrongly used")}var ec={"window.location.hash.replace(":(s,n)=>{let t=csString.prototype.substring.call(s,29,s.length-1);return tc(t),Zi(`\${${s}}`)(n)},"window.sessionStorage.getItem(":(s,n)=>{let t=csString.prototype.substring.call(s,30,s.length-1);return tc(t),Zi(`\${${s}}`)(n)},"document.querySelector(":(s,n)=>{if(Tv.test(s))return Zi(`\${${s}}`)(n)},"new Date().getTime()":(s,n)=>new csDate().getTime().toString()};function Rv(s){let n=pe(Object.keys(ec),t=>Vt(s,t));if(n)return ec[n]}function Cv(s){return Vt(s,"'")&&$s(s,"'")}var Iv=/\$\{([\s\S]+?)\}/g,Pv=s=>(n,t,e)=>{let i="";return csArray.prototype.forEach.call(csString.prototype.split.call(t,"+"),r=>{let o=csString.prototype.trim.call(r),c=jl(s,o);if(c===void 0)if(Cv(o))c=csString.prototype.substring.call(o,1,o.length-1);else{let l=Rv(o);if(l&&(c=l(o,s)),c===void 0)throw new Error("undefined not allowed")}i+=c}),i};function Bs(s,n){try{return csString.prototype.replace.call(s,Iv,Pv(n))}catch{return null}}function Cr(s,n){let t={};for(let e of Object.keys(s)){let i=s[e];if(T(i)){let r=Bs(i,n);if(r===null)return null;t[e]=r}else t[e]=i}return t}function Ir(s,n){let t=csArray.prototype.join.call(csArray.prototype.filter.call(csArray.prototype.map.call(csString.prototype.split.call(s,","),e=>Bs(e,n)),e=>e!==null&&Dt(e)),",");return Dt(t)?t:null}function Ov(s){return csArray.isArray(s)?csArray.prototype.map.call(s,xl):uo(s)?[s]:csArray.from(Ul(s))}function Nv(s,n){try{let e=/^values\(([a-zA-Z0-9_$[\].]+)\)\[\?([a-zA-Z0-9_$]+)\]$/.exec(s);if(!e)return null;let i=e[1],r=e[2],o=jl(n,Ov(i));if(typeof o!="object"||o===null)return null;let c=[];return csArray.prototype.forEach.call(Object.keys(o),l=>{let h=o[l];typeof h=="object"&&h!==null&&!csArray.isArray(h)&&r in h&&csArray.prototype.push.call(c,h)}),c}catch{return null}}function Mv(s,n){let e=/^\[([0-9]+):([0-9+])\]$/.exec(s);if(!e)return null;let i=parseInt(e[1],10),r=parseInt(e[2],10);return r<=i||r>n.length?null:csArray.prototype.slice.call(n,i,r)}function Dv(s,n){let t=csString.prototype.split.call(s,"|");if(t.length>2)return null;let e=Nv(csString.prototype.trim.call(t[0]),n);return t.length===2?e===null?null:Mv(csString.prototype.trim.call(t[1]),e):e}var or=(()=>{let s;return function(n){n.AND="AND",n.OR="OR"}(s||(s={})),s})(),re=(()=>{let s;return function(n){n.STARTS_WITH="startsWith",n.EQUALS="equals",n.NOT_EQUALS="notEquals",n.CONTAINS="contains",n.NOT_CONTAINS="notContains",n.MATCHES="matches",n.NOT_MATCHES="notMatches",n.EXIST="exist",n.NOT_EXIST="notExist"}(s||(s={})),s})();function Fl(s,n){return kv(s.operator,Vv(s.args,n))}function kv(s,n){switch(s){case re.EXIST:case re.NOT_EXIST:return Lv(s,n);default:return xv(s,n)}}function Lv(s,n){let[t]=n;if(!Dt(t))return!1;switch(s){case re.EXIST:return window.csquerySelector[document.nodeType].call(document,t)!==null;case re.NOT_EXIST:return window.csquerySelector[document.nodeType].call(document,t)===null;default:return!1}}function xv(s,n){let[t,e]=n;if(!(s in or)&&!(T(t)&&T(e)))return!1;switch(s){case or.AND:return!!csArray.prototype.reduce.call(n,(r,o)=>r&&o);case or.OR:return!!csArray.prototype.reduce.call(n,(r,o)=>r||o);case re.STARTS_WITH:return Vt(t,e);case re.EQUALS:return t===e;case re.NOT_EQUALS:return t!==e;case re.CONTAINS:return csString.prototype.indexOf.call(t,e)>-1;case re.NOT_CONTAINS:return csString.prototype.indexOf.call(t,e)===-1;case re.MATCHES:{let r=sc(e);return r!==null&&r.test(t)}case re.NOT_MATCHES:{let r=sc(e);return r!==null&&!r.test(t)}default:return!1}}function Uv(s){return!!(s&&s.operator&&s.args)}function Vv(s,n){return csArray.prototype.map.call(s,t=>Uv(t)?Fl(t,n):T(t)?Bs(t,n):t)}function sc(s){let n=/^\/(.*)\/([gimy]*)$/.exec(s),t=null;if(n){let[,e,i]=n;try{t=new csRegExp(e,i)}catch{}}else try{t=new csRegExp(s)}catch{}return t}function fo(s){switch(s){case"no decoding":return null;case"decode once":return{decodeURI:!0};case"decode multiple times":return{decodeURIDeep:!0};default:return null}}function go(s){switch(s==null?void 0:s[0]){case"on next pageview only":return{lifespan:"onNextPageviewOnly"};default:return null}}var _t=(()=>{class s{constructor(t,e){this.commandsService=t,this.args=e}}return s})(),Ci=(()=>{class s extends _t{}return s})(),zl=(()=>{class s extends _t{validateArgs(t){if(K(t)){let e=W(t.path)?T(t.path):!0,i=W(t.decodeURI)?T(t.decodeURI):!0,r=W(t.lifespan)?csArray.isArray(t.lifespan):!0;return e&&i&&r}return!1}execute(t){if(!t.path)this.Yr([]);else{let e=[t.path],i=fo(t.decodeURI),r=go(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.Yr(e)}}Yr(t){this.commandsService.applyFromImplementation(wl[0],t,"ArtificialPageviewTemplate")}}return s})(),jv=(()=>{class s extends Ci{validateArgs(t){return K(t)?T(t.message)&&csArray.isArray(t.attributes):!1}execute(t,e){let i=Bs(t.message,e);if(!i)return;let r={};for(let o of t.attributes){let c=Bs(o.value,e);c!==null&&(r[o.key]=c)}this.commandsService.applyFromImplementation(Cn[0],[i,r],"CustomErrorTemplate")}}return s})(),Hv=(()=>{class s extends _t{validateArgs(t){if(K(t)){let e=Vl(t),i=csArray.isArray(t.scope)?Vr(t.scope,r=>T(r)):!0;return e&&i&&Ct(t.index)&&T(t.name)&&T(t.value)}return!1}execute(t){this.commandsService.applyFromImplementation(ho[0],[t.index,t.name,t.value,t.scope[0]],"CustomVariableTemplate")}}return s})(),Bv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.selector):!1}execute(t){this.commandsService.applyFromImplementation(Il[0],[t.selector],"DataCsEncryptTemplate")}}return s})(),Fv="data-cs-override-id",zv=(()=>{class s extends _t{validateArgs(t){if(K(t)){let e=mt(t.value)?T(t.value):!0;return T(t.selector)&&e}return!1}execute(t){var e;if(!Dt(t.selector))return;let i=window.csquerySelector[document.nodeType].call(document,t.selector);i&&i.setAttribute(Fv,(e=t.value)!==null&&e!==void 0?e:"")}}return s})(),$v=20,Gv=(()=>{class s extends Ci{validateArgs(t){return K(t)?Vl(t)&&T(t.key)&&T(t.value)&&T(t.type):!1}execute(t,e){let i=Cr(t,e);i!==null?this.Yr(i):this.$0(t,e)()}$0(t,e){return()=>{let i=0,r=window.csSetInterval(()=>{i+=1;let o=Cr(t,e);if(o!==null){window.csClearInterval(r),r=void 0,i=0,this.Yr(o);return}i>=$v&&(window.csClearInterval(r),r=void 0,i=0)},100)}}Yr(t){let e=t.value;if(t.type==="Integer"){let i=Number.parseInt(t.value,10);Number.isNaN(i)||(e=i)}this.commandsService.applyFromImplementation(Jr[0],[{key:t.key,value:e}],"DynamicVariableTemplate")}}return s})(),qv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.transactionId)&&Ct(t.revenue)&&T(t.currency)&&T(t.name)&&T(t.sku)&&T(t.category)&&Ct(t.price)&&Ct(t.quantity):!1}execute(t){this.G0({id:t.transactionId,revenue:t.revenue,currency:t.currency}),this.q0({id:t.transactionId,name:t.name,sku:t.sku,category:t.category,price:t.price,quantity:t.quantity}),this.Ma()}G0(t){this.commandsService.applyFromImplementation(Qr[0],[t],"EcTransactionAllTemplate")}q0(t){this.commandsService.applyFromImplementation(bn[0],[t],"EcTransactionAllTemplate")}Ma(){this.commandsService.applyFromImplementation(Zr[0],[],"EcTransactionAllTemplate")}}return s})(),Wv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.id)&&Ct(t.revenue)&&T(t.currency):!1}execute(t){this.commandsService.applyFromImplementation(Qr[0],[t],"EcTransactionCreateTemplate")}}return s})(),Yv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.id)&&T(t.name)&&T(t.sku)&&T(t.category)&&Ct(t.price)&&Ct(t.quantity):!1}execute(t){this.commandsService.applyFromImplementation(bn[0],[t],"EcTransactionItemsAddTemplate")}}return s})(),Xv=(()=>{class s extends _t{validateArgs(t){return!!K(t)}execute(){this.commandsService.applyFromImplementation(Zr[0],[],"EcTransactionSendTemplate")}}return s})(),Kv=(()=>{class s extends Ci{validateArgs(t){return K(t)?mt(t)&&T(t.selector):!1}execute(t,e){if(!mt(t)||!T(t==null?void 0:t.selector))return;let i=Ir(t.selector,e);i!==null&&this.commandsService.applyFromImplementation(Pl[0],[i],"ElementUnmaskingTemplate")}}return s})(),Jv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ri[0],[`@ETP@${t.eventName}`],"EventTriggerRecordingPageTemplate")}}return s})(),Qv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ri[0],[`@ETS@${t.eventName}`],"EventTriggerRecordingSessionTemplate")}}return s})(),Zv=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(ro[0],[t.eventName],"PageEventTemplate")}}return s})(),t_=(()=>{class s extends Ci{validateArgs(t){if(K(t)){let e=csArray.isArray(t.cssSelectors),i=csArray.isArray(t.attributes);return e&&i}return!1}execute(t,e){let i=csArray.prototype.filter.call(csArray.prototype.map.call(t.cssSelectors,c=>Ir(c,e)),c=>!!c),r=csArray.prototype.filter.call(csArray.prototype.map.call(t.attributes,c=>{let l=Bs(c.attrName,e),h=Ir(c.selector,e);return{attrName:l,selector:h}}),c=>!!c.attrName&&!!c.selector),o={PIISelectors:[...i],Attributes:[...r]};this.commandsService.applyFromImplementation(ao[0],[o],"PIIMaskingTemplate")}}return s})(),e_=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.eventName):!1}execute(t){this.commandsService.applyFromImplementation(Ri[0],[`${t.eventName}`],"RecordingEventTriggerTemplate")}}return s})(),s_=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.path):!1}execute(t){let e=[t.path],i=fo(t.decodeURI),r=go(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Ar[0],e,"SetPathTemplate")}}return s})(),i_=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.query):!1}execute(t){let e=[t.query],i=fo(t.decodeURI),r=go(t.lifespan),o={...i,...r};Object.keys(o).length&&e.push(o),this.commandsService.applyFromImplementation(Tr[0],e,"SetQueryTemplate")}}return s})(),n_=(()=>{class s extends _t{validateArgs(t){return!!K(t)}execute(){this.commandsService.applyFromImplementation(ol[0],[],"SrmOnlineAssetsTemplate")}}return s})(),r_=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.status)&&T(t.selector):!1}execute(t){if(!Dt(t.selector))return;let e=window.csquerySelector[document.nodeType].call(document,t.selector);e&&this.commandsService.applyFromImplementation(no[0],[t.status,e],"SubmitTemplate")}}return s})(),Yt=(()=>{class s{onEvent(t){this.onEventCallback=t}constructor(t,e,i){this.commandsService=t,this.condition=i,this.isStarted=!1,this.lm=!1,this.args=e}start(){this.lm||(this.onInit(),this.lm=!0),this.isStarted||(this.onStart(),this.isStarted=!0)}stop(){this.isStarted&&(this.onStop(),this.isStarted=!1)}}return j([P()],s.prototype,"start",null),j([P()],s.prototype,"stop",null),s})(),ic="once per pageview",o_="always",a_=(()=>{class s extends Yt{constructor(){super(...arguments),this.ft=!0}validateArgs(t){if(K(t)){let e=T(t.selector),i=t.frequency?t.frequency===ic||t.frequency===o_:!0;return e&&i}return!1}onInit(){if(!Dt(this.args.selector)){this.ft=!1;return}this.Xr=this.args.frequency?this.args.frequency===ic:!0,this.F=new oe((t,e)=>this.S(t,e))}onStart(){this.ft&&this.F.observe(this.args.selector)}onStop(){this.ft&&(this.F.processPendingMutations(),this.F.disconnect())}S(t,e){e==="added"&&(this.Xr?(this.stop(),this.onEventCallback({element:t[0]})):new Set(t).forEach(i=>this.onEventCallback({element:i})))}}return s})(),c_=(()=>{class s extends Yt{constructor(){super(...arguments),this.ft=!0,this.hm=!1}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){if(!Dt(this.args.selector)){this.ft=!1;return}this.F=new oe((t,e)=>{this.S(t,e)})}onStart(){this.ft&&(this.F.observe(this.args.selector),this.hm=!0)}onStop(){this.ft&&(this.F.processPendingMutations(),this.F.disconnect())}S(t,e){this.hm?e==="added"&&new Set(t).forEach(i=>this.onEventCallback({element:i})):this.onEventCallback({element:t[0]})}}return s})(),l_=(()=>{class s extends Yt{constructor(){super(...arguments),this.ft=!0}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){if(!Dt(this.args.selector)){this.ft=!1;return}this.V=new oe(t=>this.W0(t)),this.P=new ye(t=>this.Y0(t))}onStart(){this.ft&&(this.Da=csSymbol("MatchingElement"),this.V.observe(this.args.selector),this.P.observe())}onStop(){this.ft&&(this.V.processPendingMutations(),this.V.disconnect(),this.P.disconnect())}W0(t){new Set(t).forEach(e=>this.X0(e))}Y0(t){let e=Ur(t,r=>r.removedNodes),i=[];for(let r of e)csArray.prototype.push.call(i,...this.K0(r));new Set(i).forEach(r=>this.onEventCallback({element:r}))}X0(t){t[this.Da]=!0}K0(t){let e=[];return Zt(t,NodeFilter.SHOW_ELEMENT).visitAll(i=>{i[this.Da]&&(rt.isConnected(i)?Wt.call(i,this.args.selector)||delete i[this.Da]:delete i[this.Da],csArray.prototype.push.call(e,i))}),e}}return s})(),h_=(()=>{class s{static readyStateChangeListener(t){csArray.prototype.forEach.call(rs(s.callbacks),e=>e(t))}static ul(t){s.callbacks.has(t)||(s.callbacks.add(t),s.callbacks.size===1&&ft(s.eventHandler,!1))}static dl(t){s.callbacks.delete(t),s.callbacks.size===0&&gt(s.eventHandler,!1)}constructor(t){this.S=t}observe(){s.ul(this.S)}disconnect(){s.dl(this.S)}}return s.callbacks=new Set,s.eventHandler={boundElement:at.document,type:"readystatechange",listener:s.readyStateChangeListener},tt([P("readyStateChangeListener"),ut()],s,"readyStateChangeListener",null),s})(),u_=(()=>{class s extends Yt{constructor(){super(...arguments),this.ou={state:"Any"}}validateArgs(t){var e;return K(t)&&T(t.state)||(B.implementation(`PageStateTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.state}, fallback to default config.`),this.args=this.ou),!0}onInit(){this.wt=this.args.state.toLowerCase(),this.F=new h_(()=>{this.um(this.wt,document.readyState)&&(this.onEventCallback(),this.F.disconnect())})}onStart(){this.um(this.wt,document.readyState)?this.onEventCallback():this.F.observe()}onStop(){this.F.disconnect()}um(t,e){let i=s.dm[e];return s.dm[t]<=i}}return s.dm={complete:3,interactive:2,loading:1,any:0},s})(),d_=(()=>{class s extends Yt{validateArgs(t){return!!K(t)}J0(){this.isStarted&&this.onEventCallback()}onInit(){this.commandsService.applyFromImplementation(al[0],[()=>this.J0()],"AfterPageViewTrigger")}onStart(){}onStop(){}}return s})(),p_=(()=>{class s extends Yt{constructor(){super(...arguments),this.au=!1,this.ft=!0,this.Hs=!0,this.Zs={boundElement:document,type:"click",listener:t=>{if(this.au){this.au=!1;return}this.onClickOrTap(t)}},this.Q0=(t,e)=>{t.type===At.TAP&&(this.au=!0,this.onClickOrTap(e))}}validateArgs(t){return K(t)?T(t.selector):!1}onClickOrTap({target:t}){if(mt(t)&&Ie(t)){let e=Hs(t,this.args.selector);e&&this.onEventCallback({element:e})}}onInit(){if(!Dt(this.args.selector)){this.ft=!1;return}this.lr=new sl(this.Q0)}onStart(){var t;this.ft&&(ft(this.Zs,this.Hs),(t=this.lr)===null||t===void 0||t.observe())}onStop(){var t;this.ft&&(gt(this.Zs,this.Hs),(t=this.lr)===null||t===void 0||t.disconnect())}}return j([P("onClickOrTap"),ut()],s.prototype,"onClickOrTap",null),s})(),f_=(()=>{class s{static Z0(){var t,e,i,r;if("history"in window){let o=Object.getOwnPropertyDescriptors(history);if(!((t=o.pushState)===null||t===void 0)&&t.writable&&(!((e=o.replaceState)===null||e===void 0)&&e.writable))return history}if(History.prototype){let o=Object.getOwnPropertyDescriptors(History.prototype);if(!((i=o.pushState)===null||i===void 0)&&i.writable&&(!((r=o.replaceState)===null||r===void 0)&&r.writable))return History.prototype}pt.warn("Unable to override pushState, replaceState",!0,"HistoryChangeObserver")}static Rh(){let t=s.Z0();s.Kr===null&&me(t==null?void 0:t.pushState)&&(s.Kr=Gt({target:t,methodName:"pushState",hook:({args:e})=>{s.pm("pushstate",e)}})),s.Jr===null&&me(t==null?void 0:t.replaceState)&&(s.Jr=Gt({target:t,methodName:"replaceState",hook:({args:e})=>{s.pm("replacestate",e)}}))}static Fn(t){var e,i;s.ve.add(t),s.ve.size===1&&((s.Kr===null||s.Jr===null)&&s.Rh(),(e=s.Kr)===null||e===void 0||e.activate(),(i=s.Jr)===null||i===void 0||i.activate(),ft(s.fm),ft(s.gm))}static $n(t){var e,i;s.ve.delete(t),s.ve.size===0&&((e=s.Kr)===null||e===void 0||e.deactivate(),(i=s.Jr)===null||i===void 0||i.deactivate(),gt(s.fm),gt(s.gm))}static pm(t,e){let i={type:t,state:e[0]};T(e[2])&&(i.url=e[2]),s.$i(i)}static popstateListener(t){s.$i({type:"popstate",state:t.state})}static hashchangeListener(t){s.$i({type:"hashchange",state:null,url:t.newURL})}static $i(t){csArray.prototype.forEach.call(rs(s.ve),e=>{e(t)})}constructor(t){this.S=t}observe(){s.Fn(this.S)}disconnect(){s.$n(this.S)}}return s.Kr=null,s.Jr=null,s.fm={boundElement:at,type:"popstate",listener:n=>s.popstateListener(n)},s.gm={boundElement:at,type:"hashchange",listener:n=>s.hashchangeListener(n)},s.ve=new Set,tt([P("popstateListener"),ut()],s,"popstateListener",null),tt([P("hashchangeListener"),ut()],s,"hashchangeListener",null),s})(),g_=(()=>{class s extends Yt{validateArgs(t){if(K(t)){let e=T(t.useDebounce),i=t.useDebounce==="yes"?Ct(t==null?void 0:t.window):!0,r=T(t.listeners);return e&&i&&r}return!1}onInit(){this.args.useDebounce==="yes"?this.Jt=hn(()=>{this.onEventCallback()},this.args.window):this.Jt=this.onEventCallback,this.F=new f_(t=>this.lu(t))}mm(){return window.location.href}lu(t){let e=t.type==="replacestate"&&this.args.listeners.indexOf("replaceState")===-1,i=t.type==="hashchange"&&this.args.listeners.indexOf("hashchange")===-1;if(e||i)return;let r=this.mm();this.ym!==r&&(this.ym=r,this.Jt())}onStart(){this.ym=this.mm(),this.F.observe()}onStop(){this.F.disconnect()}}return s})(),m_=(()=>{class s extends Yt{constructor(){super(...arguments),this.ft=!0,this.Hs=!0,this.Zs={boundElement:document,type:"submit",listener:t=>this.submitListener(t)}}validateArgs(t){return K(t)?T(t.selector):!1}submitListener({target:t}){mt(t)&&Ie(t)&&Wt.call(t,this.args.selector)&&this.onEventCallback({element:t})}onInit(){Dt(this.args.selector)||(this.ft=!1)}onStart(){this.ft&&ft(this.Zs,this.Hs)}onStop(){this.ft&&gt(this.Zs,this.Hs)}}return j([P("submitListener"),ut()],s.prototype,"submitListener",null),s})(),y_=(()=>{class s extends Yt{constructor(){super(...arguments),this.ft=!0,this.Em={boundElement:document,type:"mouseover",listener:t=>this.mouseoverListener(t)},this.Sm={boundElement:document,type:"mouseleave",listener:t=>this.mouseleaveListener(t)}}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){Dt(this.args.selector)||(this.ft=!1)}mouseleaveListener({target:t}){mt(t)&&Ie(t)&&t[this.ka]&&delete t[this.ka]}mouseoverListener({target:t}){if(mt(t)&&Ie(t)){let e=Hs(t,this.args.selector);e!==null&&!e[this.ka]&&(e[this.ka]=!0,this.onEventCallback({element:e}))}}onStart(){this.ft&&(this.ka=csSymbol("Hovered"),ft(this.Sm,!0),ft(this.Em,!0))}onStop(){this.ft&&(gt(this.Em),gt(this.Sm))}}return j([P("mouseleaveListener"),ut()],s.prototype,"mouseleaveListener",null),j([P("mouseoverListener"),ut()],s.prototype,"mouseoverListener",null),s})(),E_=(()=>{class s extends Yt{constructor(){super(...arguments),this.Zs={boundElement:window,type:"hashchange",listener:t=>this.hashChangedListener(t)}}validateArgs(t){return!!K(t)}hashChangedListener(t){t.newURL&&t.newURL===t.oldURL||this.onEventCallback()}onInit(){}onStart(){ft(this.Zs)}onStop(){gt(this.Zs)}}return j([P("hashChangedListener"),ut()],s.prototype,"hashChangedListener",null),s})(),S_=(()=>{class s extends Yt{constructor(){super(...arguments),this.La=!0}validateArgs(t){return K(t)?T(t.selector):!1}onInit(){if(!Dt(this.args.selector)||!ln.isSupported()){this.La=!1;return}this.bt=new ln({delay:0,trackOnce:!0,reobserve:!0}),this.V=new oe(t=>this.hu(t),{closest:!0})}hu(t){for(let e of t)this.bt.observe(e)}du(t,e){if(this.isStarted&&e===pi.VisibleInViewPort){let i=Hs(t,this.args.selector);i&&(this.onEventCallback({element:i}),this.stop(),this.La=!1)}}onStart(){this.La&&(this.bt.start((t,e)=>this.du(t,e)),this.V.observe(this.args.selector))}onStop(){this.La&&(this.bt.stop(),this.V.disconnect())}}return s})(),v_=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.url):!1}execute(t){this.commandsService.applyFromImplementation(Rr[0],[t.url],"ApiErrorsMaskUrlTemplate")}}return s})(),__=(()=>{class s extends _t{validateArgs(t){return K(t)?T(t.maskingPattern):!1}execute(t){this.commandsService.applyFromImplementation(Ol[0],[t.maskingPattern],"NetworkRequestMaskUrlTemplate")}}return s})(),nc="once per pageview",w_="always",b_=(()=>{class s extends Yt{constructor(){super(...arguments),this.pu=!1,this.je=!1,this.Xr=!0}validateArgs(t){if(K(t)){let e=T(t.selector),i=t.frequency?t.frequency===nc||t.frequency===w_:!0;return e&&i}return!1}onInit(){ln.isSupported()&&(this.je=!0,this.Xr=this.args.frequency?this.args.frequency===nc:!0,this.V=new oe((t,e)=>{if(e==="initial")for(let i of t)rt.isVisibleInViewportInForeground(i)&&(i[this.fu]=!0);this.hu(t)},{closest:!0}),this.bt=new ln({delay:0,trackOnce:!1,reobserve:!0,allowSameMatch:!0}))}onStart(){!this.je||this.isStarted||(this.fu=csSymbol("skipElement"),this.pu=!1,this.bt.start((t,e)=>this.du(t,e)),this.V.observe(this.args.selector))}onStop(){!this.je||!this.isStarted||(this.V.disconnect(),this.bt.stop())}du(t,e){if(this.isStarted&&e===pi.VisibleInViewPort){let i=t.closest(this.args.selector);if(i){if(i[this.fu]){delete i[this.fu];return}this.Xr&&this.stop(),(!this.Xr||!this.pu)&&(this.pu=!0,this.onEventCallback({element:i}))}}}hu(t){for(let e of t)this.bt.observe(e)}}return s})(),Pr=(()=>{class s extends Yt{constructor(){super(...arguments),this.ou={pageviewTypes:["natural","artificial"]}}validateArgs(t){var e;return K(t)&&ss(t)&&csArray.isArray(t.pageviewTypes)&&Vr(t.pageviewTypes,r=>T(r))||(B.implementation(`BeforePageViewTrigger has wrong argument: ${(e=this.args)===null||e===void 0?void 0:e.pageviewTypes}, fallback to default config.`),this.args=this.ou),!0}onInit(){this.tR=this.args.pageviewTypes}onPageView(t){this.isStarted&&csArray.prototype.indexOf.call(this.tR,t)!==-1&&this.onEventCallback()}onStart(){}onStop(){}}return s})(),A_=(()=>{class s extends _t{constructor(){super(...arguments),this.gu=!1}validateArgs(t){return K(t)&&T(t.type)&&T(t.urls)&&(t.type==="allow"||t.type==="block")&&csString.prototype.trim.call(t.urls).length>0?(this.gu=!1,!0):(B.implementation(`BlockAllowListForSRTemplate has wrong argument: ${t}, fallback to default config.`),this.gu=!0,!0)}execute(t){let e="";this.gu?e=Ml:e=this.eR(t.urls,t.type),this.commandsService.applyFromImplementation(Dl[0],[e],"BlockAllowListForSRTemplate")}eR(t,e){let i=e==="allow"?"?!":"";return i+=csArray.prototype.join.call(csArray.prototype.map.call(csString.prototype.split.call(t,","),r=>`.*${csString.prototype.trim.call(r)}`),"|"),`^(${i}).*?`}}return s})(),T_=(()=>{class s{constructor(t){this.f=t,this.sR={ApiErrorsMaskUrl:v_,NetworkRequestMaskUrls:__,ArtificialPageview:zl,BlockAllowListForSr:A_,CustomError:jv,CustomVariable:Hv,DataCsEncrypt:Bv,DataCsOverride:zv,DynamicVariable:Gv,EcTransactionAll:qv,EcTransactionCreate:Wv,EcTransactionItemsAdd:Yv,EcTransactionSend:Xv,ElementUnmasking:Kv,EventTriggerRecordingPage:Jv,EventTriggerRecordingSession:Qv,PageEvent:Zv,PiiMasking:t_,RecordingEventTrigger:e_,SetPath:s_,SetQuery:i_,SrmOnlineAssets:n_,Submit:r_},this.Dn={AfterPageView:d_,ElementAdded:a_,ElementBecomesVisible:b_,ElementExist:c_,ElementRemoved:l_,ElementVisibility:S_,ElementClick:p_,FormSubmit:m_,HashChange:E_,HistoryChange:g_,Mouseover:y_,PageState:u_,BeforePageView:Pr}}iR(t){let e=this.sR[t.name];return e?new e(this.f,t.args):(B.error(`Implementations: template ${t.name} does not exist`),null)}nR(t){let e=this.Dn[t.name];return e?new e(this.f,t.args,t.condition):(B.error(`Implementations: trigger ${t.name} does not exist`),null)}parse(t){let e=[];for(let{triggers:i,template:r}of t){let o=this.iR(r);if(!o)continue;if(!o.validateArgs(o.args)){B.implementation(`${r.name} has wrong argument.`);continue}for(let l of i){let h=this.nR(l);if(!h)continue;if(!h.validateArgs(h.args)){B.implementation(`${l.name} has wrong argument.`);continue}csArray.prototype.push.call(e,{name:`${l.name}_${r.name}`,trigger:h,template:o})}}return e}}return s})(),R_=(()=>{class s{constructor(t,e,i){this.rR=t,this.R=i,this.we={window,document,location,cookies:{}},this.Dn=new Set,this.oR=new T_(e)}init(){Object.defineProperty(this.we,"cookies",{get:()=>this.aR()});let t=this.oR.parse(this.rR);for(let{name:e,trigger:i,template:r}of t)i instanceof Pr&&r instanceof zl||(this.Dn.add(i),i.onEvent(o=>{this.onTriggerEvent(o,r),lt.counters.CSTCSnippetUsed.count(e)}))}start(t=!1){this.Dn.forEach(e=>{e.condition&&!Fl(e.condition,this.we)||(t?this.R.schedule(()=>{e.start()}):e.start())})}stop(){this.Dn.forEach(t=>{t.stop()})}onBeforePageView(t){this.Dn.forEach(e=>{if(e instanceof Pr){e.onPageView(t);return}})}onTriggerEvent(t,e){let i=this.cR(t),r={...this.we,...i},o=[];if(cv(e.args)&&T(e.args.iterable)&&e.args.iterable.length>0){let c=Dv(e.args.iterable,r);if(mt(c)){let l=csArray.prototype.map.call(c,h=>({...r,$:h}));csArray.prototype.push.call(o,...l)}}else csArray.prototype.push.call(o,r);if(e instanceof Ci){for(let c of o)e.execute(e.args,c);return}for(let c of o){let l=Cr(e.args,c);l&&e.execute(l)}}aR(){let t;try{t=document.cookie}catch{t=""}return csArray.prototype.reduce.call(csString.prototype.split.call(t,"; "),(e,i)=>{let[r,o]=csString.prototype.split.call(i,"=");return o!==void 0&&(e[r]=o),e},{})}cR(t){let e={...t};for(let i in e)dt(e[i])&&(k.isMaskedElement(e[i])||k.isMaskedElementChild(e[i]))&&delete e[i];return e}}return j([It("implementationsService.start")],s.prototype,"start",null),j([P()],s.prototype,"onTriggerEvent",null),s})(),C_=(()=>{class s{constructor(t,e,i){this.bs=new R_(t,e,i)}init(){this.bs.init()}onInitTracking(){this.bs.start(!0)}onOptout(){this.bs.stop()}onBeforeSessionRenewal(){this.bs.stop(),this.bs.start()}onBeforeArtificialPageView(){this.bs.stop(),this.bs.start(),this.bs.onBeforePageView("artificial")}onBeforeNaturalPageView(){this.bs.onBeforePageView("natural")}}return s})(),$l=(()=>{class s{constructor(t){this.configuration=t}}return s})(),I_=(()=>{class s extends $l{constructor(t,e,i){super(t),this.configuration=t,this.Qr=e,this.E=i,this.lR=U.RECORDING_GLOBAL_SAMPLING}refreshQuota(){this.Zr=void 0,this.hR()}onQuotaReady(t){this.vm=t}init(){this.uR()}sanitizeSessionCollectState(t){return t}canCollect(t){return t!==null&&t.collectState!==U.QUOTA_REACHED}computeInitialCollectState(t){return this.Zr?(this.E.emitCollectStateChange(this.Zr,this.configuration.malkaEtrEnabled?qt.ETR_ON:qt.ETR_OFF),this.Zr):(B.warn("Quota file error computeInitialCollectState() called before quota answered"),U.QUOTA_REACHED)}getEligibleCollectState(t){return t.collectState===U.QUOTA_REACHED?U.QUOTA_REACHED:!vi.isRecordingSupported()&&this.isReplayRecorded(t)?U.ANALYTICS_ONLY:t.collectState===U.RECORDING_RULES_TARGETING?U.RECORDING_RULES_TARGETING:t.collectState===U.ANALYTICS_ONLY_RULES_TARGETING?U.ANALYTICS_ONLY_RULES_TARGETING:t.collectState===U.RECORDING_GLOBAL_SAMPLING?U.RECORDING_GLOBAL_SAMPLING:U.ANALYTICS_ONLY}isReplayRecorded(t){return t.collectState===U.RECORDING_GLOBAL_SAMPLING||t.collectState===U.RECORDING_RULES_TARGETING}getInitialCollectState(){return this.Zr||U.QUOTA_REACHED}computeInitialCollectStateFromRecordingConsentGranted(t){return U.ANALYTICS_ONLY}to(t){this.Zr=t,this.vm&&this.vm(t)}uR(){this.Qr.onError(t=>this.quotaServiceErrorHandler(`HTTP:${t.status} - fetching quota file for pid: ${this.configuration.projectId}`)),this.Qr.onTimeout(()=>this.quotaServiceErrorHandler("timeout")),this.Qr.onLoad(t=>this.quotaFileHandler(t))}hR(){this.Qr.isInProgress()||this.Qr.send()}quotaFileHandler(t){var e;if(!(!((e=t==null?void 0:t.quotas)===null||e===void 0)&&e.length)){this.quotaServiceErrorHandler("Quota types missing from config file");return}this.dR(t)}quotaServiceErrorHandler(t){let e=`Quota error - ${t}`;B.warn(e),this.to(this.lR)}dR(t){let e=!1,i=!1;for(let r of t.quotas)r.quotaType==="ANALYTICS"&&r.value?e=!0:r.quotaType==="RECORDING"&&r.value&&Es.boolean(Math.round(r.value*100))&&(i=!0);!e&&i?this.quotaServiceErrorHandler(`Quota types impossible: replay without analytics - ${csJSON.stringify(t)}`):e&&i?vi.isRecordingSupported()?this.to(U.RECORDING_GLOBAL_SAMPLING):this.to(U.ANALYTICS_ONLY):e&&!i?this.to(U.ANALYTICS_ONLY):this.to(U.QUOTA_REACHED)}getRecordingConsentWithdrawn(){return U.ANALYTICS_ONLY}}return j([P("Quota File: quotaFileHandler")],s.prototype,"quotaFileHandler",null),j([P("Quota File: onerror")],s.prototype,"quotaServiceErrorHandler",null),s})(),P_=(()=>{class s extends $l{constructor(t,e,i,r,o){super(t),this.configuration=t,this.E=e,this.$h=i,this.A=r,this.mu=o,this.yu=!1}refreshQuota(){}onQuotaReady(t){}canCollect(t){return!0}init(){this.configuration.malkaUrlEnabled&&this.configuration.hasRecordingUrlRules()&&(this.yu=!0,this.mu.setRegexRules(this.configuration.recordingUrlRules))}sanitizeSessionCollectState(t){return(t.collectState===U.QUOTA_REACHED||t.collectState===U.RECORDING_RULES_TARGETING||t.collectState===U.RECORDING_TEMPORARILY)&&(t.collectState=U.ANALYTICS_ONLY),t}computeInitialCollectState(){return ts.isReplayConsentNeeded(this.configuration)?U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED:this.Oa()}computeInitialCollectStateFromRecordingConsentGranted(){return this.Oa()}Oa(){if(!vi.isRecordingSupported())return U.ANALYTICS_ONLY;let t=U.ANALYTICS_ONLY,e=qt.ETR_OFF;return Es.percentage()<this.configuration.replayRecordingRate||this.$h.isForceReplayRecorded()?t=U.RECORDING_GLOBAL_SAMPLING:this.yu&&this.mu.evaluateUrl(this.A.getAnonymizedUrl())&&(t=U.RECORDING_URL_SAMPLING),this.configuration.malkaEtrEnabled&&(e=qt.ETR_ON),this.E.emitCollectStateChange(t,e),t}getEligibleCollectState(t){if(!vi.isRecordingSupported())return U.ANALYTICS_ONLY;if(ts.isRecordingBlockedByConsent(t))return t.collectState===U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN?U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN:U.RECORDING_BLOCKED_BY_CONSENT_NOT_EXPRESSED;if(t.collectState===U.RECORDING_GLOBAL_SAMPLING)return U.RECORDING_GLOBAL_SAMPLING;let e=this.configuration.malkaEtrEnabled?qt.ETR_ON:qt.ETR_OFF;return this.yu&&this.mu.evaluateUrl(this.A.getAnonymizedUrl())?(this.E.emitCollectStateChange(U.RECORDING_URL_SAMPLING,e),U.RECORDING_URL_SAMPLING):(this.E.emitCollectStateChange(U.ANALYTICS_ONLY,e),U.ANALYTICS_ONLY)}isReplayRecorded(t){return ts.isRecordingBlockedByConsent(t)?!1:t.collectState===U.RECORDING_TEMPORARILY||t.collectState===U.RECORDING_GLOBAL_SAMPLING||t.collectState===U.RECORDING_URL_SAMPLING||this.configuration.malkaEtrEnabled}getInitialCollectState(){return U.ANALYTICS_ONLY}getRecordingConsentWithdrawn(){return U.RECORDING_BLOCKED_BY_CONSENT_WITHDRAWN}}return s})();function O_(){let s="[data-cs-mask]",n="#c1_card_info_id",t=".ctHidden",e=["[data-heap-redact-text]","[heap-ignore]","[data-heap-ignore]","[data-heap-redact-attributes]"],i=["[data-hj-suppress]",".data-hj-suppress","[data-hj-masked]"];return[s,n,t,...e,...i]}function N_(){return[{selector:".ctHidden,input:not([type=button]):not([type=submit])",attrName:"value"}]}var M_=(()=>{class s{constructor(){this.pR={PIISelectors:["picture","img","video","audio"],Attributes:[]},this.ws={elementSelector:"",attrSelector:"",attrSelectors:[]};let t={PIISelectors:O_(),Attributes:N_()};this.ws=k.getComputedSelectorSettings(t,this.ws)}init(){this.fR()}setMaskedElementSettingsFromCommand(t){if(t=k.sanitizeSelectorUserInput(t),!k.isSelectorUserInput(t))throw new Error(`Command misuse: ${ao[0]}`);this.Eu(t)}setMaskedElementSettingsFromParent(t){let e={PIISelectors:csString.prototype.split.call(t.elementSelector,","),Attributes:t.attrSelectors};this.Eu(e)}getMaskedElementSettings(t){return t?this._m(this.pR):this.ws}fR(){var t,e,i,r,o,c;let l={PIISelectors:[],Attributes:[]};((i=(e=(t=window==null?void 0:window.ClickTaleSettings)===null||t===void 0?void 0:t.DOM)===null||e===void 0?void 0:e.PII)===null||i===void 0?void 0:i.Text)instanceof Array&&l.PIISelectors.push(...window.ClickTaleSettings.DOM.PII.Text),((c=(o=(r=window==null?void 0:window.ClickTaleSettings)===null||r===void 0?void 0:r.DOM)===null||o===void 0?void 0:o.PII)===null||c===void 0?void 0:c.Attributes)instanceof Array&&window.ClickTaleSettings.DOM.PII.Attributes.forEach(h=>{T(h.attr)&&T(h.rule)&&l.Attributes.push({selector:h.rule,attrName:h.attr})}),this.Eu(l)}Eu(t){this.ws=this._m(t)}_m(t){return k.getComputedSelectorSettings(t,this.ws)}}return s})();var D_=(()=>{class s{constructor(t,e,i,r,o){this.h=t,this.ni=e,this.ls=i,this.R=r,this.E=o,this.gR=()=>{var c;let l=vt.get(ie);l!==null&&Gr(l)?this.ot.canCollect(pp(l))?this.init():!((c=this.h.voc)===null||c===void 0)&&c.enabled:(this.ot.onQuotaReady(h=>{var g;h!==U.QUOTA_REACHED?this.init():!((g=this.h.voc)===null||g===void 0)&&g.enabled}),this.ot.refreshQuota())}}initWithQuota(){var t;if(!this.h.collectionEnabled){!((t=this.h.voc)===null||t===void 0)&&t.enabled;return}let e=new PE(this.h.getSettingsFileUri(),"",{type:"json",cacheMinutes:15});this.ot=new I_(this.h,e,this.E),this.ot.init(),this.gR()}init(){ci.isSupported()&&ci.setDigestSalt(this.h.projectId.toString());let t,e,i,r,o,c,l,h,g,d,E,y,S,R,O,b,w,x,N,C,H,$,it,Et,St,v,D,V,F,st,yt,kt,Me,os,bs;this.R.schedule(()=>{t=new bi,e=new VS(t),r=new IS(window.location,e),i=new mn(this.h,r,this.ni),i.init()}),this.R.schedule(()=>{o=new NS,c=new MS,w=new ES(window.location,i),new XS().init(),x=Nl.create(B.warn),b=new Nc(x),this.ot===void 0&&(this.ot=new P_(this.h,this.E,w,r,new Al),this.ot.init())}),this.R.schedule(()=>{l=new QE(this.h,i,o),g=new eS(l,this.ot,this.h.replayConsentRequiredForSession,this.h.malkaEtrEnabled)}),this.R.schedule(()=>{d=new LS(this.h,i,o),E=new KE(this.h,d,this.E,g),this.ls.setContext(E,g)}),this.R.schedule(()=>{os=new uS(this.h,new nS(this.h,i,c),this.E),y=new iS(E,g,os),S=new gp(this.h,i,o),R=new pS(window.location,S),O=new fS(R),H=new sS(this.h,E,R),kt=new FS(Re,this.h),D=new zS(kt),V=new $S(kt),F=new GS(kt),st=new qS,yt=new OS(D,V,F,st),v=new TS([AS.UXA]),$=new bS(v,yt),it=new mS(r),Et=new yS(it,v);let as=new mp(this.h,i,o);Me=new kS(t,as),St=new DS(v,Me);let As=new ip(E,g,R,Me,this.h)}),this.R.schedule(()=>{let as=new XE(this.h,E,R,H,y,N,h,w);this.h.implementations&&(bs=new C_(this.h.implementations,v,this.R),bs.init(),this.E.addListener(bs)),as.compute(As=>{this.R.schedule(()=>{$.init();let Ys=new PS,Se=new hS(this.h,v,os,g,this.E),Pt=new SS(this.h,i,c),jt=new vS(this.E,window.location,Pt),Xs=new wS(v,jt),In=new CS(v,this.h),Pn=new RS(this.h,E,g,C);if(As){this.E.emitInitTracking();let Ks=new M_;new YE(Pn,x,E,g,this.E,v,$,this.h,Xs,jt,Se,os,t,kt,e,r,In,Ys,yt,Me,St,it,Et,this.R,b,i,c,this.ot,Ks).start()}else new dS(this.E,v,$,Xs,jt,O,Se).start()})})})}}return s})(),ms=(()=>{let s;return function(n){let t="{domain}/tag/tag.bundle.js?v={version}",e,i={loadBundle(w){let x=w.source,N=w.data;if(c(N)){let C=()=>{let H=r(t,N);E(H,()=>x.postMessage("csBundleLoaded",w.origin))};e=N.token,b(i.loadBundle),l(w.origin)&&C()}}};function r(w,x){return csString.prototype.replace.call(csString.prototype.replace.call(csString.prototype.replace.call(w,"{version}",x.version),"{token}",x.token),"{domain}",x.domain)}function o(){return e}n.getToken=o;function c(w){return w&&w.type==="csBundleInjection"&&l(w.domain)&&g(w.version)&&h(w.token)}n.isAuthorizedIncomingMessage=c,n.hjDomainRegex=/^https?:\/\/[a-zA-Z0-9\.\-]+\.hotjar\.com$/;function l(w){return/^https?:\/\/[a-zA-Z0-9\.\-]+\.(content-square\.fr|contentsquare\.com|csq\.io)$/.test(w)||n.hjDomainRegex.test(w)}n.isAuthorizedDomain=l;function h(w){return/^[a-zA-Z0-9]+$/.test(w)}n.isAuthorizedToken=h;function g(w){return/^[a-zA-Z0-9\.]+$/.test(w)}n.isAuthorizedTagVersion=g;function d(){let w=window.opener||window.parent;return window!==w&&window.addEventListener}n.isActivable=d;function E(w,x){let N=document.createElement("script");N.type="text/javascript",N.async=!0,N.src=w,N.onload=x,N.charset="utf-8",document.head.appendChild(N)}n.addScript=E;function y(w){let x=document.createElement("link");x.rel="stylesheet",x.href=w,document.head.appendChild(x)}n.addStyle=y;function S(w){return`${w}?cb=${new csDate().getTime()}`}n.addCacheBusting=S;function R(){O(i.loadBundle)}n.waitForBundleInjection=R;function O(w){window.addEventListener("message",w,!1)}n.listen=O;function b(w){window.removeEventListener("message",w,!1)}n.removeListener=b}(s||(s={})),s})(),rc="_hp_ved",k_=18e5,L_="/js/ved.js",x_="/css/ved.css",U_="/js/ved.css",V_=(()=>{let s;return function(n){n.StatusUpdate="status"}(s||(s={})),s})(),j_=(()=>{let s;return function(n){n.ReceivedInitMessage="received_init_message"}(s||(s={})),s})();var ar=(()=>{let s;return function(n){let t=!1,e;function i(E){return e+E}function r(){let E=[i(x_),i(U_)];csArray.prototype.forEach.call(E,y=>{ms.addStyle(y)})}function o(E){let y=new csRegExp("(^|;)[ ]*"+E+"=([^;]*)"),S=y.exec(document.cookie);return S?decodeURIComponent(S[2]):null}function c(E,y,S){let R=encodeURIComponent(E)+"="+encodeURIComponent(y),O=new csDate;O.setTime(O.getTime()+S);let b=R+"; expires="+O.toUTCString()+"; path=/";document.cookie=b}function l(){c(rc,"on",k_)}function h(){return o(rc)==="on"}n.isVLCookieEnabled=h;function g(E){window.heapV=Object.assign({},window.heap,{source:E==null?void 0:E.source,uri:e,loadArgs:E==null?void 0:E.data.args,identify:()=>{},track:()=>{}})}n.initializeHeapV=g;function d(E,y){var S;if(e=E,y){let R={type:V_.StatusUpdate,value:j_.ReceivedInitMessage},O={targetOrigin:y==null?void 0:y.origin};(S=y==null?void 0:y.source)===null||S===void 0||S.postMessage(R,O)}t||(t=!0,l(),g(y),window.heapV&&(ms.addScript(i(L_)),r()))}n.init=d}(s||(s={})),s})(),H_=(()=>{let s;return function(n){let t=window.opener||window.parent,e="tag",i="https://app.contentsquare.com",r=[/^https:\/\/app\.contentsquare\.com$/,/^https:\/\/dev-app\.contentsquare\.com$/,/^https:\/\/staging-app\.contentsquare\.com$/,/^https:\/\/.*\.test\.contentsquare\.com$/,/^https:\/\/app\.[a-z0-9-]+\.csiab\.[a-z0-9-]+\.csq\.io$/,ms.hjDomainRegex],o,c,l,h={initHeapVisualLabeler(C){var H;C.origin===l&&((H=C.data)===null||H===void 0?void 0:H.message)==="init"&&C.source&&(ar.init(l,C),w(h.initHeapVisualLabeler))},ping(C){typeof C.data=="string"&&C.data==="ping"&&E(C.origin)&&(c=C.origin,o=ms.hjDomainRegex.test(C.origin)?i:C.origin,w(h.ping),b(h.insertMessageScript),y(ms.addCacheBusting("utils.js")))},insertMessageScript:x(C=>{typeof C.data=="string"&&C.data!=="ping"&&(w(h.insertMessageScript),y(C.data))})};function g(){return ms.getToken()}n.getToken=g;function d(){return window!==t&&window.addEventListener}n.isActivable=d;function E(C){return csArray.prototype.some.call(r,H=>H.test(C))}n.isAuthorizedDomain=E;function y(C,H){let $=document.createElement("script");$.type="text/javascript",$.async=!0;let it=o==null?void 0:csString.prototype.replace.call(o,/^https?:/,"");$.src=`${it}/${e}/${C}`,$.onload=H,$.charset="utf-8",document.getElementsByTagName("head")[0].appendChild($),S(C)}function S(C){csString.prototype.includes.call(C,"&mode=")&&sessionStorage.setItem("_hjRetakerMode",csString.prototype.split.call(C,"&mode=")[1])}function R(){b(h.ping),ms.waitForBundleInjection()}n.waitForConnection=R;function O(C){l=C,b(h.initHeapVisualLabeler),ar.isVLCookieEnabled()&&ar.init(l)}n.waitForHeapVisualLabeler=O;function b(C){window.addEventListener("message",C,!1)}n.listen=b;function w(C){window.removeEventListener("message",C,!1)}n.removeListener=w;function x(C){return function(H){H.origin===c&&C(H)}}n.secureListener=x;function N(C){c&&t.postMessage(C,c)}n.post=N}(s||(s={})),s})();var Wi=window.CSFrameCommunication||H_;var B_=(()=>{class s extends lo{constructor(t){super(),this.R=t}emitBeforeNaturalPageView(){for(let t of this.listeners)t.onBeforeNaturalPageView&&t.onBeforeNaturalPageView()}emitAfterNaturalPageView(){for(let t of this.listeners)t.onAfterNaturalPageView&&t.onAfterNaturalPageView()}emitInitTracking(){for(let t of this.listeners)t.onInitTracking&&t.onInitTracking()}emitStartTracking(t){for(let e of this.listeners)e.onStartTracking&&this.R.schedule(()=>e.onStartTracking(t))}emitArtificialPageViewEnd(){for(let t of this.listeners)if(t.onArtificialPageViewEnd)try{t.onArtificialPageViewEnd()}catch(e){B.error(e)}}emitBeforeArtificialPageView(){for(let t of this.listeners)t.onBeforeArtificialPageView&&t.onBeforeArtificialPageView()}emitAfterArtificialPageView(){for(let t of this.listeners)t.onAfterArtificialPageView&&t.onAfterArtificialPageView()}emitBeforeSessionRenewal(){for(let t of this.listeners)t.onBeforeSessionRenewal&&t.onBeforeSessionRenewal()}emitAfterSessionRenewal(){for(let t of this.listeners)t.onAfterSessionRenewal&&t.onAfterSessionRenewal()}emitOptout(){for(let t of this.listeners)t.onOptout&&t.onOptout()}emitReplayUnanonymizationConsentGranted(){for(let t of this.listeners)t.onReplayUnanonymizationConsentGranted&&t.onReplayUnanonymizationConsentGranted()}emitReplayUnanonymizationConsentWithdrawn(){for(let t of this.listeners)t.onReplayUnanonymizationConsentWithdrawn&&t.onReplayUnanonymizationConsentWithdrawn()}emitAfterReplayRecordingConsentGranted(){for(let t of this.listeners)t.onAfterReplayRecordingConsentGranted&&t.onAfterReplayRecordingConsentGranted()}emitAfterReplayRecordingConsentWithdrawn(){for(let t of this.listeners)t.onAfterReplayRecordingConsentWithdrawn&&t.onAfterReplayRecordingConsentWithdrawn()}emitCollectStateChange(t,e){for(let i of this.listeners)i.onCollectStateChange&&i.onCollectStateChange(t,e)}emitInitialDomStart(){for(let t of this.listeners)t.onInitialDomStart&&t.onInitialDomStart()}emitInitialDomDone(t){for(let e of this.listeners)e.onInitialDomDone&&e.onInitialDomDone(t)}emitRecordingContextChange(){for(let t of this.listeners)t.onRecordingContextChange&&t.onRecordingContextChange()}emitSensitiveStatusChange(){var t;for(let e of this.listeners)(t=e.onSensitiveStatusChange)===null||t===void 0||t.call(e)}emitBeforeVisitorRenewal(){for(let t of this.listeners)t.onBeforeVisitorRenewal&&t.onBeforeVisitorRenewal()}emitAfterVisitorCleared(){for(let t of this.listeners)t.onAfterVisitorCleared&&t.onAfterVisitorCleared()}emitAfterVisitorRenewal(){for(let t of this.listeners)t.onAfterVisitorRenewal&&t.onAfterVisitorRenewal()}}return j([It("emitStartTracking")],s.prototype,"emitStartTracking",null),s})();var F_=(()=>{let s;return function(n){function t(){return typeof window.CSJavascriptBridge=="object"&&typeof window.CSJavascriptBridge.optIn=="function"&&typeof window.CSJavascriptBridge.optOut=="function"&&typeof window.CSJavascriptBridge.sendEvent=="function"&&typeof window.CSJavascriptBridge.sendDynamicVar=="function"&&typeof window.CSJavascriptBridge.sendTransaction=="function"}n.isCSJavascriptBridgeDefined=t;function e(){if(typeof window.CSJavascriptBridge.getVersion=="function")try{let S=window.CSJavascriptBridge.getVersion();if(Ct(S))return S}catch{B.warn("an error occurred when calling getVersion")}return null}n.getBridgeVersion=e;function i(){typeof window.CSJavascriptBridge.onWebviewTrackingReady=="function"&&window.CSJavascriptBridge.onWebviewTrackingReady()}n.notifyIsReadyForTracking=i;function r(S){window.CSJavascriptBridge.sendEvent(csJSON.stringify(S))}n.sendAnalysisEvent=r;function o(S){if(window.CSJavascriptBridge.sendSREvent)for(let R of S.events)window.CSJavascriptBridge.sendSREvent(csJSON.stringify(R))}n.sendSREvent=o;function c(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendLog&&window.CSJavascriptBridge.sendLog(csJSON.stringify(S))}n.sendLog=c;function l(){window.CSJavascriptBridge.optIn()}n.sendOptIn=l;function h(){window.CSJavascriptBridge.optOut()}n.sendOptOut=h;function g(S,R){window.CSJavascriptBridge.sendDynamicVar(S,R)}n.sendDynamicVariable=g;function d(S,R,O){window.CSJavascriptBridge.sendTransaction(S,R,O)}n.sendTransaction=d;function E(S,R){if(window.CSJavascriptBridge.sendAssets){let O=csJSON.stringify(S);window.CSJavascriptBridge.sendAssets(O,R||null)}else window.CSJavascriptBridge.sendSRAssets&&window.CSJavascriptBridge.sendSRAssets(csArray.prototype.map.call(S,O=>O.assetId))}n.sendAssets=E;function y(S){window.CSJavascriptBridge&&window.CSJavascriptBridge.sendNativeSREvent&&window.CSJavascriptBridge.sendNativeSREvent(csJSON.stringify(S))}n.sendNativeSREvent=y}(s||(s={})),s})();var z_=(()=>{class s{constructor(t,e,i){this.h=t,this.mt=e,this.ls=i}start(){var t,e,i,r,o;if(window.UXAnalytics)return;window.UXAnalytics={};let c=new Xc(!!(!((t=this.h.taskSchedulerOptions)===null||t===void 0)&&t.enabled),(e=this.h.taskSchedulerOptions)===null||e===void 0?void 0:e.maxProcessingTime,(i=this.h.taskSchedulerOptions)===null||i===void 0?void 0:i.waitDuration),l=new Jd(this.mt,this.h);l.init();let h=new Zd(this.h,l);if(this.mt.isTopWindowTracker()&&h.canTrack()){if(!((r=window.CSProtectnativeFunctionsLogs)===null||r===void 0)&&r.Warning&&B.warn(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Warning}`),!((o=window.CSProtectnativeFunctionsLogs)===null||o===void 0)&&o.Critical){B.error(`protectNativeFunctions failed: ${window.CSProtectnativeFunctionsLogs.Critical}`);return}Xd();let d=new B_(c),E=new D_(this.h,l,this.ls,c,d);this.h.isQuotaEnabled()?E.initWithQuota():E.init()}let g=csString.prototype.indexOf.call(window.location.href,"csDebug=1")>-1;window.UXAnalytics={Sensitive:{isNodeSensitive(d){return k.isMaskedElement(d)||k.isMaskedElementChild(d)},isAttributeSensitive(d,E){return k.isMaskedAttribute(d,E)},getSensitiveAttributes(d){return yi(d.attributes,E=>k.isMaskedAttribute(d,E.name))}},Console:{warn(d){g&&console.warn("cs.tracking.warning",d)},error(d){g&&console.error("cs.tracking.error",d)}},Version:wc},window.CSFrameCommunication||(window.CSFrameCommunication=Wi,Wi.isActivable()&&Wi.waitForConnection(),this.h.isCsCrosswritingHeap()&&Wi.waitForHeapVisualLabeler(this.h.getHeapWebAppUri()))}}return j([It("main.start"),P("main.start")],s.prototype,"start",null),s})(),$_=(()=>{class s{constructor(){}send(t,e,i=ht.warn){let r={message:t,errorCode:e,level:i};F_.sendLog(r)}}return s})();var G_=(()=>{class s{constructor(t,e,i){this.U=t,this.I=e,this.hC=i,this.At=[],this.Ie=null,this.uC=Hr().v}Vm(){this.At.length!==0&&(this.U.send({m:csArray.prototype.map.call(this.At,t=>({n:t.name,p:t.parameter,v:t.value})),p:this.I.anonymizePII(window.location.pathname),pid:this.hC,v:this.uC}),this.At=[])}push(t){if(csArray.prototype.push.call(this.At,...t),this.Ie&&(csClearTimeout(this.Ie),this.Ie=null),this.At.length>=s.MAX_QUEUE_SIZE){this.Vm();return}this.Ie=window.csSetTimeout(()=>{this.Vm(),this.Ie=null},s.DEBOUNCE_INTERVAL)}}return s.DEBOUNCE_INTERVAL=5e3,s.MAX_QUEUE_SIZE=100,s})();function q_(s,n){let t=s.validationRate/10,e=Es.boolean(t);if((s.environment==="staging"||!1||e)&&!n.isInWebViewContext())try{let o=Nl.create(B.warn,n.isTopWindowTracker()),l=new Nc(o).create(s.getMetricsUri(),!0),h=new bi,g=new G_(l,h,s.projectId);lt.setService(g)}catch(o){B.warn(`Error initializing metrics: ${o.message}`)}}function W_(){var s;let n=new Sd(window.CS_CONF);window._uxa=window._uxa||[],n.processOptionOverrides(window._uxa);let t=new vd(window,n);t.init();let e=new Gd;if(ed(B),B.computeIsActive(n.validationRate),t.isTopWindowTracker()){let o=new jd(n,e);B.setStrategy(o)}else if(t.isInIframeContext()){let r=new $d(n);B.setStrategy(r)}else if(t.isInWebViewContext()){let r=new $_;B.setStrategy(r)}!((s=n==null?void 0:n.experimental)===null||s===void 0)&&s.disableMutationObserverProtection&&window.csMutationObserver&&(window.csMutationObserver=ns(window,"MutationObserver")),id(),q_(n,t),new z_(n,t,e).start()}window.CSCurrentScript=document.currentScript;csSetTimeout(()=>{try{qd(W_)}catch{}});})();

